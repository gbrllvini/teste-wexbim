{"version":3,"file":"index.js","mappings":"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AM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAG9B,GAAwB,EAAM,EAAM,EAAM,GAC1C,GAAwB,EAAM,EAAM,EAAM,GAC1C,GAAwB,EAAM,EAAM,EAAM,GAC1C,GAAwB,EAAM,EAAM,EAAM,GAC1C,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAG9B,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAG9B,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAG9B,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAG9B,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAC9B,GAAwB,EAAM,GAG9B,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAG9B,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAG1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAG9B,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAG9B,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAG9B,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAG1C,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAG9B,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,GAAM,EAAM,GAClB,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAG9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAG9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAG1C,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAC9B,EAAM,GAAM,EAAM,EAAM,EAAM,GAG9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,GAC9B,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,GAC1C,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAAM,KAGtC,KAAAm5B,IAAM,IAAIn5B,aAAa,CAC3Bkc,KAAKy3B,MACLz3B,KAAKy3B,MACLz3B,KAAKy3B,MACLz3B,KAAKy3B,MACLz3B,KAAK03B,KACL13B,KAAK03B,KACL13B,KAAK03B,KACL13B,KAAK03B,KACL13B,KAAKq3B,IACLr3B,KAAKq3B,IACLr3B,KAAKq3B,IACLr3B,KAAKq3B,IACLr3B,KAAKs3B,OACLt3B,KAAKs3B,OACLt3B,KAAKs3B,OACLt3B,KAAKs3B,OACLt3B,KAAKw3B,MACLx3B,KAAKw3B,MACLx3B,KAAKw3B,MACLx3B,KAAKw3B,MACLx3B,KAAKu3B,KACLv3B,KAAKu3B,KACLv3B,KAAKu3B,KACLv3B,KAAKu3B,KACLv3B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK23B,eACL33B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK43B,gBACL53B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK63B,cACL73B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK83B,eACL93B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAK+3B,kBACL/3B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKg4B,mBACLh4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKi4B,iBACLj4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKk4B,kBACLl4B,KAAKo4B,UACLp4B,KAAKo4B,UACLp4B,KAAKo4B,UACLp4B,KAAKo4B,UACLp4B,KAAKo4B,UACLp4B,KAAKo4B,UACLp4B,KAAKo4B,UACLp4B,KAAKo4B,UACLp4B,KAAKm4B,SACLn4B,KAAKm4B,SACLn4B,KAAKm4B,SACLn4B,KAAKm4B,SACLn4B,KAAKm4B,SACLn4B,KAAKm4B,SACLn4B,KAAKm4B,SACLn4B,KAAKm4B,SACLn4B,KAAKq4B,UACLr4B,KAAKq4B,UACLr4B,KAAKq4B,UACLr4B,KAAKq4B,UACLr4B,KAAKq4B,UACLr4B,KAAKq4B,UACLr4B,KAAKq4B,UACLr4B,KAAKq4B,UACLr4B,KAAKs4B,SACLt4B,KAAKs4B,SACLt4B,KAAKs4B,SACLt4B,KAAKs4B,SACLt4B,KAAKs4B,SACLt4B,KAAKs4B,SACLt4B,KAAKs4B,SACLt4B,KAAKs4B,SACLt4B,KAAKw4B,aACLx4B,KAAKw4B,aACLx4B,KAAKw4B,aACLx4B,KAAKw4B,aACLx4B,KAAKw4B,aACLx4B,KAAKw4B,aACLx4B,KAAKw4B,aACLx4B,KAAKw4B,aACLx4B,KAAKu4B,YACLv4B,KAAKu4B,YACLv4B,KAAKu4B,YACLv4B,KAAKu4B,YACLv4B,KAAKu4B,YACLv4B,KAAKu4B,YACLv4B,KAAKu4B,YACLv4B,KAAKu4B,YACLv4B,KAAKy4B,aACLz4B,KAAKy4B,aACLz4B,KAAKy4B,aACLz4B,KAAKy4B,aACLz4B,KAAKy4B,aACLz4B,KAAKy4B,aACLz4B,KAAKy4B,aACLz4B,KAAKy4B,aACLz4B,KAAK04B,YACL14B,KAAK04B,YACL14B,KAAK04B,YACL14B,KAAK04B,YACL14B,KAAK04B,YACL14B,KAAK04B,YACL14B,KAAK04B,YACL14B,KAAK04B,YACL14B,KAAK24B,YACL34B,KAAK24B,YACL34B,KAAK24B,YACL34B,KAAK24B,YACL34B,KAAK24B,YACL34B,KAAK24B,YACL34B,KAAK24B,YACL34B,KAAK24B,YACL34B,KAAK44B,WACL54B,KAAK44B,WACL54B,KAAK44B,WACL54B,KAAK44B,WACL54B,KAAK44B,WACL54B,KAAK44B,WACL54B,KAAK44B,WACL54B,KAAK44B,WACL54B,KAAK64B,WACL74B,KAAK64B,WACL74B,KAAK64B,WACL74B,KAAK64B,WACL74B,KAAK64B,WACL74B,KAAK64B,WACL74B,KAAK64B,WACL74B,KAAK64B,WACL74B,KAAK84B,UACL94B,KAAK84B,UACL94B,KAAK84B,UACL94B,KAAK84B,UACL94B,KAAK84B,UACL94B,KAAK84B,UACL94B,KAAK84B,UACL94B,KAAK84B,YAvlDL94B,KAAKw5B,OAAS/a,CAClB,CAwlDJ,OAr/CI,sBAAW,sBAAO,C,IAAlB,WAAgC,OAAOze,KAAK0W,QAAU,E,IACtD,SAAmBjN,GACfzJ,KAAK0W,SAAWjN,EACZzJ,KAAKmB,QACLnB,KAAKmB,OAAO+a,MAEpB,E,gCAgCO,YAAAwR,KAAP,SAAYvsB,GAAZ,WAEInB,KAAKmB,OAASA,EACd,IAAI2P,EAAK9Q,KAAKmB,OAAO2P,GAGrB9Q,KAAKy5B,QAAU,KACfz5B,KAAKs1B,cAELt1B,KAAK05B,OAAS15B,KAAKq5B,aACnBr5B,KAAK25B,WAAa,EAGlB7oB,EAAG8c,WAAW5tB,KAAKy5B,SAGnBz5B,KAAK45B,uBAAyB9oB,EAAGuQ,mBAAmBrhB,KAAKy5B,QAAS,YAClEz5B,KAAK65B,wBAA0B/oB,EAAGuQ,mBAAmBrhB,KAAKy5B,QAAS,aACnEz5B,KAAK85B,4BAA8BhpB,EAAGuQ,mBAAmBrhB,KAAKy5B,QAAS,gBACvEz5B,KAAK+5B,qBAAuBjpB,EAAGuQ,mBAAmBrhB,KAAKy5B,QAAS,UAChEz5B,KAAKg6B,yBAA2BlpB,EAAGuQ,mBAAmBrhB,KAAKy5B,QAAS,cACpEz5B,KAAKi6B,uBAAyBnpB,EAAGuQ,mBAAmBrhB,KAAKy5B,QAAS,YAClEz5B,KAAKk6B,4BAA8BppB,EAAGuQ,mBAAmBrhB,KAAKy5B,QAAS,iBAEvEz5B,KAAKm6B,mBAAqBrpB,EAAGsQ,kBAAkBphB,KAAKy5B,QAAS,WACzDz5B,KAAKo6B,qBAAuBtpB,EAAGsQ,kBAAkBphB,KAAKy5B,QAAS,aAC/Dz5B,KAAKq6B,eAAiBvpB,EAAGsQ,kBAAkBphB,KAAKy5B,QAAS,OACzD3oB,EAAGwQ,wBAAwBthB,KAAKm6B,oBACpCrpB,EAAGwQ,wBAAwBthB,KAAKo6B,sBAChCtpB,EAAGwQ,wBAAwBthB,KAAKq6B,gBAGhCr6B,KAAKuZ,aAAezI,EAAGwI,eACvBtZ,KAAKs6B,cAAgBxpB,EAAGwI,eACxBtZ,KAAKu6B,gBAAkBzpB,EAAGwI,eAC1BtZ,KAAKw6B,UAAY1pB,EAAGwI,eAEpBxI,EAAG0J,WAAW1J,EAAGsd,qBAAsBpuB,KAAKuZ,cAC5CzI,EAAG8M,WAAW9M,EAAGsd,qBAAsBpuB,KAAKwX,QAAS1G,EAAGyN,aACxDzN,EAAG0J,WAAW1J,EAAG2J,aAAcza,KAAKs6B,eACpCxpB,EAAG8M,WAAW9M,EAAG2J,aAAcza,KAAKke,SAAUpN,EAAGyN,aACjDzN,EAAG0J,WAAW1J,EAAG2J,aAAcza,KAAKu6B,iBACpCzpB,EAAG8M,WAAW9M,EAAG2J,aAAcza,KAAKu5B,UAAWzoB,EAAGyN,aAClDzN,EAAG0J,WAAW1J,EAAG2J,aAAcza,KAAKw6B,WACpC1pB,EAAG8M,WAAW9M,EAAG2J,aAAcza,KAAKid,IAAKnM,EAAGyN,aAG5C,IAAI56B,EAAOqc,KAEX,GADAA,KAAKy6B,SAAW3pB,EAAGiB,qBACU,IAAjB/R,KAAW,OAAmB,CAEtC,IAAI+U,EAAO,EAAAoiB,aAAaC,GACpB3Y,EAAQ,IAAIic,MAChB/2C,EAAK61C,OAAS/a,EACdA,EAAMnO,iBAAiB,QACnB,WAEIQ,EAAGoB,YAAYpB,EAAGqB,WAAYxuB,EAAK82C,UACnC3pB,EAAGgC,YAAYhC,EAAGiC,oBAAqB,GACvCjC,EAAGsB,WAAWtB,EAAGqB,WAAY,EAAGrB,EAAGuB,KAAMvB,EAAGuB,KAAMvB,EAAGwB,cAAe3uB,EAAK61C,QACzE1oB,EAAGyB,cAAczB,EAAGqB,WAAYrB,EAAG+B,mBAAoB/B,EAAGsS,QAC1DtS,EAAGyB,cAAczB,EAAGqB,WAAYrB,EAAG6B,mBAAoB7B,EAAG6pB,uBAC1D7pB,EAAG8pB,eAAe9pB,EAAGqB,WACzB,IACJsM,EAAMoc,IAAM9lB,C,MAGZjE,EAAGoB,YAAYpB,EAAGqB,WAAYxuB,EAAK82C,UACnC3pB,EAAGgC,YAAYhC,EAAGiC,oBAAqB,GACvCjC,EAAGsB,WAAWtB,EAAGqB,WAAY,EAAGrB,EAAGuB,KAAMvB,EAAGuB,KAAMvB,EAAGwB,cAAe3uB,EAAK61C,QACzE1oB,EAAGyB,cAAczB,EAAGqB,WAAYrB,EAAG+B,mBAAoB/B,EAAGsS,QAC1DtS,EAAGyB,cAAczB,EAAGqB,WAAYrB,EAAG6B,mBAAoB7B,EAAG6pB,uBAC1D7pB,EAAG8pB,eAAe9pB,EAAGqB,YAGzBhR,EAAOgJ,OAAOmG,iBAAiB,aAC3B,SAACC,GACG,KAAI,EAAKuJ,SAAW3Y,EAAO4vB,QAAQjiB,QAAQ,GAAQ,GAAnD,CAMA,IAAI4X,EAASnW,EAAMoX,QACfhB,EAASpW,EAAMqX,QAGf9wB,EAAIqK,EAAOgJ,OAAOjB,wBAClBxe,EAAIg8B,EAAS5vB,EAAErF,KACf5J,EAAIsZ,EAAOtU,QAAU85B,EAAS7vB,EAAElF,KAGpC,GAAKjO,EAAK00B,QAAV,CAOA,IAAK10B,EAAKm3C,WAAWpwC,EAAG7C,GAGpB,OAFAlE,EAAK+1C,OAAS/1C,EAAK01C,kBACnB11C,EAAKg2C,WAAa,GAKtB,IAAI/1B,EAAK,EAAKgR,MAAMrE,GACV,MAAN3M,GACAjgB,EAAK+1C,OAAS/1C,EAAK01C,aACnB11C,EAAKg2C,WAAa,GACX/1B,GAAMjgB,EAAK0zC,KAAOzzB,GAAMjgB,EAAKm1C,YACpCn1C,EAAK+1C,OAAS/1C,EAAKy1C,YACnBz1C,EAAKg2C,WAAa/1B,GAGtB,EAAKgrB,YAAYztB,EAAOvU,MAAOuU,EAAOtU,O,EAC1C,IACA,GAEJlJ,EAAKo3C,OAAQ,EAEb55B,EAAOgJ,OAAOmG,iBAAiB,aAC3B,SAACC,GAEG,KAAI,EAAKuJ,SAAW3Y,EAAO4vB,QAAQjiB,QAAQ,GAAQ,GAAnD,CAKA,IAAI4X,EAASnW,EAAMoX,QACfhB,EAASpW,EAAMqX,QAGf9wB,EAAIqK,EAAOgJ,OAAOjB,wBAClB2e,EAAQnB,EAAS5vB,EAAErF,KACnBq2B,EAAQ3mB,EAAOtU,QAAU85B,EAAS7vB,EAAElF,KAGxC,GAAK,EAAKymB,SAAY10B,EAAKm3C,WAAWjT,EAAOC,GAA7C,CAIA,IAAIlkB,EAAK,EAAKgR,MAAMrE,GAEV,MAAN3M,GAIAA,GAAMjgB,EAAK0zC,KAAOzzB,GAAMjgB,EAAKm1C,YAE7Bn1C,EAAKo3C,OAAQ,EACbp3C,EAAKq3C,oBAAsB75B,EAAO2kB,eAClC3kB,EAAO2kB,eAAiB,Q,EAEhC,IACA,GAEJhb,OAAOwF,iBAAiB,WACpB,SAACC,GACO,EAAKuJ,SAAW3Y,EAAO4vB,QAAQjiB,QAAQ,GAAQ,IAMhC,IAAfnrB,EAAKo3C,QACL55B,EAAO2kB,eAAiBniC,EAAKq3C,qBAL7Br3C,EAAKo3C,OAAQ,CAQrB,IACA,GAEJ55B,EAAO85B,GAAG,QAAQ,SAACrb,GAEf,GAAkB,MAAdA,EAAK/b,MAAT,CAIA,IAAM0M,EAAQqP,EAAKrP,MACnB,GAAMA,aAAiB2qB,YAAc3qB,aAAiB4qB,WAAtD,CAIA,IAAIC,EAA4B,KAE5BA,EADA7qB,aAAiB2qB,WACT3qB,EAEGA,EACA8b,eAAe,GAG9B,IAAMzoB,EAAK,EAAKgR,MAAMwmB,GAClB/1B,EAAM,EAAAR,KAAKjgB,SACXy2C,EAAgB,EAAAx2B,KAAK5f,WAAW,EAAG,EAAG,GAE1C,OAAQ2e,GACJ,KAAK,EAAKyzB,IACNhyB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,EAAG,GAC5Bo2C,EAAU,EAAAx2B,KAAK5f,WAAW,EAAG,EAAG,GAChC,MACJ,KAAK,EAAKqyC,OACNjyB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,GAAI,GAC7Bo2C,EAAU,EAAAx2B,KAAK5f,WAAW,GAAI,EAAG,GACjC,MACJ,KAAK,EAAKwyC,MACNpyB,EAAM,EAAAR,KAAK5f,WAAW,GAAI,EAAG,GAC7B,MACJ,KAAK,EAAKyyC,KACNryB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,EAAG,GAC5B,MACJ,KAAK,EAAKsyC,KACNlyB,EAAM,EAAAR,KAAK5f,YAAY,EAAG,EAAG,GAC7B,MACJ,KAAK,EAAKuyC,MACNnyB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,EAAG,GAC5B,MACJ,KAAK,EAAK0yC,eACNtyB,EAAM,EAAAR,KAAK5f,YAAY,GAAI,EAAG,GAC9B,MACJ,KAAK,EAAK2yC,gBACNvyB,EAAM,EAAAR,KAAK5f,WAAW,GAAI,EAAG,GAC7B,MACJ,KAAK,EAAK4yC,cACNxyB,EAAM,EAAAR,KAAK5f,YAAY,EAAG,EAAG,GAC7B,MACJ,KAAK,EAAK6yC,eACNzyB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,EAAG,GAC5B,MACJ,KAAK,EAAK8yC,kBACN1yB,EAAM,EAAAR,KAAK5f,YAAY,GAAI,GAAI,GAC/B,MACJ,KAAK,EAAK+yC,mBACN3yB,EAAM,EAAAR,KAAK5f,WAAW,GAAI,GAAI,GAC9B,MACJ,KAAK,EAAKgzC,iBACN5yB,EAAM,EAAAR,KAAK5f,YAAY,EAAG,GAAI,GAC9B,MACJ,KAAK,EAAKizC,kBACN7yB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,GAAI,GAC7B,MACJ,KAAK,EAAKkzC,SACN9yB,EAAM,EAAAR,KAAK5f,YAAY,EAAG,EAAG,GAC7B,MACJ,KAAK,EAAKmzC,UACN/yB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,EAAG,GAC5B,MACJ,KAAK,EAAKozC,UACNhzB,EAAM,EAAAR,KAAK5f,WAAW,GAAI,EAAG,GAC7B,MACJ,KAAK,EAAKqzC,SACNjzB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,EAAG,GAC5B,MACJ,KAAK,EAAKszC,YACNlzB,EAAM,EAAAR,KAAK5f,YAAY,EAAG,GAAI,GAC9B,MACJ,KAAK,EAAKuzC,aACNnzB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,GAAI,GAC7B,MACJ,KAAK,EAAKwzC,aACNpzB,EAAM,EAAAR,KAAK5f,WAAW,GAAI,GAAI,GAC9B,MACJ,KAAK,EAAKyzC,YACNrzB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,GAAI,GAC7B,MACJ,KAAK,EAAK0zC,YACNtzB,EAAM,EAAAR,KAAK5f,WAAW,GAAI,EAAG,GAC7B,MACJ,KAAK,EAAK2zC,WACNvzB,EAAM,EAAAR,KAAK5f,YAAY,GAAI,EAAG,GAC9B,MACJ,KAAK,EAAK4zC,WACNxzB,EAAM,EAAAR,KAAK5f,WAAW,EAAG,EAAG,GAC5B,MACJ,KAAK,EAAK6zC,UACNzzB,EAAM,EAAAR,KAAK5f,YAAY,EAAG,EAAG,GAC7B,MACJ,QACI,OAAO,EAGf,IAAM0gB,EAAOxE,EAAO8mB,uBACdlB,EAAS,EAAAliB,KAAK5f,WAAW0gB,EAAK,GAAKA,EAAK,GAAK,EAAKA,EAAK,GAAKA,EAAK,GAAK,EAAKA,EAAK,GAAKA,EAAK,GAAK,GAIrG,GAHAN,EAAM,EAAAR,KAAK3O,UAAU,EAAA2O,KAAKjgB,SAAUygB,GAGb,IAAnB,EAAKi0B,UAAiB,CACtB,IAAMthC,GAAS,EAAKshC,UAAYr1C,KAAKK,GAAK,IACpCm/B,EAAW,EAAAhB,KAAKz0B,QAAQ,EAAAy0B,KAAK79B,SAAU,EAAA69B,KAAK79B,SAAUoT,GAC5DqN,EAAM,EAAAR,KAAK1N,cAAc,EAAA0N,KAAKjgB,SAAUygB,EAAKoe,GAC7C4X,EAAU,EAAAx2B,KAAK1N,cAAc,EAAA0N,KAAKjgB,SAAUy2C,EAAS5X,E,CAGzD,IAAM6X,EAAmBn6B,EAAO0E,qBAAqBF,EAAMN,EAAKg2B,GAE1D/iB,EAAQ,EAAAzT,KAAKle,MAAM,EAAAke,KAAKjgB,SAAUygB,EAAKi2B,EAAiBzlC,UACxD4L,EAAS,EAAAoD,KAAKrd,IAAI,EAAAqd,KAAKjgB,SAAUmiC,EAAQzO,GAG3CjS,EAAK,EAAAC,KAAK3S,OAAO,EAAA2S,KAAK1hB,SAAU6c,EAAQslB,EAAQsU,GACpD,EAAKl6B,OAAOoF,WAAWC,OAAO,CAAEH,GAAIA,EAAIxZ,OAAQyuC,EAAiBzuC,QAAU,EAAKsU,OAAOo6B,a,EAC3F,IAEAv7B,KAAK+4B,cAAe,CAExB,EAGO,YAAApK,aAAP,SAAoB/hC,EAAeC,GAAkB,EAE9C,YAAA2uC,aAAP,SAAoBx2C,GAChB,OAAIA,EAAS6e,QAAU7D,KAAKg5B,UAA2B,MAAfh0C,EAAS4e,EAOrD,EAEO,YAAAgrB,YAAP,SAAmBhiC,EAAeC,GAC9B,IAAImT,KAAK8Z,QAAT,CAGA,IAAIhJ,EAAK9Q,KAAK4Z,YACd9I,EAAGwe,QAAQxe,EAAGme,OACdne,EAAGwe,QAAQxe,EAAG0e,YAGd1e,EAAGoK,UAAUlb,KAAK85B,4BAA6B,GAC/C95B,KAAKkc,KAAKtvB,EAAOC,E,CACrB,EAEO,YAAAqiC,eAAP,WAA0B,EAEnB,YAAAC,cAAP,WACQnvB,KAAK8Z,UAGA9Z,KAAK4Z,YAEXsB,UAAUlb,KAAK85B,4BAA6B,GAC/C95B,KAAKkc,KAAKlc,KAAKmB,OAAOvU,MAAOoT,KAAKmB,OAAOtU,QAC7C,EAEO,YAAAuiC,mBAAP,WACQpvB,KAAK8Z,UAGA9Z,KAAK4Z,YAEXsB,UAAUlb,KAAK85B,4BAA6B95B,KAAKg5B,UACpDh5B,KAAKkc,KAAKlc,KAAKmB,OAAOvU,MAAOoT,KAAKmB,OAAOtU,QAC7C,EAEQ,YAAA+nB,MAAR,SAAcrE,GACV,IAAI7lB,EAAI6lB,EAAMoX,QACV9/B,EAAI0oB,EAAMqX,QAGV9wB,EAAIkJ,KAAKmB,OAAOgJ,OAAOjB,wBACvB2e,EAAQn9B,EAAIoM,EAAErF,KACdq2B,EAAQ9nB,KAAKmB,OAAOtU,QAAUhF,EAAIiP,EAAElF,KAElCkf,EAAK9Q,KAAKmB,OAAO2P,GACnBgU,EAAK,IAAI,EAAA1O,YAAYtF,EAAI9Q,KAAKmB,OAAOvU,MAAOoT,KAAKmB,OAAOtU,OAAQmT,KAAKmB,OAAOujB,gBAAiB1kB,KAAKmB,OAAO6P,WAC7GF,EAAG2qB,SAAS,EAAG,EAAGz7B,KAAKmB,OAAOvU,MAAOoT,KAAKmB,OAAOtU,QACjDikB,EAAGke,OAAOle,EAAG0e,YACb1e,EAAGwe,QAAQxe,EAAGme,OAEdne,EAAG4qB,WAAW,EAAG,EAAG,EAAG,GAEvB5qB,EAAG6Q,MAAM7Q,EAAG6qB,iBAAmB7qB,EAAG8qB,kBAElC57B,KAAKmvB,gBACL,IAAMvrB,EAAKkhB,EAAGlQ,MAAMiT,EAAOC,GAE3B,OADAhD,EAAGhP,SACIlS,CACX,EAEQ,YAAAgW,UAAR,WACI,IAAI9I,EAAK9Q,KAAKmB,OAAO2P,GAIrB,OAFAA,EAAG8c,WAAW5tB,KAAKy5B,SAEZ3oB,CACX,EAEQ,YAAAgqB,WAAR,SAAmBpwC,EAAW7C,GAC1B,IAAMg0C,EAAO77B,KAAKqY,QAAQ,GAAKrY,KAAKmB,OAAOvU,MACrCkvC,EAAO97B,KAAKqY,QAAQ,GAAKrY,KAAKmB,OAAOvU,MACrCmvC,EAAO/7B,KAAKqY,QAAQ,GAAKrY,KAAKmB,OAAOtU,OACrCmvC,EAAOh8B,KAAKqY,QAAQ,GAAKrY,KAAKmB,OAAOtU,OAE3C,QAASnC,EAAImxC,GAAQnxC,EAAIoxC,GAAQj0C,EAAIk0C,GAAQl0C,EAAIm0C,EACrD,EAEQ,YAAA9f,KAAR,SAAa+f,EAAqBC,GAC9B,IAAIl8B,KAAK8Z,SAIJ9Z,KAAK+4B,aAAV,CAIA,IAAMjoB,EAAK9Q,KAAKmB,OAAO2P,GAEjBqrB,EAASl4C,KAAKyR,IAAIumC,EAAaC,GAC/BE,EAAWp8B,KAAKk5B,QAAUiD,EAC1BE,EAAWr8B,KAAK2e,QAAUwd,EAC5BlD,EAAQj5B,KAAKi5B,MACbA,EAAQmD,EACRnD,EAAQmD,EACDnD,EAAQoD,IACfpD,EAAQoD,GAIZ,IAAIjX,EAAU,EAAA9e,KAAK1hB,SACfiI,EAAS,EAAMosC,EACfrsC,EAAQC,EAASqvC,EAAeD,EAChCC,EAAeD,IAEfpvC,GADAD,EAAQ,EAAMqsC,GACGgD,EAAcC,GAGnC,IAAII,EAAUrD,EAAQiD,EAAeD,EAAc,EAC/CM,EAAkB,EAARtD,EAGd,OAAQj5B,KAAK8I,UACT,KAAK9I,KAAKw4B,aACN,EAAAlyB,KAAK7S,MAAM2xB,EACP,EAAMx4B,EACN,GACC,EACDC,EAAS,GACR,EACD,GACJmT,KAAKqY,QAAU,CAAC,EAAIikB,EAAS,EAAK,EAAKC,GACvC,MACJ,KAAKv8B,KAAKu4B,YACN,EAAAjyB,KAAK7S,MAAM2xB,GACN,EACDx4B,EAAQ,GACP,EACDC,EAAS,GACR,EACD,GACJmT,KAAKqY,QAAU,CAAC,EAAK,EAAKikB,EAASC,GACnC,MACJ,KAAKv8B,KAAKm4B,SACN,EAAA7xB,KAAK7S,MAAM2xB,GACN,EACDx4B,EAAQ,EACR,EAAMC,EACN,GACC,EACD,GACJmT,KAAKqY,QAAU,CAAC,EAAK,EAAMkkB,EAASD,EAAS,GAC7C,MACJ,KAAKt8B,KAAKo4B,UACN,EAAA9xB,KAAK7S,MAAM2xB,EACP,EAAMx4B,EACN,EACA,EAAMC,EACN,GACC,EACD,GACJmT,KAAKqY,QAAU,CAAC,EAAMikB,EAAS,EAAMC,EAAS,EAAK,GAM3D,IAAI9Y,EAAW,EAAA+Y,KAAKtzC,SAAS,EAAAszC,KACxB53C,SACDob,KAAKmB,OAAO8gB,UAGhB,GAAuB,IAAnBjiB,KAAKs5B,UAAiB,CACtB,IAAMthC,GAASgI,KAAKs5B,UAAYr1C,KAAKK,GAAK,IACpCm4C,EAAgB,EAAAD,KAAKz1C,aAAa,EAAAy1C,KAAK53C,SAAUoT,GACvDyrB,EAAW,EAAA+Y,KAAKx2C,SAAS,EAAAw2C,KAAK53C,SAAU6+B,EAAUgZ,E,CAGtD3rB,EAAGue,iBAAiBrvB,KAAK45B,wBAAwB,EAAOxU,GACxDtU,EAAG4rB,iBAAiB18B,KAAK65B,yBAAyB,EAAOpW,GACzD3S,EAAGoK,UAAUlb,KAAK+5B,qBAAsB/5B,KAAK05B,QAC7C5oB,EAAGoK,UAAUlb,KAAKk6B,4BAA6Bl6B,KAAKm5B,cACpDroB,EAAGoK,UAAUlb,KAAKg6B,yBAA0Bh6B,KAAK25B,YAGjD7oB,EAAG0J,WAAW1J,EAAG2J,aAAcza,KAAKs6B,eACpCxpB,EAAG4J,oBAAoB1a,KAAKm6B,mBAAoB,EAAGrpB,EAAG+J,OAAO,EAAO,EAAG,GACvE/J,EAAG0J,WAAW1J,EAAG2J,aAAcza,KAAKw6B,WACpC1pB,EAAG4J,oBAAoB1a,KAAKq6B,eAAgB,EAAGvpB,EAAG+J,OAAO,EAAO,EAAG,GACnE/J,EAAG0J,WAAW1J,EAAG2J,aAAcza,KAAKu6B,iBACpCzpB,EAAG4J,oBAAoB1a,KAAKo6B,qBAAsB,EAAGtpB,EAAG+J,OAAO,EAAO,EAAG,GAGzE/J,EAAGkB,cAAclB,EAAGmJ,UACpBnJ,EAAGoB,YAAYpB,EAAGqB,WAAYnS,KAAKy6B,UACnC3pB,EAAGoJ,UAAUla,KAAKi6B,uBAAwB,GAE1C,IAAI0C,EAAY7rB,EAAGlG,aAAakG,EAAGye,WAC9BoN,GACD7rB,EAAGke,OAAOle,EAAGye,WAGjBze,EAAGwe,QAAQxe,EAAGme,OAGdne,EAAG0J,WAAW1J,EAAGsd,qBAAsBpuB,KAAKuZ,cAC5CzI,EAAG2e,aAAa3e,EAAG0L,UAAWxc,KAAKwX,QAAQzvB,OAAQ+oB,EAAGoC,eAAgB,GAEjEypB,GACD7rB,EAAGwe,QAAQxe,EAAGye,U,CAGtB,EAEQ,YAAA+F,YAAR,WAEI,IAAIxkB,EAAK9Q,KAAKmB,OAAO2P,GACjB3P,EAASnB,KAAKmB,OACdmyB,EAAU,SAACC,EAAQpN,GAGnB,GAFArV,EAAG0iB,aAAaD,EAAQpN,GACxBrV,EAAG2iB,cAAcF,IACZziB,EAAG4iB,mBAAmBH,EAAQziB,EAAG6iB,gBAAiB,CACnD,IAAI3lB,EAAM8C,EAAG8iB,iBAAiBL,GAE9B,OADApyB,EAAO2X,MAAM9K,GACN,I,CAEf,EAGI6lB,EAAiB/iB,EAAGgjB,aAAahjB,EAAGijB,iBACxCT,EAAQO,EAAgB,EAAAoD,cAGxB,IAAIjD,EAAeljB,EAAGgjB,aAAahjB,EAAGmjB,eACtCX,EAAQU,EAAc,EAAAkD,cAGtBl3B,KAAKy5B,QAAU3oB,EAAGqjB,gBAClBrjB,EAAGsjB,aAAap0B,KAAKy5B,QAASzF,GAC9BljB,EAAGsjB,aAAap0B,KAAKy5B,QAAS5F,GAC9B/iB,EAAGujB,YAAYr0B,KAAKy5B,SAEf3oB,EAAGwjB,oBAAoBt0B,KAAKy5B,QAAS3oB,EAAGyjB,cACzCpzB,EAAO2X,MAAM,4DAErB,EAs6BJ,EA/mDA,GAAa,EAAA8jB,eAAAA,C,4fCZb,aACA,aACA,aACA,aACA,Y,gJCDA,8BAkDA,QA5CkB,EAAAC,UAAd,SAAwBhsB,GACpBA,EAAOA,EAAKisB,cAEZ,IADA,IAAIC,EAAuB,CAACC,GACA,IAArBD,EAAUh1C,QAAc,CAC3B,IAAM3D,EAAO24C,EAAUzkB,QACvB,GAAIl0B,EAAKysB,KAAKisB,gBAAkBjsB,EAC5B,OAAOzsB,EAEPA,EAAK64C,UACL74C,EAAK64C,SAASvkC,SAAQ,SAACjS,GAAQs2C,EAAU54B,KAAK1d,EAAI,G,CAG1D,OAAO,IACX,EAEc,EAAA42B,eAAd,SAA6Bl6B,GAIzB,IAFA,IAAM+5C,EAAmB,GACrBH,EAAuB,CAACC,GACA,IAArBD,EAAUh1C,SACP3D,EAAO24C,EAAUzkB,SACd1U,KAAOzgB,GACZ+5C,EAAM/4B,KAAK/f,GAEXA,EAAK64C,UACL74C,EAAK64C,SAASvkC,SAAQ,SAACjS,GAAQs2C,EAAU54B,KAAK1d,EAAI,IAK1Ds2C,EAAYG,EAAM37B,QAElB,IADA,IAAM0I,EAAkC,CAAC,EACb,IAArB8yB,EAAUh1C,QAAc,CAC3B,IAAM3D,GACW,KADXA,EAAO24C,EAAUzkB,SACd5zB,MACLulB,EAAO7lB,EAAKwf,KAAM,GAElBxf,EAAK64C,UACL74C,EAAK64C,SAASvkC,SAAQ,SAACjS,GAAQs2C,EAAU54B,KAAK1d,EAAI,G,CAI1D,OAAOwjB,CACX,EACJ,EAlDA,GAAa,EAAAmT,QAAAA,EAoDb,IAAM4f,EAA8B,CAChCnsB,KAAM,aACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,aACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,yBACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,6BACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,gCAAiCjN,GAAI,IAAKlf,KAAK,GACvD,CACImsB,KAAM,4BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,0BAA2BjN,GAAI,KAAMlf,KAAK,GAClD,CAAEmsB,KAAM,YAAajN,GAAI,KAAMlf,KAAK,GACpC,CAAEmsB,KAAM,YAAajN,GAAI,KAAMlf,KAAK,GACpC,CAAEmsB,KAAM,aAAcjN,GAAI,KAAMlf,KAAK,GACrC,CAAEmsB,KAAM,UAAWjN,GAAI,KAAMlf,KAAK,GAClC,CAAEmsB,KAAM,eAAgBjN,GAAI,KAAMlf,KAAK,GACvC,CAAEmsB,KAAM,gBAAiBjN,GAAI,KAAMlf,KAAK,GACxC,CAAEmsB,KAAM,kBAAmBjN,GAAI,KAAMlf,KAAK,GAC1C,CAAEmsB,KAAM,YAAajN,GAAI,KAAMlf,KAAK,GACpC,CAAEmsB,KAAM,uBAAwBjN,GAAI,KAAMlf,KAAK,GAC/C,CAAEmsB,KAAM,gBAAiBjN,GAAI,KAAMlf,KAAK,GACxC,CAAEmsB,KAAM,mBAAoBjN,GAAI,KAAMlf,KAAK,GAC3C,CAAEmsB,KAAM,gBAAiBjN,GAAI,KAAMlf,KAAK,GACxC,CAAEmsB,KAAM,gBAAiBjN,GAAI,KAAMlf,KAAK,GACxC,CAAEmsB,KAAM,sBAAuBjN,GAAI,KAAMlf,KAAK,GAC9C,CAAEmsB,KAAM,uBAAwBjN,GAAI,KAAMlf,KAAK,GAC/C,CAAEmsB,KAAM,mBAAoBjN,GAAI,KAAMlf,KAAK,GAC3C,CAAEmsB,KAAM,qBAAsBjN,GAAI,KAAMlf,KAAK,GAC7C,CAAEmsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,GACzC,CAAEmsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,KAE9C,CACCmsB,KAAM,oBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,+BAAgCjN,GAAI,IAAKlf,KAAK,GACtD,CAAEmsB,KAAM,oBAAqBjN,GAAI,KAAMlf,KAAK,GAC5C,CAAEmsB,KAAM,YAAajN,GAAI,KAAMlf,KAAK,GACpC,CAAEmsB,KAAM,eAAgBjN,GAAI,KAAMlf,KAAK,GACvC,CAAEmsB,KAAM,WAAYjN,GAAI,KAAMlf,KAAK,GACnC,CAAEmsB,KAAM,+BAAgCjN,GAAI,KAAMlf,KAAK,GACvD,CAAEmsB,KAAM,yBAA0BjN,GAAI,KAAMlf,KAAK,GACjD,CAAEmsB,KAAM,sBAAuBjN,GAAI,KAAMlf,KAAK,GAC9C,CAAEmsB,KAAM,qBAAsBjN,GAAI,KAAMlf,KAAK,KAElD,CACCmsB,KAAM,iBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,GACzC,CAAEmsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,GACzC,CAAEmsB,KAAM,yBAA0BjN,GAAI,KAAMlf,KAAK,GACjD,CAAEmsB,KAAM,kBAAmBjN,GAAI,KAAMlf,KAAK,GAC1C,CAAEmsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,KAE9C,CACCmsB,KAAM,sBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,gBAAiBjN,GAAI,KAAMlf,KAAK,GACxC,CAAEmsB,KAAM,SAAUjN,GAAI,KAAMlf,KAAK,GACjC,CAAEmsB,KAAM,UAAWjN,GAAI,KAAMlf,KAAK,KAEvC,CACCmsB,KAAM,iBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,GACzC,CAAEmsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,GACzC,CAAEmsB,KAAM,yBAA0BjN,GAAI,KAAMlf,KAAK,GACjD,CAAEmsB,KAAM,kBAAmBjN,GAAI,KAAMlf,KAAK,KAE/C,CACCmsB,KAAM,uBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,UAAWjN,GAAI,KAAMlf,KAAK,GAClC,CAAEmsB,KAAM,+BAAgCjN,GAAI,KAAMlf,KAAK,KAE5D,CACCmsB,KAAM,kBACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,6BAA8BjN,GAAI,KAAMlf,KAAK,GACrD,CAAEmsB,KAAM,sBAAuBjN,GAAI,KAAMlf,KAAK,GAC9C,CAAEmsB,KAAM,mBAAoBjN,GAAI,KAAMlf,KAAK,GAC3C,CAAEmsB,KAAM,mBAAoBjN,GAAI,KAAMlf,KAAK,GAC3C,CAAEmsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,GACzC,CAAEmsB,KAAM,mBAAoBjN,GAAI,KAAMlf,KAAK,GAC3C,CAAEmsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,GACzC,CAAEmsB,KAAM,0BAA2BjN,GAAI,KAAMlf,KAAK,GAClD,CAAEmsB,KAAM,6BAA8BjN,GAAI,KAAMlf,KAAK,GACrD,CAAEmsB,KAAM,uBAAwBjN,GAAI,KAAMlf,KAAK,GAC/C,CAAEmsB,KAAM,UAAWjN,GAAI,KAAMlf,KAAK,GAClC,CAAEmsB,KAAM,kBAAmBjN,GAAI,KAAMlf,KAAK,GAC1C,CAAEmsB,KAAM,YAAajN,GAAI,KAAMlf,KAAK,KAEzC,CACCmsB,KAAM,yBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,GACzC,CAAEmsB,KAAM,kBAAmBjN,GAAI,KAAMlf,KAAK,GAC1C,CAAEmsB,KAAM,YAAajN,GAAI,KAAMlf,KAAK,OAIjD,CACCmsB,KAAM,gCACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,kCAAmCjN,GAAI,KAAMlf,KAAK,GAC1D,CAAEmsB,KAAM,cAAejN,GAAI,KAAMlf,KAAK,GACtC,CAAEmsB,KAAM,WAAYjN,GAAI,KAAMlf,KAAK,GACnC,CAAEmsB,KAAM,gBAAiBjN,GAAI,KAAMlf,KAAK,GACxC,CAAEmsB,KAAM,oBAAqBjN,GAAI,KAAMlf,KAAK,GAC5C,CAAEmsB,KAAM,YAAajN,GAAI,KAAMlf,KAAK,GACpC,CAAEmsB,KAAM,2BAA4BjN,GAAI,KAAMlf,KAAK,OAIhE,CACCmsB,KAAM,sBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,uBAAwBjN,GAAI,IAAKlf,KAAK,GAC9C,CACImsB,KAAM,cACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,wBAAyBjN,GAAI,IAAKlf,KAAK,KAC3D,CACCmsB,KAAM,wBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,oBAAqBjN,GAAI,IAAKlf,KAAK,GAC3C,CAAEmsB,KAAM,qBAAsBjN,GAAI,IAAKlf,KAAK,GAC5C,CAAEmsB,KAAM,YAAajN,GAAI,IAAKlf,KAAK,GACnC,CAAEmsB,KAAM,kBAAmBjN,GAAI,IAAKlf,KAAK,KAE9C,CAAEmsB,KAAM,yBAA0BjN,GAAI,IAAKlf,KAAK,GACnD,CAAEmsB,KAAM,wBAAyBjN,GAAI,IAAKlf,KAAK,GAC/C,CAAEmsB,KAAM,uBAAwBjN,GAAI,KAAMlf,KAAK,KAEpD,CACCmsB,KAAM,oBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,+BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,iBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,wBAAyBjN,GAAI,IAAKlf,KAAK,GAC/C,CAAEmsB,KAAM,wBAAyBjN,GAAI,IAAKlf,KAAK,KAEpD,CACCmsB,KAAM,oBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,yBAA0BjN,GAAI,KAAMlf,KAAK,KAC7D,CAAEmsB,KAAM,oBAAqBjN,GAAI,KAAMlf,KAAK,KAEpD,CACCmsB,KAAM,4BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,uBAAwBjN,GAAI,IAAKlf,KAAK,KAC1D,CAAEmsB,KAAM,oBAAqBjN,GAAI,KAAMlf,KAAK,KAEpD,CACCmsB,KAAM,qBACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,8BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,yBAA0BjN,GAAI,IAAKlf,KAAK,GAChD,CACImsB,KAAM,wBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,oBAAqBjN,GAAI,IAAKlf,KAAK,GAC3C,CAAEmsB,KAAM,qBAAsBjN,GAAI,IAAKlf,KAAK,GAC5C,CAAEmsB,KAAM,YAAajN,GAAI,IAAKlf,KAAK,GACnC,CAAEmsB,KAAM,kBAAmBjN,GAAI,IAAKlf,KAAK,OAItD,CAAEmsB,KAAM,aAAcjN,GAAI,IAAKlf,KAAK,GAAS,CAAEmsB,KAAM,UAAWjN,GAAI,IAAKlf,KAAK,GACjF,CACImsB,KAAM,UACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,sBAAuBjN,GAAI,KAAMlf,KAAK,KAE7D,CACImsB,KAAM,YACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,wBAAyBjN,GAAI,KAAMlf,KAAK,KAC5D,CAAEmsB,KAAM,iBAAkBjN,GAAI,IAAKlf,KAAK,GAC3C,CACImsB,KAAM,UACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,sBAAuBjN,GAAI,KAAMlf,KAAK,KAE7D,CACImsB,KAAM,YACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,wBAAyBjN,GAAI,KAAMlf,KAAK,KAC5D,CACCmsB,KAAM,WACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,uBAAwBjN,GAAI,KAAMlf,KAAK,KAC3D,CAAEmsB,KAAM,aAAcjN,GAAI,IAAKlf,KAAK,GAAS,CAAEmsB,KAAM,UAAWjN,GAAI,IAAKlf,KAAK,GACjF,CAAEmsB,KAAM,gBAAiBjN,GAAI,IAAKlf,KAAK,GAAS,CAAEmsB,KAAM,UAAWjN,GAAI,IAAKlf,KAAK,GACjF,CACImsB,KAAM,UACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,uBAAwBjN,GAAI,KAAMlf,KAAK,GAC/C,CAAEmsB,KAAM,sBAAuBjN,GAAI,KAAMlf,KAAK,KAEnD,CAAEmsB,KAAM,WAAYjN,GAAI,IAAKlf,KAAK,GAAS,CAAEmsB,KAAM,iBAAkBjN,GAAI,GAAIlf,KAAK,GACrF,CACImsB,KAAM,UACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,sBAAuBjN,GAAI,IAAKlf,KAAK,GAC7C,CAAEmsB,KAAM,uBAAwBjN,GAAI,KAAMlf,KAAK,KAEpD,CACCmsB,KAAM,YACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,wBAAyBjN,GAAI,KAAMlf,KAAK,KAC5D,CAAEmsB,KAAM,0BAA2BjN,GAAI,IAAKlf,KAAK,GACpD,CAAEmsB,KAAM,cAAejN,GAAI,IAAKlf,KAAK,GACrC,CAAEmsB,KAAM,aAAcjN,GAAI,KAAMlf,KAAK,GAAS,CAAEmsB,KAAM,mBAAoBjN,GAAI,KAAMlf,KAAK,KAE9F,CAAEmsB,KAAM,qBAAsBjN,GAAI,GAAIlf,KAAK,GAC9C,CACImsB,KAAM,uBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,eAAgBjN,GAAI,KAAMlf,KAAK,GACvC,CAAEmsB,KAAM,4BAA6BjN,GAAI,KAAMlf,KAAK,KAEzD,CAAEmsB,KAAM,sBAAuBjN,GAAI,IAAKlf,KAAK,GAChD,CAAEmsB,KAAM,oBAAqBjN,GAAI,IAAKlf,KAAK,GAC3C,CAAEmsB,KAAM,uBAAwBjN,GAAI,GAAIlf,KAAK,GAC7C,CAAEmsB,KAAM,sBAAuBjN,GAAI,IAAKlf,KAAK,GAC7C,CAAEmsB,KAAM,kBAAmBjN,GAAI,KAAMlf,KAAK,GAC1C,CAAEmsB,KAAM,uBAAwBjN,GAAI,KAAMlf,KAAK,KAEpD,CAAEmsB,KAAM,UAAWjN,GAAI,IAAKlf,KAAK,EAAMu4C,SAAU,CAAC,CAAEpsB,KAAM,sBAAuBjN,GAAI,IAAKlf,KAAK,KAClG,CAAEmsB,KAAM,WAAYjN,GAAI,IAAKlf,KAAK,GAAS,CACvCmsB,KAAM,wBACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,sBACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,4BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,mCAAoCjN,GAAI,IAAKlf,KAAK,KACtE,CACCmsB,KAAM,4BACNjN,GAAI,GACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,mCAAoCjN,GAAI,IAAKlf,KAAK,KACtE,CAAEmsB,KAAM,2BAA4BjN,GAAI,IAAKlf,KAAK,GACrD,CACImsB,KAAM,2BACNjN,GAAI,KACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,4BAA6BjN,GAAI,IAAKlf,KAAK,KAC/D,CACCmsB,KAAM,6BACNjN,GAAI,KACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,4BAA6BjN,GAAI,GAAIlf,KAAK,OAGtE,CACCmsB,KAAM,wBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,6BAA8BjN,GAAI,IAAKlf,KAAK,GACpD,CAAEmsB,KAAM,6BAA8BjN,GAAI,KAAMlf,KAAK,GACrD,CAAEmsB,KAAM,+BAAgCjN,GAAI,KAAMlf,KAAK,OAIpE,CACCmsB,KAAM,oBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,0BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,+BAAgCjN,GAAI,IAAKlf,KAAK,GACtD,CAAEmsB,KAAM,+BAAgCjN,GAAI,IAAKlf,KAAK,GACtD,CAAEmsB,KAAM,iCAAkCjN,GAAI,IAAKlf,KAAK,KAE7D,CACCmsB,KAAM,sBACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,2BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,kCAAmCjN,GAAI,IAAKlf,KAAK,KACrE,CACCmsB,KAAM,6BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,oCAAqCjN,GAAI,IAAKlf,KAAK,SAKvF,CAAEmsB,KAAM,gBAAiBjN,GAAI,IAAKlf,KAAK,GAAS,CAC/CmsB,KAAM,6BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,cAAejN,GAAI,IAAKlf,KAAK,GAAS,CAAEmsB,KAAM,oBAAqBjN,GAAI,IAAKlf,KAAK,GACzF,CAAEmsB,KAAM,UAAWjN,GAAI,IAAKlf,KAAK,GAAS,CAAEmsB,KAAM,WAAYjN,GAAI,IAAKlf,KAAK,KAEjF,CAAEmsB,KAAM,UAAWjN,GAAI,IAAKlf,KAAK,GAAS,CACzCmsB,KAAM,oBACNjN,GAAI,KACJlf,KAAK,EACLu4C,SAAU,CACN,CACIpsB,KAAM,6BACNjN,GAAI,IACJlf,KAAK,EACLu4C,SAAU,CACN,CAAEpsB,KAAM,cAAejN,GAAI,IAAKlf,KAAK,GACrC,CAAEmsB,KAAM,oBAAqBjN,GAAI,IAAKlf,KAAK,GAC3C,CAAEmsB,KAAM,UAAWjN,GAAI,IAAKlf,KAAK,GAAS,CAAEmsB,KAAM,WAAYjN,GAAI,IAAKlf,KAAK,KAEjF,CACCmsB,KAAM,qCACNjN,GAAI,KACJlf,KAAK,EACLu4C,SAAU,CAAC,CAAEpsB,KAAM,4BAA6BjN,GAAI,KAAMlf,KAAK,KAChE,CAAEmsB,KAAM,iBAAkBjN,GAAI,KAAMlf,KAAK,M,eCpc5D,IAAYy4C,E,uEAAAA,EAAA,EAAAA,cAAA,EAAAA,YAAW,KACnB,8BACA,gCACA,gDACA,iCACA,2BACA,2BACA,oDACA,2DACA,kCACA,+BACA,wDACA,mCACA,yCACA,2BACA,oDACA,+BACA,wDACA,6BACA,sDACA,iCACA,2BACA,uCACA,2BACA,8CACA,0BACA,sDACA,oDACA,6BACA,wCACA,2BACA,sDACA,mDACA,+BACA,wDACA,mDACA,uDACA,+CACA,iDACA,+BACA,2CACA,yDACA,qDACA,mCACA,uDACA,sDACA,+CACA,gDACA,qEACA,gDACA,+CACA,0DACA,+DACA,qDACA,qDACA,sCACA,gEACA,wDACA,gEACA,uEACA,+DACA,4DACA,gCACA,gCACA,kCACA,4BACA,sCACA,wCACA,4CACA,gCACA,sDACA,wCACA,8CACA,wCACA,wCACA,oDACA,sDACA,8CACA,kDACA,0CACA,0CACA,+CACA,gDACA,gCACA,sCACA,8BACA,sEACA,0DACA,oDACA,kDACA,yCACA,0CACA,0CACA,0DACA,4CACA,0CACA,mDACA,wCACA,0BACA,4BACA,yCACA,0CACA,0CACA,0DACA,4CACA,qDACA,4BACA,sEACA,0CACA,kEACA,oDACA,8CACA,8CACA,0CACA,8CACA,0CACA,4DACA,kEACA,sDACA,4BACA,4CACA,gCACA,yDACA,0CACA,4CACA,gCACA,uEACA,4EACA,oCACA,8BACA,wCACA,gDACA,gCACA,8DACA,4CACA,gDACA,sDACA,mDACA,+CACA,sDACA,kDACA,8DACA,+DACA,kEACA,8DACA,6DACA,uDACA,kEACA,iEACA,sEACA,+CACA,2DACA,qEACA,qEACA,yEACA,mDACA,6DACA,2EACA,iEACA,+EACA,2BACA,mDACA,uCACA,gDACA,iEACA,mCACA,+CACA,2BACA,6BACA,kFACA,gEACA,0CACA,2BACA,4B,wFCnLJ,cAMA,0BACY,KAAAC,QAAuB,KACvB,KAAAC,MAAkB,KAClB,KAAAC,UAAoB,EAEpB,KAAAC,UAAwC,SAACtmC,GAAQ,EACjD,KAAAumC,cAAgB,CAgW5B,QApVI,sBAAW,uBAAQ,C,IAAnB,WAC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","sources":["webpack://@xbim/viewer/webpack/universalModuleDefinition","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/common.js","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/mat2.js","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/mat2d.js","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/mat3.js","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/mat4.js","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/vec3.js","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/vec4.js","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/quat.js","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/quat2.js","webpack://@xbim/viewer/./node_modules/gl-matrix/esm/vec2.js","webpack://@xbim/viewer/./index.ts","webpack://@xbim/viewer/./src/bcf/bitmap.ts","webpack://@xbim/viewer/./src/bcf/clipping-plane.ts","webpack://@xbim/viewer/./src/bcf/coloring.ts","webpack://@xbim/viewer/./src/bcf/component.ts","webpack://@xbim/viewer/./src/bcf/components.ts","webpack://@xbim/viewer/./src/bcf/guid.ts","webpack://@xbim/viewer/./src/bcf/index.ts","webpack://@xbim/viewer/./src/bcf/line.ts","webpack://@xbim/viewer/./src/bcf/orthogonal-camera.ts","webpack://@xbim/viewer/./src/bcf/perspective-camera.ts","webpack://@xbim/viewer/./src/bcf/snapshot.ts","webpack://@xbim/viewer/./src/bcf/view-setup-hints.ts","webpack://@xbim/viewer/./src/bcf/viewpoint.ts","webpack://@xbim/viewer/./src/bcf/visibility.ts","webpack://@xbim/viewer/./src/camera.ts","webpack://@xbim/viewer/./src/common/abilities.ts","webpack://@xbim/viewer/./src/common/bbox.ts","webpack://@xbim/viewer/./src/common/checkResult.ts","webpack://@xbim/viewer/./src/common/fps-watch.ts","webpack://@xbim/viewer/./src/common/index.ts","webpack://@xbim/viewer/./src/common/message.ts","webpack://@xbim/viewer/./src/common/product-analytical-result.ts","webpack://@xbim/viewer/./src/common/product-identity.ts","webpack://@xbim/viewer/./src/common/product-map.ts","webpack://@xbim/viewer/./src/common/state.ts","webpack://@xbim/viewer/./src/common/vector-utils.ts","webpack://@xbim/viewer/./src/common/webgl-utils.ts","webpack://@xbim/viewer/./src/framebuffer.ts","webpack://@xbim/viewer/./src/index.ts","webpack://@xbim/viewer/./src/model-handle.ts","webpack://@xbim/viewer/./src/model-pointers.ts","webpack://@xbim/viewer/./src/navigation/animations.ts","webpack://@xbim/viewer/./src/navigation/camera-adjustment.ts","webpack://@xbim/viewer/./src/navigation/index.ts","webpack://@xbim/viewer/./src/navigation/keyboard-navigation.ts","webpack://@xbim/viewer/./src/navigation/mouse-navigation.ts","webpack://@xbim/viewer/./src/navigation/preflight-check.ts","webpack://@xbim/viewer/./src/navigation/touch-navigation.ts","webpack://@xbim/viewer/./src/performance-rating.ts","webpack://@xbim/viewer/./src/plugins/ClippingPlane/fshader.ts","webpack://@xbim/viewer/./src/plugins/ClippingPlane/interactive-clipping-plane.ts","webpack://@xbim/viewer/./src/plugins/ClippingPlane/vshader.ts","webpack://@xbim/viewer/./src/plugins/Grid/grid.ts","webpack://@xbim/viewer/./src/plugins/Grid/vshader.ts","webpack://@xbim/viewer/./src/plugins/LoaderOverlay/loader-overlay.ts","webpack://@xbim/viewer/./src/plugins/NavigationCube/cube_fshader.ts","webpack://@xbim/viewer/./src/plugins/NavigationCube/cube_vshader.ts","webpack://@xbim/viewer/./src/plugins/NavigationCube/navigation-cube-textures.ts","webpack://@xbim/viewer/./src/plugins/NavigationCube/navigation-cube.ts","webpack://@xbim/viewer/./src/plugins/index.ts","webpack://@xbim/viewer/./src/product-inheritance.ts","webpack://@xbim/viewer/./src/product-type.ts","webpack://@xbim/viewer/./src/reader/binary-reader.ts","webpack://@xbim/viewer/./src/reader/model-geometry.ts","webpack://@xbim/viewer/./src/reader/triangulated-shape.ts","webpack://@xbim/viewer/./src/section-box.ts","webpack://@xbim/viewer/./src/shaders/depth-reader.ts","webpack://@xbim/viewer/./src/shaders/depth_fragment_shader.ts","webpack://@xbim/viewer/./src/shaders/depth_vertex_shader.ts","webpack://@xbim/viewer/./src/shaders/fragment_shader.ts","webpack://@xbim/viewer/./src/shaders/fragment_shader_300.ts","webpack://@xbim/viewer/./src/shaders/vertex_shader.ts","webpack://@xbim/viewer/./src/shaders/vertex_shader_300.ts","webpack://@xbim/viewer/./src/viewer.ts","webpack://@xbim/viewer/./src/workers/worker.ts","webpack://@xbim/viewer/webpack/bootstrap","webpack://@xbim/viewer/webpack/runtime/define property getters","webpack://@xbim/viewer/webpack/runtime/hasOwnProperty shorthand","webpack://@xbim/viewer/webpack/runtime/make namespace object","webpack://@xbim/viewer/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 2x2 Matrix\n * @module mat2\n */\n\n/**\n * Creates a new identity mat2\n *\n * @returns {mat2} a new 2x2 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\n * Creates a new mat2 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat2} a matrix to clone\n * @returns {mat2} a new 2x2 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Copy the values from one mat2 to another\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the source matrix\n * @returns {mat2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set a mat2 to the identity matrix\n *\n * @param {mat2} out the receiving matrix\n * @returns {mat2} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Create a new mat2 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\n * @returns {mat2} out A new 2x2 matrix\n */\n\nexport function fromValues(m00, m01, m10, m11) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\n * Set the components of a mat2 to the given values\n *\n * @param {mat2} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\n * @returns {mat2} out\n */\n\nexport function set(out, m00, m01, m10, m11) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\n * Transpose the values of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the source matrix\n * @returns {mat2} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache\n  // some values\n  if (out === a) {\n    var a1 = a[1];\n    out[1] = a[2];\n    out[2] = a1;\n  } else {\n    out[0] = a[0];\n    out[1] = a[2];\n    out[2] = a[1];\n    out[3] = a[3];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the source matrix\n * @returns {mat2} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3]; // Calculate the determinant\n\n  var det = a0 * a3 - a2 * a1;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = a3 * det;\n  out[1] = -a1 * det;\n  out[2] = -a2 * det;\n  out[3] = a0 * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the source matrix\n * @returns {mat2} out\n */\n\nexport function adjoint(out, a) {\n  // Caching this value is nessecary if out == a\n  var a0 = a[0];\n  out[0] = a[3];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a0;\n  return out;\n}\n/**\n * Calculates the determinant of a mat2\n *\n * @param {ReadonlyMat2} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[2] * a[1];\n}\n/**\n * Multiplies two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the first operand\n * @param {ReadonlyMat2} b the second operand\n * @returns {mat2} out\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  return out;\n}\n/**\n * Rotates a mat2 by the given angle\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  return out;\n}\n/**\n * Scales the mat2 by the dimensions in the given vec2\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat2} out\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.rotate(dest, dest, rad);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.scale(dest, dest, vec);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat2} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  return out;\n}\n/**\n * Returns a string representation of a mat2\n *\n * @param {ReadonlyMat2} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat2\n *\n * @param {ReadonlyMat2} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3]);\n}\n/**\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\n * @param {ReadonlyMat2} L the lower triangular matrix\n * @param {ReadonlyMat2} D the diagonal matrix\n * @param {ReadonlyMat2} U the upper triangular matrix\n * @param {ReadonlyMat2} a the input matrix to factorize\n */\n\nexport function LDU(L, D, U, a) {\n  L[2] = a[2] / a[0];\n  U[0] = a[0];\n  U[1] = a[1];\n  U[3] = a[3] - L[2] * U[1];\n  return [L, D, U];\n}\n/**\n * Adds two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the first operand\n * @param {ReadonlyMat2} b the second operand\n * @returns {mat2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the first operand\n * @param {ReadonlyMat2} b the second operand\n * @returns {mat2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat2} a The first matrix.\n * @param {ReadonlyMat2} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat2} a The first matrix.\n * @param {ReadonlyMat2} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat2} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat2} out the receiving vector\n * @param {ReadonlyMat2} a the first operand\n * @param {ReadonlyMat2} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat2} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Alias for {@link mat2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat2.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 2x3 Matrix\n * @module mat2d\n * @description\n * A mat2d contains six elements defined as:\n * <pre>\n * [a, b,\n *  c, d,\n *  tx, ty]\n * </pre>\n * This is a short form for the 3x3 matrix:\n * <pre>\n * [a, b, 0,\n *  c, d, 0,\n *  tx, ty, 1]\n * </pre>\n * The last column is ignored so the array is shorter and operations are faster.\n */\n\n/**\n * Creates a new identity mat2d\n *\n * @returns {mat2d} a new 2x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(6);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[4] = 0;\n    out[5] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\n * Creates a new mat2d initialized with values from an existing matrix\n *\n * @param {ReadonlyMat2d} a matrix to clone\n * @returns {mat2d} a new 2x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\n * Copy the values from one mat2d to another\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the source matrix\n * @returns {mat2d} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\n * Set a mat2d to the identity matrix\n *\n * @param {mat2d} out the receiving matrix\n * @returns {mat2d} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * Create a new mat2d with the given values\n *\n * @param {Number} a Component A (index 0)\n * @param {Number} b Component B (index 1)\n * @param {Number} c Component C (index 2)\n * @param {Number} d Component D (index 3)\n * @param {Number} tx Component TX (index 4)\n * @param {Number} ty Component TY (index 5)\n * @returns {mat2d} A new mat2d\n */\n\nexport function fromValues(a, b, c, d, tx, ty) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\n * Set the components of a mat2d to the given values\n *\n * @param {mat2d} out the receiving matrix\n * @param {Number} a Component A (index 0)\n * @param {Number} b Component B (index 1)\n * @param {Number} c Component C (index 2)\n * @param {Number} d Component D (index 3)\n * @param {Number} tx Component TX (index 4)\n * @param {Number} ty Component TY (index 5)\n * @returns {mat2d} out\n */\n\nexport function set(out, a, b, c, d, tx, ty) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\n * Inverts a mat2d\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the source matrix\n * @returns {mat2d} out\n */\n\nexport function invert(out, a) {\n  var aa = a[0],\n      ab = a[1],\n      ac = a[2],\n      ad = a[3];\n  var atx = a[4],\n      aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n/**\n * Calculates the determinant of a mat2d\n *\n * @param {ReadonlyMat2d} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[1] * a[2];\n}\n/**\n * Multiplies two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the first operand\n * @param {ReadonlyMat2d} b the second operand\n * @returns {mat2d} out\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  out[4] = a0 * b4 + a2 * b5 + a4;\n  out[5] = a1 * b4 + a3 * b5 + a5;\n  return out;\n}\n/**\n * Rotates a mat2d by the given angle\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\n * Scales the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to translate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat2d} out\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\n * Translates the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to translate\n * @param {ReadonlyVec2} v the vec2 to translate the matrix by\n * @returns {mat2d} out\n **/\n\nexport function translate(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0;\n  out[1] = a1;\n  out[2] = a2;\n  out[3] = a3;\n  out[4] = a0 * v0 + a2 * v1 + a4;\n  out[5] = a1 * v0 + a3 * v1 + a5;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.rotate(dest, dest, rad);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.scale(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat2d} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.translate(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat2d} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = v[0];\n  out[5] = v[1];\n  return out;\n}\n/**\n * Returns a string representation of a mat2d\n *\n * @param {ReadonlyMat2d} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat2d(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat2d\n *\n * @param {ReadonlyMat2d} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], 1);\n}\n/**\n * Adds two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the first operand\n * @param {ReadonlyMat2d} b the second operand\n * @returns {mat2d} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the first operand\n * @param {ReadonlyMat2d} b the second operand\n * @returns {mat2d} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat2d} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  return out;\n}\n/**\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat2d} out the receiving vector\n * @param {ReadonlyMat2d} a the first operand\n * @param {ReadonlyMat2d} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat2d} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat2d} a The first matrix.\n * @param {ReadonlyMat2d} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat2d} a The first matrix.\n * @param {ReadonlyMat2d} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5));\n}\n/**\n * Alias for {@link mat2d.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat2d.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as quat from \"./quat.js\";\nimport * as mat4 from \"./mat4.js\";\n/**\n * Dual Quaternion<br>\n * Format: [real, dual]<br>\n * Quaternion format: XYZW<br>\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\n * @module quat2\n */\n\n/**\n * Creates a new identity dual quat\n *\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\n */\n\nexport function create() {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    dq[0] = 0;\n    dq[1] = 0;\n    dq[2] = 0;\n    dq[4] = 0;\n    dq[5] = 0;\n    dq[6] = 0;\n    dq[7] = 0;\n  }\n\n  dq[3] = 1;\n  return dq;\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat2} a dual quaternion to clone\n * @returns {quat2} new dual quaternion\n * @function\n */\n\nexport function clone(a) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = a[0];\n  dq[1] = a[1];\n  dq[2] = a[2];\n  dq[3] = a[3];\n  dq[4] = a[4];\n  dq[5] = a[5];\n  dq[6] = a[6];\n  dq[7] = a[7];\n  return dq;\n}\n/**\n * Creates a new dual quat initialized with the given values\n *\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component\n * @param {Number} y2 Y component\n * @param {Number} z2 Z component\n * @param {Number} w2 W component\n * @returns {quat2} new dual quaternion\n * @function\n */\n\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  dq[4] = x2;\n  dq[5] = y2;\n  dq[6] = z2;\n  dq[7] = w2;\n  return dq;\n}\n/**\n * Creates a new dual quat from the given values (quat and translation)\n *\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component (translation)\n * @param {Number} y2 Y component (translation)\n * @param {Number} z2 Z component (translation)\n * @returns {quat2} new dual quaternion\n * @function\n */\n\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  var ax = x2 * 0.5,\n      ay = y2 * 0.5,\n      az = z2 * 0.5;\n  dq[4] = ax * w1 + ay * z1 - az * y1;\n  dq[5] = ay * w1 + az * x1 - ax * z1;\n  dq[6] = az * w1 + ax * y1 - ay * x1;\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\n  return dq;\n}\n/**\n * Creates a dual quat from a quaternion and a translation\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyQuat} q a normalized quaternion\n * @param {ReadonlyVec3} t tranlation vector\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\n\nexport function fromRotationTranslation(out, q, t) {\n  var ax = t[0] * 0.5,\n      ay = t[1] * 0.5,\n      az = t[2] * 0.5,\n      bx = q[0],\n      by = q[1],\n      bz = q[2],\n      bw = q[3];\n  out[0] = bx;\n  out[1] = by;\n  out[2] = bz;\n  out[3] = bw;\n  out[4] = ax * bw + ay * bz - az * by;\n  out[5] = ay * bw + az * bx - ax * bz;\n  out[6] = az * bw + ax * by - ay * bx;\n  out[7] = -ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Creates a dual quat from a translation\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyVec3} t translation vector\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\n\nexport function fromTranslation(out, t) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = t[0] * 0.5;\n  out[5] = t[1] * 0.5;\n  out[6] = t[2] * 0.5;\n  out[7] = 0;\n  return out;\n}\n/**\n * Creates a dual quat from a quaternion\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyQuat} q the quaternion\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\n\nexport function fromRotation(out, q) {\n  out[0] = q[0];\n  out[1] = q[1];\n  out[2] = q[2];\n  out[3] = q[3];\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\n * Creates a new dual quat from a matrix (4x4)\n *\n * @param {quat2} out the dual quaternion\n * @param {ReadonlyMat4} a the matrix\n * @returns {quat2} dual quat receiving operation result\n * @function\n */\n\nexport function fromMat4(out, a) {\n  //TODO Optimize this\n  var outer = quat.create();\n  mat4.getRotation(outer, a);\n  var t = new glMatrix.ARRAY_TYPE(3);\n  mat4.getTranslation(t, a);\n  fromRotationTranslation(out, outer, t);\n  return out;\n}\n/**\n * Copy the values from one dual quat to another\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the source dual quaternion\n * @returns {quat2} out\n * @function\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\n * Set a dual quat to the identity dual quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @returns {quat2} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\n * Set the components of a dual quat to the given values\n *\n * @param {quat2} out the receiving quaternion\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component\n * @param {Number} y2 Y component\n * @param {Number} z2 Z component\n * @param {Number} w2 W component\n * @returns {quat2} out\n * @function\n */\n\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\n  out[0] = x1;\n  out[1] = y1;\n  out[2] = z1;\n  out[3] = w1;\n  out[4] = x2;\n  out[5] = y2;\n  out[6] = z2;\n  out[7] = w2;\n  return out;\n}\n/**\n * Gets the real part of a dual quat\n * @param  {quat} out real part\n * @param  {ReadonlyQuat2} a Dual Quaternion\n * @return {quat} real part\n */\n\nexport var getReal = quat.copy;\n/**\n * Gets the dual part of a dual quat\n * @param  {quat} out dual part\n * @param  {ReadonlyQuat2} a Dual Quaternion\n * @return {quat} dual part\n */\n\nexport function getDual(out, a) {\n  out[0] = a[4];\n  out[1] = a[5];\n  out[2] = a[6];\n  out[3] = a[7];\n  return out;\n}\n/**\n * Set the real component of a dual quat to the given quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat} q a quaternion representing the real part\n * @returns {quat2} out\n * @function\n */\n\nexport var setReal = quat.copy;\n/**\n * Set the dual component of a dual quat to the given quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat} q a quaternion representing the dual part\n * @returns {quat2} out\n * @function\n */\n\nexport function setDual(out, q) {\n  out[4] = q[0];\n  out[5] = q[1];\n  out[6] = q[2];\n  out[7] = q[3];\n  return out;\n}\n/**\n * Gets the translation of a normalized dual quat\n * @param  {vec3} out translation\n * @param  {ReadonlyQuat2} a Dual Quaternion to be decomposed\n * @return {vec3} translation\n */\n\nexport function getTranslation(out, a) {\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3];\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  return out;\n}\n/**\n * Translates a dual quat by the given vector\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {quat2} out\n */\n\nexport function translate(out, a, v) {\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3],\n      bx1 = v[0] * 0.5,\n      by1 = v[1] * 0.5,\n      bz1 = v[2] * 0.5,\n      ax2 = a[4],\n      ay2 = a[5],\n      az2 = a[6],\n      aw2 = a[7];\n  out[0] = ax1;\n  out[1] = ay1;\n  out[2] = az1;\n  out[3] = aw1;\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\n  return out;\n}\n/**\n * Rotates a dual quat around the X axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\n\nexport function rotateX(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateX(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\n * Rotates a dual quat around the Y axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\n\nexport function rotateY(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateY(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\n * Rotates a dual quat around the Z axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateZ(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\n * Rotates a dual quat by a given quaternion (a * q)\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {ReadonlyQuat} q quaternion to rotate by\n * @returns {quat2} out\n */\n\nexport function rotateByQuatAppend(out, a, q) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\n  ax = a[4];\n  ay = a[5];\n  az = a[6];\n  aw = a[7];\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\n  return out;\n}\n/**\n * Rotates a dual quat by a given quaternion (q * a)\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat} q quaternion to rotate by\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @returns {quat2} out\n */\n\nexport function rotateByQuatPrepend(out, q, a) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      bx = a[0],\n      by = a[1],\n      bz = a[2],\n      bw = a[3];\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\n  bx = a[4];\n  by = a[5];\n  bz = a[6];\n  bw = a[7];\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\n  return out;\n}\n/**\n * Rotates a dual quat around a given axis. Does the normalisation automatically\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @param {Number} rad how far the rotation should be\n * @returns {quat2} out\n */\n\nexport function rotateAroundAxis(out, a, axis, rad) {\n  //Special case for rad = 0\n  if (Math.abs(rad) < glMatrix.EPSILON) {\n    return copy(out, a);\n  }\n\n  var axisLength = Math.hypot(axis[0], axis[1], axis[2]);\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  var bx = s * axis[0] / axisLength;\n  var by = s * axis[1] / axisLength;\n  var bz = s * axis[2] / axisLength;\n  var bw = Math.cos(rad);\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3];\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Adds two dual quat's\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {quat2} out\n * @function\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  return out;\n}\n/**\n * Multiplies two dual quat's\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {quat2} out\n */\n\nexport function multiply(out, a, b) {\n  var ax0 = a[0],\n      ay0 = a[1],\n      az0 = a[2],\n      aw0 = a[3],\n      bx1 = b[4],\n      by1 = b[5],\n      bz1 = b[6],\n      bw1 = b[7],\n      ax1 = a[4],\n      ay1 = a[5],\n      az1 = a[6],\n      aw1 = a[7],\n      bx0 = b[0],\n      by0 = b[1],\n      bz0 = b[2],\n      bw0 = b[3];\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\n  return out;\n}\n/**\n * Alias for {@link quat2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a dual quat by a scalar number\n *\n * @param {quat2} out the receiving dual quat\n * @param {ReadonlyQuat2} a the dual quat to scale\n * @param {Number} b amount to scale the dual quat by\n * @returns {quat2} out\n * @function\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  return out;\n}\n/**\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\n *\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = quat.dot;\n/**\n * Performs a linear interpolation between two dual quats's\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\n *\n * @param {quat2} out the receiving dual quat\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var mt = 1 - t;\n  if (dot(a, b) < 0) t = -t;\n  out[0] = a[0] * mt + b[0] * t;\n  out[1] = a[1] * mt + b[1] * t;\n  out[2] = a[2] * mt + b[2] * t;\n  out[3] = a[3] * mt + b[3] * t;\n  out[4] = a[4] * mt + b[4] * t;\n  out[5] = a[5] * mt + b[5] * t;\n  out[6] = a[6] * mt + b[6] * t;\n  out[7] = a[7] * mt + b[7] * t;\n  return out;\n}\n/**\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a dual quat to calculate inverse of\n * @returns {quat2} out\n */\n\nexport function invert(out, a) {\n  var sqlen = squaredLength(a);\n  out[0] = -a[0] / sqlen;\n  out[1] = -a[1] / sqlen;\n  out[2] = -a[2] / sqlen;\n  out[3] = a[3] / sqlen;\n  out[4] = -a[4] / sqlen;\n  out[5] = -a[5] / sqlen;\n  out[6] = -a[6] / sqlen;\n  out[7] = a[7] / sqlen;\n  return out;\n}\n/**\n * Calculates the conjugate of a dual quat\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat2} a quat to calculate conjugate of\n * @returns {quat2} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  out[4] = -a[4];\n  out[5] = -a[5];\n  out[6] = -a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\n * Calculates the length of a dual quat\n *\n * @param {ReadonlyQuat2} a dual quat to calculate length of\n * @returns {Number} length of a\n * @function\n */\n\nexport var length = quat.length;\n/**\n * Alias for {@link quat2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a dual quat\n *\n * @param {ReadonlyQuat2} a dual quat to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = quat.squaredLength;\n/**\n * Alias for {@link quat2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a dual quat\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a dual quaternion to normalize\n * @returns {quat2} out\n * @function\n */\n\nexport function normalize(out, a) {\n  var magnitude = squaredLength(a);\n\n  if (magnitude > 0) {\n    magnitude = Math.sqrt(magnitude);\n    var a0 = a[0] / magnitude;\n    var a1 = a[1] / magnitude;\n    var a2 = a[2] / magnitude;\n    var a3 = a[3] / magnitude;\n    var b0 = a[4];\n    var b1 = a[5];\n    var b2 = a[6];\n    var b3 = a[7];\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\n  }\n\n  return out;\n}\n/**\n * Returns a string representation of a dual quatenion\n *\n * @param {ReadonlyQuat2} a dual quaternion to represent as a string\n * @returns {String} string representation of the dual quat\n */\n\nexport function str(a) {\n  return \"quat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \")\";\n}\n/**\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat2} a the first dual quaternion.\n * @param {ReadonlyQuat2} b the second dual quaternion.\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\n}\n/**\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat2} a the first dual quat.\n * @param {ReadonlyQuat2} b the second dual quat.\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\n}","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","\nexport * from './src/';\nexport * from './src/plugins';\nexport * from './src/bcf';\n\n","\n/**\n * @category BCF\n */\nexport class Bitmap {\n\n    /**\n     * format of the bitmap. Predefined values png or jpg\n     */\n    public bitmap_type: \"jpg\" | \"png\";\n\n    /**\n     * base64 encoded string \tThe bitmap image data\n     */\n    public bitmap_data: string;\n\n    /**\n     * location of the center of the bitmap in world coordinates (point)\n     */\n    public location: number[];\n\n    /**\n     * normal vector of the bitmap (vector)\n     */\n    public normal: number[];\n\n    /**\n     * up vector of the bitmap (vector)\n     */\n    public up: number[];\n\n    /**\n     * height of bitmap in the scene\n     */\n    public height: number;\n}\n","\n/**\n * @category BCF\n */\nexport class ClippingPlane {\n    /**\n     * [Point] Origin of the clipping plane \n     */\n    public location: number[];\n\n    /**\n     * [Direction] \tdirection of the clipping plane\n     */\n    public direction: number[];\n}","import { Component } from \"./component\";\n\n\n/**\n * @category BCF\n */\nexport class Coloring {\n    /**\n     *  Color of the components\n     */\n    public color: string;\n\n    /**\n     * Colored components\n     */\n    public components: Component[];\n}","\n/**\n * @category BCF\n */\nexport class Component {\n    /**\n     * IFC guid of the component\n     */\n    public ifc_guid: string;\n\n    /**\n     * originating system of the component\n     */\n    public originating_system: string;\n\n    /**\n     * internal id for the authoring tool of the component\n     */\n    public authoring_tool_id: string;\n\n    /**\n     *\n     */\n    constructor(guid: string) {\n        this.ifc_guid = guid;\n        this.originating_system = \"xBIM\";\n        this.authoring_tool_id = \"WebUI\";\n    }\n}","import { Component } from \"./component\";\nimport { Coloring } from \"./coloring\";\nimport { Visibility } from \"./visibility\";\n\n\n/**\n * @category BCF\n */\nexport class Components {\n    /**\n     * Selected components\n     */\n    public selection: Component[];\n\n    /**\n     * Colored components\n     */\n    public coloring: Coloring[];\n\n    /**\n     * Visibility of components\n     */\n    public visibility: Visibility;\n}","export class Guid {\n    public static new(): string {\n        // implementation taken from https://gist.github.com/jed/982883 (MIT license)\n        let template = \"10000000-1000-4000-8000-100000000000\";\n        let replacer = (s: string): string => {\n            let a = parseInt(s, 10);\n            // tslint:disable-next-line: no-bitwise\n            return (a ^ Math.random() * 16 >> a / 4).toString(16);\n        };\n        return template.replace(/[018]/g, replacer);\n    }\n}","export * from './bitmap';\nexport * from './clipping-plane';\nexport * from './coloring';\nexport * from './component';\nexport * from './components';\nexport * from './line';\nexport * from './orthogonal-camera';\nexport * from './perspective-camera';\nexport * from './snapshot';\nexport * from './view-setup-hints';\nexport * from './viewpoint';\nexport * from './visibility';\n\n","\n/**\n * @category BCF\n */\nexport class Line {\n    /**\n     * start point of the line\n     */\n    public start_point: number[];\n\n    /**\n     * end point of the line (Treated as point if start_point and end_point is the same\n     */\n    public end_point: number[];\n}","\n\n/**\n * @category BCF\n */\nexport class OrthogonalCamera {\n    /**\n     * viewpoint of the camera\n     */\n    public camera_view_point: number[];\n\n    /**\n     * direction of the camera\n     */\n    public camera_direction: number[];\n\n    /**\n     * direction of camera up\n     */\n    public camera_up_vector: number[];\n\n    /**\n     * proportion of camera view to model\n     */\n    public view_to_world_scale: number;\n\n    /**\n     * Extension to BCF: Width of the viewport in the model space\n     */\n    public width: number;\n\n    /**\n     * Extension to BCF: Height of the viewport in the model space\n     */\n    public height: number;\n}","\n/**\n * @category BCF\n */\nexport class PerspectiveCamera {\n    /**\n     * viewpoint of the camera \n     */\n    public camera_view_point: number[];\n\n    /**\n     * direction of the camera\n     */\n    public camera_direction: number[];\n\n    /**\n     * direction of camera up\n     */\n    public camera_up_vector: number[];\n\n    /**\n     * field of view\n     */\n    public field_of_view: number;\n\n    /**\n     * Extension to BCF: Width of the viewport in the model space\n     */\n    public width: number;\n\n    /**\n     * Extension to BCF: Height of the viewport in the model space\n     */\n    public height: number;\n}","\n/**\n * @category BCF\n */\nexport class Snapshot {\n    /**\n     * Format of the snapshot\n     */\n    public snapshot_type: \"png\" | \"jpg\";\n\n    /**\n     * Base64 encoded snapshot image data\n     */\n    public snapshot_data: string;\n}","\n/**\n * @category BCF\n */\nexport class ViewSetupHints {\n    /**\n     * Visibility of spaces\n     */\n    public spaces_visible: boolean;\n\n    /**\n     * Visibility of space boundaries\n     */\n    public space_boundaries_visible: boolean;\n\n    /**\n     * Visibility of openings\n     */\n    public openings_visible: boolean;\n}","import { Guid } from \"./guid\";\nimport { Snapshot } from \"./snapshot\";\nimport { Bitmap } from \"./bitmap\";\nimport { ClippingPlane } from \"./clipping-plane\";\nimport { Line } from \"./line\";\nimport { PerspectiveCamera } from \"./perspective-camera\";\nimport { OrthogonalCamera } from \"./orthogonal-camera\";\nimport { Components } from \"./components\";\nimport { RenderingMode, ViewType, Viewer } from \"../viewer\";\nimport { vec3, mat4 } from \"gl-matrix\";\nimport { CameraType } from \"../camera\";\nimport { State } from \"../common/state\";\nimport { Visibility } from \"./visibility\";\nimport { Component } from \"./component\";\n\n\n/**\n * Class representing a BCF viewpoint\n * \n * A Viewpoint can capture and restore the state of the viewer's current state using\n * buildingSmart BCF-API schema\n * \n * @category BCF\n */\nexport class Viewpoint {\n\n    /**\n     * Static index used for autoincrement of viewpoints created in this session\n     */\n    private static _currentIndex: number = 0;\n\n    /**\n     * Index used for sorting of multiple viewpoints. (Autoincremented)\n     */\n    public index: number = ++Viewpoint._currentIndex;\n\n    /**\n     * Unique ID of the viewpoint. (Automatically created by default)\n     */\n    public guid: string = Guid.new();\n\n    /**\n     * This element describes a viewpoint using orthogonal camera.\n     */\n    public orthogonal_camera: OrthogonalCamera;\n\n    /**\n     * This element describes a viewpoint using perspective camera.\n     */\n    public perspective_camera: PerspectiveCamera;\n\n    /**\n     * Lines can be used to add markup in 3D. Each line is defined by three dimensional \n     * Start Point and End Point. Lines that have the same start and end points are to be \n     * considered points and may be displayed accordingly.\n     */\n    public lines: Line[];\n\n    /**\n     * ClippingPlanes can be used to define a subsection of a building model that is related to the topic. \n     * Each clipping plane is defined by Location and Direction.\n     */\n    public clipping_planes: ClippingPlane[];\n\n    /**\n     * A list of bitmaps can be used to add more information, \n     * for example, text in the visualization.\n     * Bitmaps would be placed in the 3D view\n     */\n    public bitmaps: Bitmap[];\n\n    /**\n     * Image snapshot of the view\n     */\n    public snapshot: Snapshot;\n\n    /**\n     * Components in the viewpoint\n     */\n    public components: Components;\n\n\n    /**\n     * Creates BCF viewpoint from the current view\n     * \n     * @param viewer viewer instance\n     * @param idMapper function to be used to transform viewer identity into external identity. Typically to GUID. Viewer operates on local identity where combination of productID and modelID is unique within the current scope.\n     * @param width  Optional width of the generated thumbnail in pixels. This is the current width of the viewer by default. Current aspect ratio is preserved.\n     */\n    public static GetViewpoint(viewer: Viewer, idMapper: (productId: number, modelId: number) => string, width = viewer.width / 2.0): Viewpoint {\n        const view = new Viewpoint();\n        const aspect = viewer.width / viewer.height;\n        const height = width / aspect;\n\n        const toArray = (a: vec3) => {\n            return Array.prototype.slice.call(a);\n        };\n\n        // capture camera\n        if (viewer.camera === CameraType.PERSPECTIVE) {\n            view.perspective_camera = {\n                camera_direction: toArray(viewer.getCameraDirection()),\n                camera_up_vector: toArray(viewer.getCameraHeading()),\n                camera_view_point: toArray(viewer.getCameraPositionWcs()),\n                field_of_view: viewer.cameraProperties.fov,\n                height: viewer.cameraProperties.height,\n                width: viewer.cameraProperties.height * aspect\n            };\n        } else {\n            // width of view in meters\n            const modelHeight = viewer.cameraProperties.height / viewer.unitsInMeter;\n            const viewportHeight = viewer.height / Viewpoint.resolution;\n            view.orthogonal_camera = {\n                camera_direction: toArray(viewer.getCameraDirection()),\n                camera_up_vector: toArray(viewer.getCameraHeading()),\n                camera_view_point: toArray(viewer.getCameraPositionWcs()),\n                view_to_world_scale: viewportHeight / modelHeight,\n                height: viewer.cameraProperties.height,\n                width: viewer.cameraProperties.height * aspect\n            }\n        }\n\n        // capture image (good for preview for example)\n        const dataUrl = viewer.getCurrentImageDataUrl(width, height, 'png');\n        // strip 'data:image/jpeg;base64,' from the data url\n        const base64image = dataUrl.substring(22);\n\n        view.snapshot = {\n            snapshot_type: 'png',\n            snapshot_data: base64image\n        };\n\n        // capture current clipping planes: We may have different clipping planes for different submodels\n        const planes = viewer.getClip();\n        if (planes != null) {\n            Viewpoint.AddClippingPlane(view, planes.PlaneA);\n            Viewpoint.AddClippingPlane(view, planes.PlaneB);\n        }\n\n        // TODO: capture section box\n\n        // capture component styling (selection, overriden colours, visibility etc.) We should use IFC guids for this which is not in the scope of the viewer\n        const highlighted = viewer.getProductsWithState(State.HIGHLIGHTED);\n        if (highlighted != null && highlighted.length > 0) {\n            if (idMapper == null) {\n                console.warn('ID mapping function should be used to persist global identity of selected elements');\n                idMapper = (id, model) => `${model}_${id}`;\n            }\n            if (view.components == null) {\n                view.components = new Components();\n                view.components.coloring = [];\n                view.components.selection = [];\n                view.components.visibility = new Visibility();\n            }\n            const selection = view.components.selection;\n            highlighted.forEach(s => {\n                const guid = idMapper(s.id, s.model);\n                selection.push(new Component(guid));\n            });\n        }\n\n        return view;\n    }\n\n    private static AddClippingPlane(view: Viewpoint, planeEquation: number[]): void {\n        if (planeEquation == null || planeEquation.length !== 4) {\n            return;\n        }\n        if (view.clipping_planes == null) {\n            view.clipping_planes = [];\n        }\n        const plane = new ClippingPlane();\n        plane.direction = planeEquation.slice(0, 3);\n\n        const p = planeEquation;\n        const x = -p[0] * p[3] / (p[0] * p[0] + p[1] * p[1] + p[2] * p[2])\n        const y = -p[1] * p[3] / (p[0] * p[0] + p[1] * p[1] + p[2] * p[2])\n        const z = -p[2] * p[3] / (p[0] * p[0] + p[1] * p[1] + p[2] * p[2])\n        plane.location = [x, y, z];\n\n        view.clipping_planes.push(plane);\n    }\n\n    public static SetViewpoint(viewer: Viewer, viewpoint: Viewpoint, idMapper: (guid: string) => { productId: number, modelId: number }, duration: number = 0): void {\n        // threashold for distance and size of the view\n        const threasholdCoeficient = 4.0;\n\n        // helper function\n        const toVec3 = (a: number[] | Float32Array) => {\n            if (a == null || a.length < 3) {\n                return null;\n            }\n            return vec3.fromValues(a[0], a[1], a[2]);\n        };\n\n        // we have to consider current WCS for navigation\n        const wcs = viewer.getCurrentWcs();\n        const aspect = viewer.width / viewer.height;\n\n        // discard any current clipping, set new clipping.\n        // this might affect current region size and position\n        // which has effect on camera adjustments later in the code\n        Viewpoint.SetClipping(viewer, viewpoint);\n\n        // common camera properties to be used for camera position\n        const camera: {\n            camera_view_point: number[],\n            camera_direction: number[],\n            camera_up_vector: number[],\n            width: number,\n            height: number\n        } = viewpoint.perspective_camera || viewpoint.orthogonal_camera;\n\n        if (camera != null) {\n\n            let camViewPoint = camera.camera_view_point;\n            let camDir = camera.camera_direction;\n            let camUpDir = camera.camera_up_vector;\n\n            const eyeWcs = toVec3(camViewPoint);\n            let eye = vec3.subtract(vec3.create(), eyeWcs, wcs);\n            const dir = vec3.normalize(vec3.create(), toVec3(camDir));\n            let up = vec3.normalize(vec3.create(), (toVec3(camUpDir) || vec3.fromValues(0, 0, 1)));\n\n            // target and heading are collinear. This is a singular orientation and will screw the view up.\n            let angle = vec3.angle(dir, up);\n            if (Math.abs(angle) < 1e-6 || Math.abs(angle - Math.PI) < 1e-6) {\n                console.warn('Collinear target and heading vectors for the view. Singularity will be fixed by guess.');\n\n                // looking up or down is most likely scenario for singularity\n                angle = vec3.angle(dir, vec3.fromValues(0, 0, 1));\n                if (Math.abs(angle) < 1e-6 || Math.abs(angle - Math.PI) < 1e-6) {\n                    up = vec3.fromValues(0, 1, 0);\n                }\n            }\n\n            // helper function\n            let isPositiveNumber = (v: number) => {\n                return v != null && typeof (v) === 'number' && v > 0;\n            };\n\n            // set camera type and properties\n            let orthCamHeight = camera.height || 100;\n\n            // region sizes from the viewpoint direction\n            const region = viewer.getMergedRegion();\n            const optimum = (region && region.bbox && region.population > 0) ?\n                viewer.getDistanceAndHeight(region.bbox, dir, up) :\n                null;\n\n            // move the eye to optimal dostance if the current distance is too much\n            if (optimum != null) {\n                const distance = vec3.dist(toVec3(region.centre), eye);\n\n                // we are too far away, move to optimal distance, set optimal height for orthographic view\n                if (distance > optimum.distance * threasholdCoeficient) {\n                    const moveDir = vec3.negate(vec3.create(), dir);\n                    const move = vec3.scale(vec3.create(), moveDir, optimum.distance);\n                    eye = vec3.add(vec3.create(), toVec3(region.centre), move);\n                    orthCamHeight = optimum.height;\n                }\n            }\n\n            if (viewpoint.perspective_camera) {\n                viewer.camera = CameraType.PERSPECTIVE;\n                let fov = 60.0; // default value\n                if (isPositiveNumber(viewpoint.perspective_camera.field_of_view)) {\n                    fov = viewpoint.perspective_camera.field_of_view;\n                }\n\n                if (isPositiveNumber(camera.width) && isPositiveNumber(camera.height)) {\n                    // camera properties fom the data of the maximal values\n                    const a = camera.width / camera.height;\n\n                    // fix to fit the screen (aspect ratio)\n                    if (a > aspect) {\n                        const current = fov * Math.PI / 180.0;\n                        // FOV is non-linear in relation to aspect ratio but can be calculated like this\n                        const extended = 2.0 * Math.atan(Math.tan(current / 2.0) * a / aspect);\n                        fov = extended * 180.0 / Math.PI;\n                    }\n                }\n                viewer.cameraProperties.fov = fov;\n            }\n            else if (viewpoint.orthogonal_camera) {\n                viewer.camera = CameraType.ORTHOGONAL;\n                // set default FOV\n                viewer.cameraProperties.fov = 60.0;\n\n                if (isPositiveNumber(viewpoint.orthogonal_camera.view_to_world_scale)) {\n                    const scale = viewpoint.orthogonal_camera.view_to_world_scale;\n                    const viewportHeight = viewer.height / Viewpoint.resolution;\n                    const modelHeight = viewportHeight / scale;\n                    orthCamHeight = modelHeight * viewer.unitsInMeter;\n                }\n\n                // use width and height if available to set perspective and adjust ratio\n                if (isPositiveNumber(camera.width) && isPositiveNumber(camera.height)) {\n                    // camera properties fom the data of the maximal values\n                    let h = camera.height;\n                    const w = camera.width;\n                    const a = w / h;\n\n                    // fix to fit the screen (aspect ratio)\n                    if (a > aspect) {\n                        // adjust perspective camera height\n                        h = h * a / aspect;\n                    }\n\n                    // set to optimal view if it seems to be too far away\n                    if (optimum != null && h > optimum.height * threasholdCoeficient) {\n                        h = optimum.height;\n                    }\n\n                    orthCamHeight = h;\n                }\n            }\n\n            // set camera (MV matrix)\n            const target = vec3.add(vec3.create(), eye, dir);\n            const mv = mat4.lookAt(mat4.create(), eye, target, up);\n            viewer.animations.viewTo({ mv: mv, height: orthCamHeight }, duration)\n                .then(() => {\n\n                    // try to fix camera placement for generic orthographic views or camera height for perspective views\n                    // this improves interactive navigation and smooth switching between cameras\n                    // don't do anything if this is a plan view\n                    var delta = vec3.angle(toVec3(camera.camera_direction), vec3.fromValues(0, 0, -1));\n                    if (delta < Math.PI / 180.0)\n                        return;\n                    viewer.adjustments.adjust(10);\n                });\n        }\n\n        // clear current selection\n        viewer.clearHighlighting();\n\n        // restore selection\n        if (viewpoint.components != null && viewpoint.components.selection != null && viewpoint.components.selection.length > 0) {\n            const selection = viewpoint.components.selection;\n\n            // transform from global IDs to local ones\n            if (idMapper == null) {\n                console.warn('No function defined to map between global IDs and local product and model IDs');\n                idMapper = (id: string) => {\n                    const parts = id.split('_');\n                    const modelId = parseInt(parts[0], 10);\n                    const productId = parseInt(parts[1], 10);\n                    return { productId, modelId };\n                }\n            }\n            const productsByModel: { [id: number]: number[] } = {};\n            const zoomGroup: {id: number, model: number}[] = [];\n            selection\n                .map(c => idMapper(c.ifc_guid))\n                .forEach(map => {\n                    const products = productsByModel[map.modelId] || (productsByModel[map.modelId] = []);\n                    products.push(map.productId);\n                    zoomGroup.push({id: map.productId, model: map.modelId});\n                });\n            Object.getOwnPropertyNames(productsByModel).forEach(mId => {\n                viewer.addState(State.HIGHLIGHTED, productsByModel[mId], parseInt(mId, 10));\n            });\n\n            // if no camera is defined, but there is a selection defined, we shall zoom to selection\n            if (camera == null) {\n                viewer.renderingMode = RenderingMode.XRAY_ULTRA;\n                viewer.show(ViewType.DEFAULT, undefined, undefined, duration > 0).then(() => {\n                    viewer.zoomTo(zoomGroup, undefined, duration > 0, false);\n                });\n            }\n        }\n    }\n\n    /**\n     * Applies the clipping planes for this viewpoint to the supplied viewer\n     * @param viewer \n     * @param viewpoint \n     */\n    public static SetClipping(viewer: Viewer, viewpoint: Viewpoint) {\n\n        // reset to no clipping and no section box as a default\n        viewer.unclip();\n        viewer.sectionBox.setToInfinity();\n\n        // no clipping instructions, return\n        if (viewpoint.clipping_planes == null || viewpoint.clipping_planes.length === 0) {\n            return;\n        }\n\n        // restore as a section box\n        if (viewpoint.clipping_planes.length === 6) {\n            viewer.sectionBox.setToPlanes(viewpoint.clipping_planes);\n            return;\n        }\n\n        // restore first two clipping planes (we can't handle more separately)\n        const planeA = Viewpoint.getClippingEquation(viewpoint.clipping_planes[0]);\n        const planeB = Viewpoint.getClippingEquation(viewpoint.clipping_planes[1]);\n\n        if (planeA != null) {\n            viewer.setClippingPlaneA(planeA);\n        }\n        if (planeB != null) {\n            viewer.setClippingPlaneB(planeB);\n        }\n    }\n\n    private static getClippingEquation(plane: ClippingPlane): number[] {\n        if (plane == null || plane.direction == null || plane.location == null) {\n            return null;\n        }\n\n        const normal = plane.direction;\n        const point = plane.location;\n        //compute normal equation of the plane\n        var d = 0.0 - normal[0] * point[0] - normal[1] * point[1] - normal[2] * point[2];\n\n        return [normal[0], normal[1], normal[2], d];\n    }\n\n    // static cache for resolution - it can't change for the device\n    private static _resolution: number = null;\n\n    /**\n     * Number of pixels per meter in the browser\n     */\n    private static get resolution(): number {\n        if (Viewpoint._resolution != null) {\n            return Viewpoint._resolution;\n        }\n\n        var e = document.createElement(\"div\");\n        e.style.position = \"absolute\";\n        e.style.width = \"100mm\";\n        document.body.appendChild(e);\n        var rect = e.getBoundingClientRect();\n        document.body.removeChild(e);\n        Viewpoint._resolution = rect.width / 0.1;\n        return Viewpoint._resolution;\n    }\n}\n","import { Component } from \"./component\";\nimport { ViewSetupHints } from \"./view-setup-hints\";\n\n\n/**\n * @category BCF\n */\nexport class Visibility {\n    /**\n     * If true: Show all components, and hide the exceptions. If false: Hide all components and show exceptions;\n     */\n    public default_visibility: boolean = false;\n\n    /**\n     * Components to hide/show determined by default_visibility\n     */\n    public exceptions: Component[];\n\n    /**\n     * Hints about the setup of the viewer\n     */\n    public view_setup_hints: ViewSetupHints;\n}","import { mat4 } from \"gl-matrix\";\n\n/**\n * @category Core\n */\nexport class CameraProperties {\n\n    /**\n     * \n     */\n    constructor(changeHandler: () => void) {\n        this.onChange = changeHandler || (() => { return; });\n    }\n\n    private _fov = 45;\n    private _near: number;\n    private _far: number;\n    private _height: number;\n    private _type: CameraType = CameraType.PERSPECTIVE;\n\n    public get fov(): number { return this._fov; }\n    public set fov( value: number) { \n        if (value == null || value <= 0 || value > 180)\n            throw new Error('Perspective field of view has to be a positive number between 0 and 180 degrees');\n        this._fov = value; \n        if (this.onChange && this.type === CameraType.PERSPECTIVE) { this.onChange(); }\n    }\n\n    public get near(): number { return this._near; }\n    public set near( value: number) { this._near = value; if (this.onChange) { this.onChange(); }}\n\n    public get far(): number { return this._far; }\n    public set far( value: number) { this._far = value; if (this.onChange) { this.onChange(); }}\n\n    public get height(): number { return this._height; }\n    public set height( value: number) { \n        if (value == null || value <= 0)\n            throw new Error('Orthographic view height has to be a positive number');\n        this._height = value; \n        if (this.onChange  && this.type === CameraType.ORTHOGONAL) { this.onChange(); }\n    }\n\n    public get type(): CameraType {return this._type; }\n    public set type(value: CameraType) { this._type = value; if (this.onChange) { this.onChange(); }}\n\n    public onChange = () => { return; };\n\n    public getProjectionMatrix(width: number, height: number): mat4 {\n        const aspect = width / height;\n        //set up cameras\n        switch (this.type) {\n            case CameraType.PERSPECTIVE:\n                return mat4.perspective(mat4.create(),\n                    this.fov * Math.PI / 180.0,\n                    aspect,\n                    this.near,\n                    this.far);\n            case CameraType.ORTHOGONAL:\n                const h = this.height;\n                const w = h * aspect;\n                return mat4.ortho(mat4.create(), w / -2, w / 2, h / -2, h / 2,\n                    this.near,\n                    this.far);\n            default:\n                throw new Error('Undefined camera type');\n        }\n    }\n}\n\n/**\n * @category Core\n */\nexport enum CameraType {\n    PERSPECTIVE = 0,\n    ORTHOGONAL = 1\n}\n","import { WebGLUtils } from \"./webgl-utils\";\nimport { CheckResult } from \"./checkResult\";\n\nexport class Abilities {\n    public static check(): CheckResult {\n\n        var result = new CheckResult();\n\n        //check WebGL support\n        var canvas = document.createElement('canvas');\n        if (!canvas) {\n            result.errors.push(\"Browser doesn't have support for HTMLCanvasElement. This is critical.\");\n        } else {\n            let gl: WebGLRenderingContext = null;\n            let glVersion = 0;\n            WebGLUtils.setupWebGL(canvas, (ctx, v) => {\n                gl = ctx;\n                glVersion = v;\n            }, null, (err) => {\n                result.errors.push(err);\n            });\n            if (gl == null) {\n                result.errors.push(\"Browser doesn't support WebGL. This is critical.\");\n            } else {\n                //check floating point extension availability for WebGL 1.0\n                var fpt = glVersion < 2 ? (\n                    gl.getExtension('OES_texture_float') ||\n                    gl.getExtension('MOZ_OES_texture_float') ||\n                    gl.getExtension('WEBKIT_OES_texture_float')\n                ) : true;\n\n                if (!fpt) {\n                    result.errors.push('Floating point texture extension is not supported.');\n                }\n\n                const dte = glVersion < 2 ? (\n                    gl.getExtension('WEBGL_depth_texture') ||\n                    gl.getExtension('WEBKIT_WEBGL_depth_texture') ||\n                    gl.getExtension('MOZ_WEBGL_depth_texture')\n                ) : true;\n\n                if (!dte) {\n                    result.warnings.push(\"Depth texture extension is not available. It will not be possible to get 3D coordinates of user interactions.\");\n                }\n\n                //check number of supported vertex shader textures. Minimum is 5 but standard requires 0.\n                var vertTextUnits = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);\n                if (vertTextUnits < 4) {\n\n                    result.errors.push('Browser supports only ' +\n                        vertTextUnits +\n                        ' vertex texture image units but minimal requirement for the viewer is 4.');\n                }\n            }\n        }\n\n        //check FileReader and Blob support\n        if (!window['File'] ||\n            !window['FileReader'] ||\n            !window.Blob) {\n            result.errors.push(\"Browser doesn't support 'File', 'FileReader' or 'Blob' objects.\");\n        }\n\n\n        //check for typed arrays\n        if (!window['Int32Array'] || !window['Float32Array']) {\n            result.errors\n                .push(\"Browser doesn't support TypedArrays. These are crucial for binary parsing and for comunication with GPU.\");\n        }\n        //set boolean members for convenience\n        if (result.errors.length == 0) {\n            result.noErrors = true;\n        }\n        if (result.warnings.length == 0) { result.noWarnings = true; }\n        return result;\n    }\n}","import { vec3, mat4 } from \"gl-matrix\";\n\n/**\n * Static helper functions for bounding boxes\n */\nexport class BBox {\n    public static centre(a: ArrayLike<number>): number[] {\n        return [a[0] + a[3] / 2.0, a[1] + a[4] / 2.0, a[2] + a[5] / 2.0];\n    }\n\n\n    public static union(a: ArrayLike<number>, b: ArrayLike<number>): number[]{\n        if (b == null && a == null) return null;\n        if (b == null && a != null) return <number[]>a; \n        if (b != null && a == null) return <number[]>b; \n        const minA = [a[0], a[1], a[2]];\n        const minB = [b[0], b[1], b[2]];\n        const maxA = [a[0] + a[3], a[1] + a[4], a[2] + a[5]];\n        const maxB = [b[0] + b[3], b[1] + b[4], b[2] + b[5]];\n\n        const min = [Math.min(minA[0], minB[0]), Math.min(minA[1], minB[1]), Math.min(minA[2], minB[2])];\n        const max = [Math.max(maxA[0], maxB[0]), Math.max(maxA[1], maxB[1]), Math.max(maxA[2], maxB[2])];\n\n        return [min[0], min[1], min[2], max[0] - min[0], max[1] - min[1], max[2] - min[2]];\n    }\n\n    public static intersection(a: ArrayLike<number>, b: ArrayLike<number>): number[] {\n        if (a == null || b == null || BBox.areDisjoint(a, b))\n            return null;\n\n        const minA = [a[0], a[1], a[2]];\n        const minB = [b[0], b[1], b[2]];\n        const maxA = [a[0] + a[3], a[1] + a[4], a[2] + a[5]];\n        const maxB = [b[0] + b[3], b[1] + b[4], b[2] + b[5]];\n\n        const min = [Math.max(minA[0], minB[0]), Math.max(minA[1], minB[1]), Math.max(minA[2], minB[2])];\n        const max = [Math.min(maxA[0], maxB[0]), Math.min(maxA[1], maxB[1]), Math.min(maxA[2], maxB[2])];\n\n        return [min[0], min[1], min[2], max[0] - min[0], max[1] - min[1], max[2] - min[2]];\n    }\n\n    /**\n     * Checks if bounding boxes are disjoint\n     * @param a Bounding box A\n     * @param b Bounding box B\n     * @returns {boolean} Returns true when bounding boxes are disjoint\n     */\n    public static areDisjoint(a: ArrayLike<number>, b: ArrayLike<number>): boolean {\n        if (a == null || b == null)\n            throw new Error('Bounding box is not defined');\n\n        const minA = [a[0], a[1], a[2]];\n        const minB = [b[0], b[1], b[2]];\n        const maxA = [a[0] + a[3], a[1] + a[4], a[2] + a[5]];\n        const maxB = [b[0] + b[3], b[1] + b[4], b[2] + b[5]];\n\n        return minA[0] > maxB[0] || minA[1] > maxB[1] || minA[2] > maxB[2] ||\n            minB[0] > maxA[0] || minB[1] > maxA[1] || minB[2] > maxA[2];\n    }\n\n    public static getDiagonalSize(bBox: number[] | Float32Array): number {\n        return Math.sqrt(bBox[3]*bBox[3] + bBox[4]*bBox[4] + bBox[5]*bBox[5])\n    }\n\n    /**\n     * Transforms axis aligned bounding box into current model view and returns width and height\n     * @param bBox Axis aligned bounding box\n     * @param viewDirection Direction of the view\n     * @param upDirection Up direction of the camera\n     */\n    public static getSizeInView(bBox: number[] | Float32Array, viewDirection: vec3, upDirection: vec3): { width: number, height: number, depth: number } {\n        // http://dev.theomader.com/transform-bounding-boxes/\n\n        // create transformation matrix from direction\n        viewDirection = vec3.normalize(vec3.create(), viewDirection);\n        upDirection = vec3.normalize(vec3.create(), upDirection);\n        const moveDirection = vec3.negate(vec3.create(), viewDirection);\n        const boxSize = Math.max(bBox[3], bBox[4], bBox[5]);\n        const boxPosition = vec3.fromValues(bBox[0] + bBox[3] / 2.0, bBox[1] + bBox[4] / 2.0, bBox[2] + bBox[5] / 2.0)\n        const move = vec3.scale(vec3.create(), moveDirection, boxSize);\n        const eye = vec3.add(vec3.create(), boxPosition, move);\n\n        const m = mat4.lookAt(mat4.create(), eye, boxPosition, upDirection);\n\n        const right = Array.prototype.slice.call(m.slice(0, 3));\n        const up = Array.prototype.slice.call(m.slice(4, 7));\n        const back = Array.prototype.slice.call(m.slice(8, 11));\n\n        const xa = vec3.scale(vec3.create(), right, bBox[0]);\n        const xb = vec3.scale(vec3.create(), right, (bBox[0] + bBox[3]));\n\n        const ya = vec3.scale(vec3.create(), up, bBox[1]);\n        const yb = vec3.scale(vec3.create(), up, (bBox[1] + bBox[4]));\n\n        const za = vec3.scale(vec3.create(), back, bBox[2]);\n        const zb = vec3.scale(vec3.create(), back, (bBox[2] + bBox[5]));\n\n\n        const min1 = vec3.min(vec3.create(), xa, xb);\n        const min2 = vec3.min(vec3.create(), ya, yb);\n        const min3 = vec3.min(vec3.create(), za, zb);\n\n        const max1 = vec3.max(vec3.create(), xa, xb);\n        const max2 = vec3.max(vec3.create(), ya, yb);\n        const max3 = vec3.max(vec3.create(), za, zb);\n\n        const min = vec3.fromValues(\n            min1[0] + min2[0] + min3[0],\n            min1[1] + min2[1] + min3[1],\n            min1[2] + min2[2] + min3[2]\n        );\n\n        const max = vec3.fromValues(\n            max1[0] + max2[0] + max3[0],\n            max1[1] + max2[1] + max3[1],\n            max1[2] + max2[2] + max3[2]\n        );\n\n        const size = vec3.sub(vec3.create(), max, min);\n\n        return {\n            width: size[0] * 1.0, // X => width\n            height: size[1] * 1.0,  // Y => height\n            depth: size[2]\n        };\n    }\n}","/**\n * This is a structure reporting errors and warnings about prerequisites of {@link Viewer Viewer}. It is result of {@link Viewer.check check()} static method.\n *\n * @name CheckResult\n * @class\n * @category Core\n */\n\nexport class CheckResult {\n    /**\n    * If this array contains any warnings Viewer will work but it might be slow or may not support full functionality.\n    * @member {string[]}  warnings\n    */\n    public warnings: string[] = [];\n    /**\n    * If this array contains any errors Viewer won't work at all or won't work as expected.\n    * You can use messages in this array to report problems to user. However, user won't probably\n    * be able to do to much with it except trying to use different browser. IE10- are not supported for example.\n    * The latest version of IE should be all right.\n    * @member {string[]} errors\n    */\n    public errors: string[] = [];\n    /**\n    * If false Viewer won't work at all or won't work as expected.\n    * You can use messages in {@link CheckResult#errors errors array} to report problems to user. However, user won't probably\n    * be able to do to much with it except trying to use different browser. IE10- are not supported for example.\n    * The latest version of IE should be all right.\n    * @member {string[]} noErrors\n    */\n    public noErrors: boolean = false;\n    /**\n    * If false Viewer will work but it might be slow or may not support full functionality. Use {@link CheckResult#warnings warnings array} to report problems.\n    * @member {string[]} noWarnings\n    */\n    public noWarnings: boolean = false;\n}\n","export class FpsWatch {\n    private buffer: CircularBuffer = new CircularBuffer(20);\n\n    /**\n     *\n     */\n    constructor(frameRequest: (callback: FrameRequestCallback) => number) {\n        const watch = (time: DOMHighResTimeStamp) => {\n            this.buffer.next(time);\n            frameRequest(watch)\n        };\n        frameRequest(watch)\n    }\n\n    public get fps(): number {\n\n        const first = this.buffer.first;\n        const last = this.buffer.last;\n        if (first == null || last == null)\n            return 60;  // Before the buffer is filled assume 60FPS. \n\n        return this.buffer.size / (last - first) * 1000;\n    }\n}\n\nclass CircularBuffer {\n    private inner: number[] = [];\n    private idx = 0;\n\n    /**\n     *\n     */\n    constructor(public size: number) {\n\n    }\n\n    public next(value: number) {\n        this.inner[this.idx] = value;\n        this.idx = (this.idx + 1) % this.size;\n    }\n\n    public get first(): number {\n        return this.inner[this.idx];\n    }\n\n    public get last(): number {\n        const i = (this.idx + this.size - 1) % this.size;\n        return this.inner[i];\n    }\n}","export * from './state';\nexport * from './message';\nexport * from './product-map';\nexport * from './product-identity';\nexport * from './checkResult';\nexport * from './viewer-event-map';\nexport * from './product-analytical-result';","export class Message {\n    public type: MessageType;\n    public message: string;\n    public percent: number;\n    public result?: any;\n    public wexbimId?: number;\n    public phase: LoadingPhase;\n}\n\n/** Converts a Message to a aggregate percent completed based naive assumption that phases are equal */\nexport function MessageProgress(msg: Message): number {\n    const maxPhases = 3;\n    const perPhase = 100 / maxPhases;\n    const done = (perPhase * msg.phase) + ((perPhase * msg.percent) / 100);\n    return done;\n}\n\nexport enum MessageType {\n    PROGRESS,\n    COMPLETED,\n    FAILED\n}\n\nexport enum LoadingPhase {\n    DOWNLOADING,\n    READING,\n    LOADING\n}","/**\n * @category Core\n */\nexport class ProductAnalyticalResult {\n    public modelId: number;\n    public productId: number;\n    public numberOfTriangles: number;\n    public size: number;\n    public volume: number;\n    public density: number;\n}","export class ProductIdentity\n{\n    public id: number;\n    public model: number;\n}","import { ProductType } from \"../product-type\";\nimport { State, StatePriorities } from \"./state\";\n\nexport class ProductMap {\n    public productID: number;\n    public renderId: number;\n    public type: ProductType;\n    public bBox: Float32Array;\n    public spans: Int32Array[];\n    public states: number[] = [];\n\n    public static clone(o: ProductMap): ProductMap {\n        const c = new ProductMap();\n        c.productID = o.productID;\n        c.renderId = o.renderId;\n        c.type = o.type;\n        c.bBox = new Float32Array(o.bBox);\n        c.spans = o.spans;\n        c.states = o.states.slice(0);\n        return c;\n    }\n\n    public static addState(p: ProductMap, state: State) {\n        if (p.states.find(s => s === state) != null) {\n            return;\n        }\n        p.states.push(state);\n    }\n\n    public static removeState(p: ProductMap, state: State) {\n        const index = p.states.indexOf(state);\n        if (index < 0) {\n            return;\n        }\n        p.states.splice(index, 1);\n    }\n\n    public static getState(p: ProductMap): State {\n        if (p.states == null || p.states.length === 0) {\n            return State.UNDEFINED;\n        }\n        return StatePriorities.getHighestPriority(p.states);\n    }\n}","/**\n    * Enumeration for object states.\n    * @readonly\n    * @enum {number}\n    * \n    * \n    * @category Core\n    */\nexport enum State {\n    UNDEFINED = 255,\n    HIDDEN = 254,\n    HIGHLIGHTED = 253,\n    XRAYVISIBLE = 252,\n    PICKING_ONLY = 251,\n    HOVEROVER = 250,\n    UNSTYLED = 225\n}\n\nexport class StatePriorities {\n    public static getPriority(state: State): number {\n        switch (state) {\n            case State.HIGHLIGHTED: return 1;\n            case State.PICKING_ONLY: return 2;\n            case State.HIDDEN: return 3;\n            case State.XRAYVISIBLE: return 4;\n            default: return 100;\n        }\n    }\n\n    public static getHighestPriority(states: State[]): State {\n        if (states == null || states.length === 0) {\n            return null;\n        }\n\n        // we don't need to sort by priorities if there is only single value\n        if (states.length === 1) {\n            return states[0];\n        }\n\n        const priorities = states.map(s => ({ state: s, priority: this.getPriority(s) }));\n        priorities.sort((a, b) => a.priority - b.priority);\n\n        const top = priorities[0];\n        if (top.priority > 50) {\n            return State.UNDEFINED;\n        }\n        return top.state;\n    }\n}","import { vec3 } from \"gl-matrix\";\n\nexport class VectorUtils {\n    public static getVec3(a: ArrayLike<number>) : vec3 {\n        if(a.length >= 3)\n            return vec3.fromValues(a[0], a[1], a[2]);\n    }\n}","/*\n * Copyright 2010, Google Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/*\n * File converted to TypeScript by Martin Černý (martin.cerny@northumbria.ec.uk) \n * requestAnimationFrame() made part of utils instead of extending window object\n */\n\n/**\n * @fileoverview This file contains functions every webgl program will need\n * a version of one way or another.\n *\n * Instead of setting up a context manually it is recommended to\n * use. This will check for success or failure. On failure it\n * will attempt to present an approriate message to the user.\n *\n *       gl = WebGLUtils.setupWebGL(canvas);\n *\n * For animated WebGL apps use of setTimeout or setInterval are\n * discouraged. It is recommended you structure your rendering\n * loop like this.\n *\n *       function render() {\n *         window.requestAnimFrame(render, canvas);\n *\n *         // do rendering\n *         ...\n *       }\n *       render();\n *\n * This will call your rendering function up to the refresh rate\n * of your display but will stop rendering if your app is not\n * visible.\n */\n\nexport class WebGLUtils {\n\n    /**\n     * Creates the HTLM for a failure message\n     * @param {string} canvasContainerId id of container of th\n     *        canvas.\n     * @return {string} The html.\n     */\n    private static makeFailHTML(msg: string): string {\n        return '' +\n            '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\n            '<td align=\"center\">' +\n            '<div style=\"display: table-cell; vertical-align: middle;\">' +\n            '<div style=\"\">' + msg + '</div>' +\n            '</div>' +\n            '</td></tr></table>';\n    }\n\n    /**\n     * Mesasge for getting a webgl browser\n     * @type {string}\n     */\n    private static GET_A_WEBGL_BROWSER: string = '' +\n        'This page requires a browser that supports WebGL.<br/>' +\n        '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\n\n    /**\n     * Mesasge for need better hardware\n     * @type {string}\n     */\n    private static OTHER_PROBLEM: string = '' +\n        \"It doesn't appear your computer can support WebGL.<br/>\" +\n        '<a href=\"http://get.webgl.org/troubleshooting/\">Click here for more information.</a>';\n\n    /**\n     * Creates a webgl context. If creation fails it will\n     * change the contents of the container of the <canvas>\n     * tag to an error message with the correct links for WebGL.\n     * @param {Element} canvas. The canvas element to create a\n     *     context from.\n     * @param {WebGLContextCreationAttirbutes} opt_attribs Any\n     *     creation attributes you want to pass in.\n     * @param {function:(msg)} opt_onError An function to call\n     *     if there is an error during creation.\n     * @return {WebGLRenderingContext} The created context.\n     */\n    public static setupWebGL(canvas: HTMLCanvasElement, done: (context: WebGLRenderingContext, version: number) => void,\n                             attribs?: WebGLContextAttributes, onError?: (msg: string) => void): void {\n\n        function handleCreationError(msg) {\n            var container = canvas.parentNode as HTMLElement;\n            if (container) {\n                let str: string = typeof (WebGLRenderingContext) !== \"undefined\" ?\n                    WebGLUtils.OTHER_PROBLEM :\n                    WebGLUtils.GET_A_WEBGL_BROWSER;\n                if (msg) {\n                    str += \"<br/><br/>Status: \" + msg;\n                }\n                container.innerHTML = WebGLUtils.makeFailHTML(str);\n            }\n        }\n\n        onError = onError || handleCreationError;\n\n        if (canvas.addEventListener) {\n            canvas.addEventListener(\"webglcontextcreationerror\",  (event: WebGLContextEvent) => {\n                onError(event.statusMessage);\n            }, false);\n        }\n\n        WebGLUtils.create3DContext(canvas, done, attribs);\n    }\n\n    /**\n     * Creates a webgl context.\n     * @param {!Canvas} canvas The canvas tag to get context\n     *     from. If one is not passed in one will be created.\n     * @return {!WebGLContext} The created context.\n     */\n    public static create3DContext(canvas: HTMLCanvasElement, done: (context: WebGLRenderingContext | WebGL2RenderingContext, version: number) => void,\n                                  opt_attribs: {}): void {\n\n        let context: WebGLRenderingContext | WebGL2RenderingContext = null;\n        try {\n            // get WebGL2 if available\n            context = canvas.getContext('webgl2', opt_attribs) as WebGL2RenderingContext;\n            if (context != null) {\n                done(context, 2);\n                return;\n            }\n        } catch {\n                // we can ignore this, just trying to get anything usable here\n         }\n\n        var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\n        names.forEach (name => {\n            if (context != null)\n                return;\n\n            try {\n                context = canvas.getContext(name, opt_attribs) as WebGLRenderingContext;\n            } catch (e) {\n                // we can ignore this, just trying to get anything usable here\n             }\n        });\n        done(context, 1);\n    }\n\n\n}\n\n\n","import { DepthReader } from \"./shaders/depth-reader\";\nimport { vec3 } from \"gl-matrix\";\n\n\nexport class Framebuffer {\n    public framebuffer: WebGLFramebuffer;\n    public renderbuffer: WebGLRenderbuffer;\n    public texture: WebGLTexture;\n    public depthTexture: WebGLTexture;\n    public isReady = true;\n\n    private _disposed: boolean = false;\n    private _depthReader: DepthReader;\n    private _glVersion = 1;\n\n    // only create depth reader when needed\n    private get depthReader(): DepthReader {\n        if (this._depthReader != null) {\n            return this._depthReader;\n        }\n\n        this._depthReader = new DepthReader(this.gl, this.glVersion);\n        return this._depthReader;\n    }\n\n    constructor(\n        private gl: WebGLRenderingContext,\n        public width: number,\n        public height: number,\n        private withDepth: boolean,\n        private glVersion: number\n    ) {\n        // width and height should be whole numbers\n        this.width = width = Math.floor(width);\n        this.height = height = Math.floor(height);\n\n        if (width === 0 || height === 0) {\n            this.isReady = false;\n            return;\n        }\n\n\n        this._glVersion = glVersion;\n        //create framebuffer\n        this.framebuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n\n        // create renderbuffer\n        this.renderbuffer = gl.createRenderbuffer();\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.renderbuffer);\n        // allocate renderbuffer\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, width, height);\n\n        this.texture = gl.createTexture();\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        // Set the parameters so we can render any image size.        \n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\n\n        // Create the depth texture\n        if (withDepth) {\n            this.depthTexture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            if (this._glVersion === 1) {\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT, width, height, 0, gl.DEPTH_COMPONENT, gl.UNSIGNED_SHORT, null);\n            } else {\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT16, width, height, 0, gl.DEPTH_COMPONENT, gl.UNSIGNED_SHORT, null);\n            }\n        }\n\n        // attach renderbuffer and texture and depth texture\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texture, 0);\n        if (withDepth) {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, this.depthTexture, 0);\n        } else {\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this.renderbuffer);\n        }\n\n        if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) {\n            throw new Error('this combination of attachments does not work');\n        }\n    }\n\n    public bind(): void {\n        if (!this.isReady)\n            return;\n        const gl = this.gl;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.renderbuffer);\n    }\n\n    /**\n     * Returns one pixel at defined position\n     */\n    public getPixel(x: number, y: number): Uint8Array {\n        if (!this.isReady)\n            return null;\n        var result = new Uint8Array(4);\n        this.gl.readPixels(x, y, 1, 1, this.gl.RGBA, this.gl.UNSIGNED_BYTE, result);\n        return result;\n    }\n\n    public getDepth(x: number, y: number): number {\n        if (!this.isReady)\n            return null;\n        if (this.withDepth) {\n            return this.depthReader.getDepth(x, y, this.depthTexture, this.width, this.height);\n        } else {\n            return -1;\n        }\n    }\n\n    public getDepths(points: { x: number, y: number }[]): number[] {\n        if (this.withDepth && this.isReady) {\n            return this.depthReader.getDepths(points, this.depthTexture, this.width, this.height);\n        } else {\n            return null;\n        }\n    }\n\n    public getXYZArray(points: { x: number, y: number }[]): vec3[] {\n        if (!this.withDepth || !this.isReady) {\n            return null;\n        }\n\n        const depths = this.getDepths(points);\n\n        return depths.map((depth, i) => {\n            if (depth === 255) { // infinity (= nothing, no value)\n                return null;\n            }\n\n            // convert values to clip space where x and y are [-1, 1] and z is [0, 1]\n            const point = points[i];\n            const xc = point.x / this.width * 2.0 - 1.0;\n            const yc = point.y / this.height * 2.0 - 1.0;\n            const zc = (depth / 255.0 - 0.5) * 2.0;\n\n            return vec3.fromValues(xc, yc, zc);\n        });\n    }\n\n    /**\n     * Computes normalised X, Y, Z of event in the clip space\n     * \n     * @param x X coordinate of the event\n     * @param y Y coordinate of the event\n     */\n    public getXYZ(x: number, y: number): vec3 {\n        if (!this.withDepth || !this.isReady) {\n            return null;\n        }\n\n        return this.getXYZArray([{ x, y }])[0];\n    }\n\n    /**\n     * Computes normalised X, Y, Z of event in the clip space with near and far bounds,\n     * This can be used to refine near and far clipping planes for more precise evaluation\n     * in the second pass.\n     * \n     * @param x X coordinate of the event\n     * @param y Y coordinate of the event\n     */\n    public getXYZRange(x: number, y: number): { near: vec3, middle: vec3, far: vec3 } {\n        if (!this.withDepth || !this.isReady) {\n            return null;\n        }\n\n        const depth = this.getDepth(x, y);\n        if (depth === 255) { // infinity\n            return null;\n        }\n\n        // convert values to clip space where x and y are [-1, 1] and z is [0, 1]\n        const xc = x / this.width * 2.0 - 1.0;\n        const yc = y / this.height * 2.0 - 1.0;\n        const zc = (depth / 255.0 - 0.5) * 2.0;\n\n        const depthNear = Math.max(depth - 1, 0);\n        const zcn = (depthNear / 255.0 - 0.5) * 2.0;\n\n        const depthFar = Math.min(depth + 1, 255);\n        const zcf = (depthFar / 255.0 - 0.5) * 2.0;\n\n        return {\n            far: vec3.fromValues(xc, yc, zcf),\n            near: vec3.fromValues(xc, yc, zcn),\n            middle: vec3.fromValues(xc, yc, zc)\n        };\n    }\n\n    public getId(x: number, y: number): number {\n        if (!this.isReady)\n            return null;\n\n        const result = this.getPixel(x, y);\n\n        //decode ID (bit shifting by multiplication)\n        var hasValue = result[3] !== 0; //0 transparency is only for no-values\n        if (hasValue) {\n            var id = result[0] + result[1] * 256 + result[2] * 256 * 256;\n            return id;\n        } else {\n            return null;\n        }\n    }\n\n    public getIds(points: { x: number, y: number }[]): number[] {\n        if (!this.isReady)\n            return null;\n\n        return points.map(p => {\n            const result = this.getPixel(p.x, p.y);\n\n            //decode ID (bit shifting by multiplication)\n            var hasValue = result[3] !== 0; //0 transparency is only for no-values\n            if (hasValue) {\n                var id = result[0] + result[1] * 256 + result[2] * 256 * 256;\n                return id;\n            } else {\n                return null;\n            }\n        });\n    }\n\n    public getImageDataArray(): Uint8ClampedArray {\n        if (!this.isReady)\n            return null;\n\n        let gl = this.gl;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.renderbuffer);\n\n        // Read the contents of the framebuffer\n        var data = new Uint8Array(this.width * this.height * 4);\n        gl.readPixels(0, 0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, data);\n\n\n\n        // Flip the image data vertically (discrepancy between coordinates)\n        let transData = new Uint8ClampedArray(this.width * this.height * 4);\n        for (let i = 0; i < this.height; i++) {\n            let row = data.subarray(i * this.width * 4, (i + 1) * this.width * 4);\n            let transIndex = this.height - i - 1;\n            transData.set(new Uint8ClampedArray(row), transIndex * this.width * 4);\n        }\n        return transData;\n    }\n\n    public get2DCanvas(): HTMLCanvasElement {\n        if (!this.isReady)\n            return document.createElement('canvas');\n\n        // get transposed data\n        const transData = this.getImageDataArray();\n\n        // Create a 2D canvas to store the result \n        var canvas = document.createElement('canvas');\n        canvas.width = this.width;\n        canvas.height = this.height;\n        var context = canvas.getContext('2d');\n\n        // Copy the pixels to a 2D canvas\n        var imageData = context.createImageData(this.width, this.height);\n        imageData.data.set(new Uint8ClampedArray(transData));\n        context.putImageData(imageData, 0, 0);\n\n        return canvas;\n    }\n\n    /**\n     * Gets current image data from the framebuffer as Base64 string\n     */\n    public getImageDataUrl(type: 'png' | 'jpeg' = 'png'): string {\n        if (!this.isReady)\n            return null;\n\n        let canvas = this.get2DCanvas();\n        return canvas.toDataURL(`image/${type}`);\n    }\n\n    /**\n     * Gets current image data as a BLOB. Use callback to handle data.\n     * @param callback Use callback to handle Blob\n     */\n    public getImageDataBlob(callback: (blob: Blob) => void, type: 'png' | 'jpeg' = 'png'): void {\n        if (!this.isReady)\n            return;\n\n        let canvas = this.get2DCanvas();\n        canvas.toBlob(callback, `image/${type}`);\n    }\n\n    /**\n     * Deletes all WebGL objects it holds\n     */\n    public delete() {\n        if (this._disposed || !this.isReady)\n            return;\n\n        const gl = this.gl;\n        if (typeof (WebGL2RenderingContext) !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n            gl.invalidateFramebuffer(gl.FRAMEBUFFER, [gl.COLOR_ATTACHMENT0, gl.DEPTH_ATTACHMENT]);\n        }\n\n        gl.deleteFramebuffer(this.framebuffer);\n        gl.deleteRenderbuffer(this.renderbuffer);\n        gl.deleteTexture(this.texture);\n        gl.deleteTexture(this.depthTexture);\n\n        if (this._depthReader != null) {\n            this._depthReader.delete();\n        }\n\n        this._disposed = true;\n    }\n}\n","// Core viewer objects\nexport * from './product-inheritance';\nexport * from './product-type';\nexport * from './common';\nexport * from './viewer';\nexport * from './camera';\nexport * from './section-box';\nexport * from './framebuffer';\nexport * from './model-handle';\nexport * from './model-pointers';\nexport * from './performance-rating';\nexport * from './reader/model-geometry';\nexport * from './navigation';","import { ModelGeometry, Region } from \"./reader/model-geometry\";\nimport { State } from \"./common/state\";\nimport { ModelPointers } from \"./model-pointers\";\nimport { Product } from \"./product-inheritance\";\nimport { LoadingPhase, Message, MessageType } from \"./common/message\";\nimport { vec3, vec4 } from \"gl-matrix\";\nimport { ProductMap } from \"./common/product-map\";\nimport { BBox } from \"./common/bbox\";\nimport { ProductType } from \"./product-type\";\nimport { ProductAnalyticalResult } from \"./common/product-analytical-result\";\nimport { VectorUtils } from \"./common/vector-utils\";\n\n//this class holds pointers to textures, uniforms and data buffers which\n//make up a model in GPU\n\n\nexport class ModelHandle {\n\n    /**\n     * Session unique ID used to manipulate this handle/model\n     */\n    public id: number;\n\n    /**\n     * Tag used to identify the model\n     */\n    public tag: any = null;\n\n    /**\n     * Conversion factor to one meter from model units\n     */\n    public meter: number;\n\n    /**\n     * local World Coordinate System origin\n     */\n    public wcs: vec3 = vec3.create();\n\n    /**\n     * indicates if this model should be used in a rendering loop or not.\n     */\n    public get stopped(): boolean { return this._stopped; }\n    public set stopped(value: boolean) { this._stopped = value; this._changed = true; }\n    private _stopped: boolean = false;\n\n    /**\n     * participates in picking operation only if true\n     */\n    public pickable: boolean = true;\n\n    /**\n     * participates in clipping operation only if true\n     */\n    public clippable: boolean = true;\n\n    /**\n     * indicates this model should never have drop items from rendering when Adaptive Performance is enabled\n     */\n    public pinned: boolean = false\n\n    /**\n     * If drawProductId is defined, only this single product is drawn\n     */\n    public get isolatedProducts(): number[] { return this._drawProductIds; }\n    public set isolatedProducts(value: number[]) { this._drawProductIds = value; this._changed = true; }\n\n    public getRegion(wcs: vec3): Region {\n        let result: Region = null;\n        if (this.isolatedProducts == null) {\n            result = Region.clone(this._region);\n        } else {\n            let maps: ProductMap[] = [];\n            this.isolatedProducts.forEach((id) => {\n                const map = this.getProductMap(id, wcs);\n                if (map) {\n                    maps.push(map);\n                }\n            });\n            if (maps.length === 0) {\n                return null;\n            }\n            // aggregated bounding box\n            const bb = maps.reduce((prev: Float32Array, curr: ProductMap) => {\n                if (prev == null) {\n                    return curr.bBox;\n                }\n                return BBox.union(prev, curr.bBox);\n            }, null);\n            result = new Region();\n            result.population = maps.length;\n            result.bbox = new Float32Array(bb);\n            result.centre = new Float32Array([\n                bb[0] + bb[3] / 2.0,\n                bb[1] + bb[4] / 2.0,\n                bb[2] + bb[5] / 2.0\n            ]);\n            return result;\n        }\n\n        // fix local displacement\n        const shift = vec3.subtract(vec3.create(), this.wcs, wcs);\n        result.centre = vec3.add(vec3.create(), shift, VectorUtils.getVec3(result.centre));\n        let bboxOrigin = vec3.add(vec3.create(), shift, VectorUtils.getVec3(result.bbox.subarray(0, 3)));\n        result.bbox.set(new Float32Array(bboxOrigin), 0);\n        return result;\n    }\n\n    /**\n     * Indicates if there are any changes to be drawn.\n     * This flag is checked by the viewer to see if redraw is necessary\n     */\n    public get changed(): boolean {\n        return this._changed;\n    }\n    private _changed = false;\n\n    /**\n     * Some models are empty - they don't contain any geometry\n     */\n    public get empty(): boolean {\n        return this._empty;\n    }\n    private _empty = false;\n\n    private _region: Region;\n    private _drawProductIds: number[] = null;\n    private _numberOfIndices: number;\n    private _vertexTextureSize: number;\n    private _matrixTextureSize: number;\n    private _styleTextureSize: number;\n\n    private _vertexTexture: WebGLTexture;\n    private _matrixTexture: WebGLTexture;\n    private _styleTexture: WebGLTexture;\n\n    private _normalBuffer: WebGLBuffer;\n    private _indexBuffer: WebGLBuffer;\n    private _productBuffer: WebGLBuffer;\n    private _styleBuffer: WebGLBuffer;\n    private _stateBuffer: WebGLBuffer;\n    private _transformationBuffer: WebGLBuffer;\n\n    private _clippingPlaneA: number[] = null;\n    private _clippingPlaneB: number[] = null;\n    private _clippingA: boolean = false;\n    private _clippingB: boolean = false;\n\n    private _glVersion: number = 1;\n\n    private get gl1(): WebGLRenderingContext {\n        return this._glVersion === 1 ? this._gl : null;\n    }\n\n    private get gl2(): WebGL2RenderingContext {\n        return this._glVersion === 2 ? this._gl as WebGL2RenderingContext : null;\n    }\n\n    public set clippingPlaneA(plane: number[]) {\n        this._clippingPlaneA = plane;\n        this._clippingA = plane != null;\n        this._changed = true;\n    }\n\n    public get clippingPlaneA(): number[] {\n        return this._clippingPlaneA;\n    }\n\n    public set clippingPlaneB(plane: number[]) {\n        this._clippingPlaneB = plane;\n        this._clippingB = plane != null;\n        this._changed = true;\n    }\n\n    public get clippingPlaneB(): number[] {\n        return this._clippingPlaneB;\n    }\n\n    constructor(\n        private _gl: WebGLRenderingContext | WebGL2RenderingContext,\n        private _model: ModelGeometry, progress: (msg: Message) => void) {\n\n        if (typeof (_gl) === 'undefined' || typeof (_model) === 'undefined') {\n            throw new Error('WebGL context and geometry model must be specified');\n        }\n\n        if (typeof (WebGL2RenderingContext) !== 'undefined' && _gl instanceof WebGL2RenderingContext) {\n            this._glVersion = 2;\n        }\n\n        // tslint:disable-next-line: no-empty\n        progress = progress ? progress : (msg) => { };\n        this.id = ModelHandle._instancesNum++;\n\n        this.meter = _model.meter;\n        this.wcs = VectorUtils.getVec3(_model.wcs);\n\n        // handle the case when there is actually nothing in the model\n        if (_model.indices.length === 0) {\n            this._empty = true;\n            this._changed = false;\n            return;\n        }\n\n        this.InitGlBuffersAndTextures(_gl);\n        this.InitRegions(_model.regions);\n        this.InitGPU(_gl, _model, progress);\n        this._changed = true;\n    }\n\n    private InitRegions(regions: Region[]): void {\n        if (this.empty) {\n            return;\n        }\n        this._region = regions[0];\n\n        // set the most populated region\n        regions.forEach((region) => {\n            if (region.population > this._region.population) {\n                this._region = region;\n            }\n        });\n\n        // this region is invalid. We attempt to recalculate the bounds\n        if (\n            this._region.bbox.indexOf(Number.NaN) !== -1 || \n            this._region.bbox.indexOf(Infinity) !== -1 || \n            this._region.bbox.indexOf(-Infinity) !== -1)\n        {\n            console.warn('Invalid region detected. Attempting to recompute the region based on all the products.')\n            this._region = this.recomputeCompleteRegion();\n        }\n\n        // set default region if no region is defined. This shouldn't ever happen if model contains any geometry.\n        if (this._region == null) {\n            this._region = new Region();\n            this._region.population = 0;\n            this._region.centre = new Float32Array([0.0, 0.0, 0.0]);\n            this._region.bbox = new Float32Array([0.0, 0.0, 0.0, 0.0, 0.0, 0.0]);\n        }\n    }\n\n    private recomputeCompleteRegion(): Region {\n        const maps = Object.getOwnPropertyNames(this._model.productMaps).map(id => this._model.productMaps[id]);\n\n        // aggregated bounding box\n        const bb = maps.reduce((prev: Float32Array, curr: ProductMap) => {\n            if (curr.bBox.indexOf(Number.NaN) !== -1 || curr.bBox.indexOf(Infinity) !== -1 || curr.bBox.indexOf(-Infinity) !== -1) {\n                return prev;\n            }\n            if (prev == null) {\n                return curr.bBox;\n            }\n            return BBox.union(prev, curr.bBox);\n        }, null);\n        let result = new Region();\n        if (bb == null) {\n            console.error('Failed to recompute the region. No valid product bounding boxes found.')\n            return result;\n        }\n\n        result.population = maps.length;\n        result.bbox = new Float32Array(bb);\n        result.centre = new Float32Array([\n            bb[0] + bb[3] / 2.0,\n            bb[1] + bb[4] / 2.0,\n            bb[2] + bb[5] / 2.0\n        ]);\n        return result;\n    }\n\n    private InitGlBuffersAndTextures(gl: WebGLRenderingContext): void {\n        if (this.empty) {\n            return;\n        }\n\n        // data structure \n        this._vertexTexture = gl.createTexture();\n        this._matrixTexture = gl.createTexture();\n        this._styleTexture = gl.createTexture();\n\n        this._vertexTextureSize = 0;\n        this._matrixTextureSize = 0;\n        this._styleTextureSize = 0;\n\n        this._normalBuffer = gl.createBuffer();\n        this._indexBuffer = gl.createBuffer();\n        this._productBuffer = gl.createBuffer();\n        this._styleBuffer = gl.createBuffer();\n        this._stateBuffer = gl.createBuffer();\n        this._transformationBuffer = gl.createBuffer();\n    }\n\n    /**\n     * Static counter to keep unique ID of the model handles\n     */\n    private static _instancesNum = 1;\n\n    //this function sets this model as an active one\n    //it needs an argument 'pointers' which contains pointers to\n    //shader attributes and uniforms which are to be set.\n    public setActive(pointers: ModelPointers, wcs: vec3): void {\n        if (this.stopped || this.empty) {\n            return;\n        }\n\n        var gl = this._glVersion === 1 ? this.gl1 : this.gl2;\n        //set predefined textures\n        if (this._vertexTextureSize > 0) {\n            gl.activeTexture(gl.TEXTURE1);\n            gl.bindTexture(gl.TEXTURE_2D, this._vertexTexture);\n            gl.uniform1i(pointers.VertexSamplerUniform, 1);\n        }\n\n        if (this._matrixTextureSize > 0) {\n            gl.activeTexture(gl.TEXTURE2);\n            gl.bindTexture(gl.TEXTURE_2D, this._matrixTexture);\n            gl.uniform1i(pointers.MatrixSamplerUniform, 2);\n        }\n\n        if (this._styleTextureSize > 0) {\n            gl.activeTexture(gl.TEXTURE3);\n            gl.bindTexture(gl.TEXTURE_2D, this._styleTexture);\n            gl.uniform1i(pointers.StyleSamplerUniform, 3);\n        }\n\n        //set attributes and uniforms\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._normalBuffer);\n        gl.vertexAttribPointer(pointers.NormalAttrPointer, 2, gl.UNSIGNED_BYTE, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._indexBuffer);\n        gl.vertexAttribPointer(pointers.IndexlAttrPointer, 1, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._productBuffer);\n        gl.vertexAttribPointer(pointers.ProductAttrPointer, 1, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._stateBuffer);\n        gl.vertexAttribPointer(pointers.StateAttrPointer, 2, gl.UNSIGNED_BYTE, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._styleBuffer);\n        gl.vertexAttribPointer(pointers.StyleAttrPointer, 1, gl.UNSIGNED_SHORT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._transformationBuffer);\n        gl.vertexAttribPointer(pointers.TransformationAttrPointer, 1, gl.FLOAT, false, 0, 0);\n\n        gl.uniform1f(pointers.VertexTextureSizeUniform, this._vertexTextureSize);\n        gl.uniform1f(pointers.MatrixTextureSizeUniform, this._matrixTextureSize);\n        gl.uniform1f(pointers.StyleTextureSizeUniform, this._styleTextureSize);\n\n        gl.uniform1f(pointers.MeterUniform, this.meter);\n\n        // only shift by difference between this WCS and current global wcs\n        // this is expected to be a small correction allowing to work with relatively small numbers\n        //  in the viewer for models in real world coordinates\n        var diff = vec3.subtract(vec3.create(), this.wcs, wcs);\n        gl.uniform3fv(pointers.WcsUniform, diff);\n\n        //clipping uniforms\n        gl.uniform1i(pointers.ClippingAUniform, this._clippingA ? 1 : 0);\n        gl.uniform1i(pointers.ClippingBUniform, this._clippingB ? 1 : 0);\n        if (this._clippingA) {\n            const c = this.transformPlane(this._clippingPlaneA, wcs);\n            gl.uniform4fv(pointers.ClippingPlaneAUniform, c);\n        }\n        if (this._clippingB) {\n            const c = this.transformPlane(this._clippingPlaneB, wcs);\n            gl.uniform4fv(pointers.ClippingPlaneBUniform, c);\n        }\n    }\n\n    private transformPlane(plane: number[], transform: vec3): Float32Array {\n        const normalLength = vec3.len(VectorUtils.getVec3(plane));\n        // plane components\n        const a = plane[0];\n        const b = plane[1];\n        const c = plane[2];\n        let d = plane[3];\n\n        // point closest to [0,0,0]\n        let x = (a * -d) / normalLength;\n        let y = (b * -d) / normalLength;\n        let z = (c * -d) / normalLength;\n\n        // translate\n        x -= transform[0];\n        y -= transform[1];\n        z -= transform[2];\n\n        //compute new normal equation of the plane\n        d = 0.0 - a * x - b * y - c * z;\n\n        return new Float32Array([a, b, c, d]);\n    }\n\n    //this function must be called AFTER 'setActive()' function which sets up active buffers and uniforms\n    public draw(mode?: DrawMode, percent?: number): void {\n        // reset flag because current state is drawn\n        this._changed = false;\n\n        if (this.stopped || this.empty) {\n            return;\n        }\n\n        var gl = this._gl;\n        const maps = this.isolatedProducts && this.isolatedProducts.length > 0 ?\n            this.isolatedProducts.reduce((result: ProductMap[], id: number) => {\n                const map = this.getProductMap(id);\n                if (map) {\n                    result.push(map);\n                }\n                return result;\n            }, new Array<ProductMap>())\n            : null;\n\n        // if isolated product is requested but is not in this handle, don't draw and return\n        if (maps != null && maps.length === 0) {\n            return;\n        }\n\n        if (mode == null) {\n            // make sure depth testing is on for general rendering\n            if (maps == null) {\n                gl.drawArrays(gl.TRIANGLES, 0, this._numberOfIndices);\n                // if (percent == null || percent === 100 || this._model.breaks[percent] == null) {\n                //     gl.drawArrays(gl.TRIANGLES, 0, this._numberOfIndices);\n                // } else {\n                //     const breaks = this._model.breaks[percent];\n                //     gl.drawArrays(gl.TRIANGLES, 0, breaks[0]);\n                //     gl.drawArrays(gl.TRIANGLES, breaks[1], this._numberOfIndices - breaks[1]);\n                // }\n            } else {\n                maps.forEach((map) => {\n                    map.spans.forEach((span) => {\n                        gl.drawArrays(gl.TRIANGLES, span[0], span[1] - span[0]);\n                    });\n                });\n            }\n            return;\n        }\n\n        if (mode === DrawMode.SOLID && this._model.transparentIndex > 0) {\n            // make sure depth testing is on for solid rendering\n            if (maps == null) {\n                if (percent == null || percent === 100 || this._model.breaks[percent] == null) {\n                    gl.drawArrays(gl.TRIANGLES, 0, this._model.transparentIndex);\n                } else {\n                    const breaks = this._model.breaks[percent];\n                    gl.drawArrays(gl.TRIANGLES, 0, breaks[0] + 1);\n                }\n            } else {\n                maps.forEach((map) => {\n                    map.spans\n                        .filter((s) => s[1] <= this._model.transparentIndex)\n                        .forEach((span) => {\n                            gl.drawArrays(gl.TRIANGLES, span[0], span[1] - span[0]);\n                        });\n                });\n            }\n            return;\n        }\n\n        if (mode === DrawMode.TRANSPARENT && this._model.transparentIndex < this._numberOfIndices) {\n            //following recomendations from http://www.openglsuperbible.com/2013/08/20/is-order-independent-transparency-really-necessary/\n            //disable writing to a depth buffer\n            gl.depthMask(false);\n            //gl.enable(gl.BLEND);\n            //multiplicative blending\n            //gl.blendFunc(gl.ZERO, gl.SRC_COLOR);\n\n            if (maps == null) {\n                if (percent == null || percent === 100 || this._model.breaks[percent] == null) {\n                    gl.drawArrays(gl.TRIANGLES, this._model.transparentIndex, this._numberOfIndices - this._model.transparentIndex);\n                } else {\n                    const breaks = this._model.breaks[percent];\n                    gl.drawArrays(gl.TRIANGLES, breaks[1], this._numberOfIndices - breaks[1]);\n                }\n            } else {\n                maps.forEach((map) => {\n                    map.spans\n                        .filter((s) => s[0] >= this._model.transparentIndex)\n                        .forEach((span) => {\n                            gl.drawArrays(gl.TRIANGLES, span[0], span[1] - span[0]);\n                        });\n                });\n            }\n\n            //enable writing to depth buffer and default blending again\n            gl.depthMask(true);\n            //gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n            return;\n        }\n    }\n\n\n    //public drawProduct(id: number): void {\n    //    if (this.stopped) return;\n    //    var gl = this._gl;\n    //    var map = this.getProductMap(id);\n    //    if (map != null) {\n    //        map.spans.forEach((span) => {\n    //            gl.drawArrays(gl.TRIANGLES, span[0], span[1] - span[0]);\n    //        },\n    //            this);\n    //    }\n    //}\n\n\n    public getProductId(renderId: number): number {\n        if (this.empty) {\n            return null;\n        }\n\n        return this._model.productIdLookup[renderId];\n    }\n\n    public getProductMap(id: number, wcs?: vec3): ProductMap {\n        if (this.empty) {\n            return null;\n        }\n\n        let map = this._model.productMaps[id];\n        if (map != null) {\n            if (wcs != null) {\n                // create clone before we start changing it\n                map = ProductMap.clone(map);\n                const origin = VectorUtils.getVec3(map.bBox.subarray(0, 3));\n                const shift = vec3.subtract(vec3.create(), this.wcs, wcs);\n                const position = vec3.add(vec3.create(), origin, shift);\n                map.bBox.set(position, 0);\n            }\n            return map;\n        }\n        return null;\n    }\n\n    public getProductMaps(ids: number[]): ProductMap[] {\n        let result = new Array<ProductMap>();\n        if (this.empty) {\n            return result;\n        }\n\n        ids.forEach((id) => {\n            var map = this._model.productMaps[id];\n            if (map != null) {\n                result.push(map);\n            }\n        });\n\n        return result;\n    }\n\n    public getProductsOfType(type: ProductType): ProductMap[] {\n        let result: ProductMap[] = [];\n        if (this.empty) {\n            return result;\n        }\n\n        var typeIds = Product.getAllSubTypes(type);\n\n        Object.getOwnPropertyNames(this._model.productMaps).forEach(id => {\n            var map: ProductMap = this._model.productMaps[id];\n            if (typeIds[map.type]) {\n                result.push(map)\n            }\n        })\n        return result;\n    }\n\n    public unload() {\n        if (this.empty) {\n            return null;\n        }\n\n        var gl = this._gl;\n\n        gl.deleteTexture(this._vertexTexture);\n        gl.deleteTexture(this._matrixTexture);\n        gl.deleteTexture(this._styleTexture);\n\n        gl.deleteBuffer(this._normalBuffer);\n        gl.deleteBuffer(this._indexBuffer);\n        gl.deleteBuffer(this._productBuffer);\n        gl.deleteBuffer(this._styleBuffer);\n        gl.deleteBuffer(this._stateBuffer);\n        gl.deleteBuffer(this._transformationBuffer);\n    }\n\n    private InitGPU(gl: WebGLRenderingContext, model: ModelGeometry, progress: (msg: Message) => void) {\n        if (this.empty) {\n            return null;\n        }\n\n        const report = (percent: number): void => {\n            const message: Message = {\n                message: 'Loading data into GPU',\n                percent: percent,\n                type: MessageType.PROGRESS,\n                phase: LoadingPhase.LOADING\n            };\n            progress(message);\n        };\n        this._numberOfIndices = model.indices.length;\n\n        //fill all buffers\n        this.bufferData(this._normalBuffer, model.normals);\n        report(10);\n        this.bufferData(this._indexBuffer, model.indices);\n        report(30);\n        this.bufferData(this._productBuffer, model.products);\n        report(40);\n        this.bufferData(this._stateBuffer, model.states);\n        report(50);\n        this.bufferData(this._transformationBuffer, model.transformations);\n        report(60);\n        this.bufferData(this._styleBuffer, model.styleIndices);\n\n        //fill in all textures\n        this._vertexTextureSize = ModelHandle.bufferTexture(gl, this._vertexTexture, model.vertices, 3);\n        report(80);\n        this._matrixTextureSize = ModelHandle.bufferTexture(gl, this._matrixTexture, model.matrices, 4);\n        report(90);\n        this._styleTextureSize = ModelHandle.bufferTexture(gl, this._styleTexture, model.styles);\n        report(100);\n\n\n        //Forget everything except for states and styles (this should save some RAM).\n        //data is already loaded to GPU by now\n        model.normals = null;\n        model.indices = null;\n        model.products = null;\n        model.transformations = null;\n        model.styleIndices = null;\n\n        model.vertices = null;\n        model.matrices = null;\n\n        const msg: Message = {\n            message: 'Model loaded',\n            percent: 100,\n            type: MessageType.COMPLETED,\n            phase: LoadingPhase.LOADING\n        };\n        progress(msg);\n    }\n\n    private bufferData(pointer, data) {\n        if (this._glVersion === 1) {\n            let gl = this.gl1;\n            gl.bindBuffer(gl.ARRAY_BUFFER, pointer);\n            gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n        }\n        if (this._glVersion === 2) {\n            let gl = this.gl2;\n            gl.bindBuffer(gl.ARRAY_BUFFER, pointer);\n            gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n        }\n    }\n\n\n\n    public static bufferTexture(gl: WebGLRenderingContext | WebGL2RenderingContext, pointer: WebGLTexture, data: Float32Array | Uint8Array, numberOfComponents?: number): number {\n\n        if (data.length === 0) {\n            let dummySize = 2;\n            gl.bindTexture(gl.TEXTURE_2D, pointer);\n            //2 x 2 transparent black dummy pixels texture\n            let image = new Uint8Array([\n                0, 0, 0, 0,\n                0, 0, 0, 0,\n                0, 0, 0, 0,\n                0, 0, 0, 0\n            ]);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, dummySize, dummySize, 0, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE); //Prevents s-coordinate wrapping (repeating).\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); //Prevents t-coordinate wrapping (repeating).\n            return dummySize;\n        }\n\n        var fp = data instanceof Float32Array;\n\n        //compute size of the image (length should be correct already)\n        let size = 0;\n        const maxSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n\n        if (fp) {\n            //recompute to smaller size, but make it +1 to make sure it is all right\n            size = Math.ceil(Math.sqrt(Math.ceil(data.length / numberOfComponents))) + 1;\n        } else {\n            var dim = Math.sqrt(data.byteLength / 4);\n            size = Math.ceil(dim);\n        }\n\n\n        if (size === 0) {\n            return 0;\n        }\n        if (size > maxSize) {\n            throw new Error('Too much data! It cannot fit into the texture.');\n        }\n\n        gl.bindTexture(gl.TEXTURE_2D, pointer);\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 0); //this is our convention\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0); //this should preserve values of alpha\n        //gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, 0); //this should preserve values of colours\n\n        if (data instanceof Float32Array) {\n            //create new data buffer and fill it in with data\n            let image: Float32Array = null;\n            if (size * size * numberOfComponents !== data.length) {\n                image = new Float32Array(size * size * numberOfComponents);\n                image.set(data);\n            } else {\n                image = data;\n            }\n\n            if (gl instanceof WebGLRenderingContext) {\n                let type = null;\n                switch (numberOfComponents) {\n                    case 1:\n                        type = gl.ALPHA;\n                        break;\n                    case 3:\n                        type = gl.RGB;\n                        break;\n                    case 4:\n                        type = gl.RGBA;\n                        break;\n                }\n                gl.texImage2D(gl.TEXTURE_2D, 0, type, size, size, 0, type, gl.FLOAT, image);\n            }\n            if (typeof (WebGL2RenderingContext) !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n                const gl2 = gl as WebGL2RenderingContext;\n                let internalFormat = null;\n                let format = null;\n                switch (numberOfComponents) {\n                    case 1:\n                        format = gl2.RED;\n                        internalFormat = gl2.R32F;\n                        break;\n                    case 3:\n                        format = gl2.RGB;\n                        internalFormat = gl2.RGB32F;\n                        break;\n                    case 4:\n                        format = gl2.RGBA;\n                        internalFormat = gl2.RGBA32F;\n                        break;\n                }\n                gl2.texImage2D(gl2.TEXTURE_2D, 0, internalFormat, size, size, 0, format, gl2.FLOAT, image);\n            }\n\n        } else {\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, size, size, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array(data.buffer));\n        }\n\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE); //Prevents s-coordinate wrapping (repeating).\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); //Prevents t-coordinate wrapping (repeating).\n\n        return size;\n    }\n\n    public getState(id: number): State {\n        var span = this.getFirstSpan(id);\n        if (span == null) {\n            return null;\n        }\n        return this._model.states[span[0] * 2];\n    }\n\n    public getStates(): { id: number, states: State[] }[] {\n        const result: { id: number, states: State[] }[] = [];\n        var prodIds = Object.getOwnPropertyNames(this._model.productMaps);\n        prodIds.forEach((id) => {\n            const map = this._model.productMaps[+id];\n            if (map.states == null || map.states.length === 0) {\n                return;\n            }\n            if (map.states.length === 1 && map.states[0] === State.UNDEFINED) {\n                return;\n            }\n            result.push({ id: map.productID, states: map.states.slice(0) });\n        });\n        return result;\n    }\n\n    public getStyle(id: number): number {\n        var span = this.getFirstSpan(id);\n        if (span == null) {\n            return null;\n        }\n        return this._model.states[span[0] * 2 + 1];\n    }\n\n    private getFirstSpan(id: number): Int32Array {\n        if (this.empty) {\n            return null;\n        }\n\n        if (typeof (id) === 'undefined') {\n            throw new Error('id must be defined');\n        }\n        var map = this.getProductMap(id);\n        if (map === null) {\n            return null;\n        }\n\n        var span = map.spans[0];\n        if (typeof (span) === 'undefined') {\n            return null;\n        }\n\n        return span;\n    }\n\n    public addState(state: State, args: number | number[]): void {\n        if (this.empty) {\n            return;\n        }\n        this.checkStateArgs(state, args);\n        const maps = this.getMaps(args);\n\n        //shift +1 if it is an overlay colour style or 0 if it is a state.\n        maps.forEach((map) => {\n            ProductMap.addState(map, state);\n            const priorityState = ProductMap.getState(map);\n            map.spans.forEach((span) => {\n                //set state or style\n                for (var k = span[0]; k < span[1]; k++) {\n                    this._model.states[k * 2] = priorityState;\n                }\n            });\n        });\n\n        //buffer data to GPU\n        this.bufferData(this._stateBuffer, this._model.states);\n        this._changed = true;\n    }\n\n    public setState(state: State, args: number | number[]): void {\n        if (this.empty) {\n            return;\n        }\n        this.checkStateArgs(state, args);\n        const maps = this.getMaps(args);\n\n        //shift +1 if it is an overlay colour style or 0 if it is a state.\n        maps.forEach((map) => {\n            map.states = [state];\n            map.spans.forEach((span) => {\n                //set state or style\n                for (var k = span[0]; k < span[1]; k++) {\n                    this._model.states[k * 2] = state;\n                }\n            });\n        });\n\n        //buffer data to GPU\n        this.bufferData(this._stateBuffer, this._model.states);\n        this._changed = true;\n    }\n\n    public clearHighlighting(): void {\n        const prodIds = Object.getOwnPropertyNames(this._model.productMaps);\n        prodIds.forEach((id) => {\n            const map = this._model.productMaps[+id];\n            ProductMap.removeState(map, State.HIGHLIGHTED);\n            const priorityState = ProductMap.getState(map);\n            map.spans.forEach((span) => {\n                //set state or style\n                for (var k = span[0]; k < span[1]; k++) {\n                    this._model.states[k * 2] = priorityState;\n                }\n            });\n        });\n\n        //buffer data to GPU\n        this.bufferData(this._stateBuffer, this._model.states);\n        this._changed = true;\n    }\n\n    public removeState(state: State, args: number | number[]): void {\n        if (this.empty) {\n            return;\n        }\n        this.checkStateArgs(state, args);\n        const maps = this.getMaps(args);\n\n        //shift +1 if it is an overlay colour style or 0 if it is a state.\n        maps.forEach((map) => {\n            ProductMap.removeState(map, state);\n            const priorityState = ProductMap.getState(map);\n            map.spans.forEach((span) => {\n                //set state or style\n                for (var k = span[0]; k < span[1]; k++) {\n                    this._model.states[k * 2] = priorityState;\n                }\n            });\n        });\n\n        //buffer data to GPU\n        this.bufferData(this._stateBuffer, this._model.states);\n        this._changed = true;\n    }\n\n    private checkStateArgs(state: State, args: number | number[]) {\n        if (typeof (state) !== 'number' || state < 0 || state > 255) {\n            throw new Error('You have to specify state as an ID of state or index in style pallete.');\n        }\n        if (typeof (args) === 'undefined') {\n            throw new Error('You have to specify products as an array of product IDs or as a product type ID');\n        }\n    }\n\n    public resetState(args?: number | number[]): void {\n        if (this.empty) {\n            return null;\n        }\n        // no args, so reset all states of all products\n        if (args == null) {\n\n            var prodIds = Object.getOwnPropertyNames(this._model.productMaps);\n            prodIds.forEach((id) => {\n                const map = this._model.productMaps[+id];\n                map.states = [];\n            });\n\n            for (var i = 0; i < this._model.states.length; i += 2) {\n                this._model.states[i] = State.UNDEFINED;\n            }\n        } else {\n            // reset only products defined by type or list of instance ids\n            const maps = this.getMaps(args);\n\n            //shift +1 if it is an overlay colour style or 0 if it is a state.\n            maps.forEach((map) => {\n                map.states = [];\n                map.spans.forEach((span) => {\n                    //set state or style\n                    for (var k = span[0]; k < span[1]; k++) {\n                        this._model.states[k * 2] = State.UNDEFINED;\n                    }\n                });\n            });\n        }\n\n        //buffer data to GPU\n        this.bufferData(this._stateBuffer, this._model.states);\n        this._changed = true;\n    }\n\n    public getProductsWithState(state: State): { id: number, model: number }[] {\n        const result: { id: number, model: number }[] = [];\n\n        // hashset of isolated products for fast lookup\n        const isolated: { [id: number]: boolean } = {};\n        const isolation = this.isolatedProducts != null && this.isolatedProducts.length > 0;\n        if (isolation) {\n            this.isolatedProducts.forEach(i => isolated[i] = true);\n        }\n\n        Object.getOwnPropertyNames(this._model.productMaps).forEach((n) => {\n            const map: ProductMap = this._model.productMaps[n];\n            if (map.states.indexOf(state) === -1) {\n                return;\n            }\n            // filter out products not isolated in the current state\n            if (isolation && !isolated[map.productID]) {\n                return;\n            }\n            // transform to result\n            result.push({ id: map.productID, model: this.id });\n        });\n        return result;\n    }\n\n    public setStyle(styleId: number, args: number | number[]): void {\n        if (this.empty) {\n            return null;\n        }\n\n        if (typeof (styleId) !== 'number' && styleId < 0 && styleId > 255) {\n            throw new Error('You have to specify state as an ID of state or index in style pallete.');\n        }\n        if (typeof (args) === 'undefined') {\n            throw new Error('You have to specify products as an array of product IDs or as a product type ID');\n        }\n\n        const maps = this.getMaps(args);\n\n        //shift +1 if it is an overlay colour style or 0 if it is a state.\n        maps.forEach((map) => {\n            map.spans.forEach((span) => {\n                //set state or style\n                for (var k = span[0]; k < span[1]; k++) {\n                    this._model.states[k * 2 + 1] = styleId;\n                }\n            });\n        });\n\n        //buffer data to GPU\n        this.bufferData(this._stateBuffer, this._model.states);\n        this._changed = true;\n    }\n\n    private getMaps(args: number | number[]): ProductMap[] {\n        var maps: ProductMap[] = [];\n        //it is type\n        if (typeof (args) === 'number') {\n            // get all non-abstract subtypes\n            const subTypes = Product.getAllSubTypes(args);\n\n            Object.getOwnPropertyNames(this._model.productMaps).forEach((n) => {\n                const map: ProductMap = this._model.productMaps[n];\n                if (subTypes[map.type]) {\n                    maps.push(map);\n                }\n            });\n        } else {         //it is a list of IDs\n            args.forEach(id => {\n                const map = this.getProductMap(id);\n                if (map != null) {\n                    maps.push(map);\n                }\n            });\n        }\n        return maps;\n    }\n\n    public resetStyles(): void {\n        if (this.empty) {\n            return null;\n        }\n\n        for (var i = 0; i < this._model.states.length; i += 2) {\n            this._model.states[i + 1] = State.UNSTYLED;\n        }\n        //buffer data to GPU\n        this.bufferData(this._stateBuffer, this._model.states);\n        this._changed = true;\n    }\n\n    public getModelState(): number[][] {\n        var result = [];\n        if (this.empty) {\n            return result;\n        }\n\n        var products = this._model.productMaps;\n        for (var i in products) {\n            if (!products.hasOwnProperty(i)) {\n                continue;\n            }\n            var map = products[i];\n            var span = map.spans[0];\n            if (typeof (span) === 'undefined') {\n                continue;\n            }\n\n            var state = this._model.states[span[0] * 2];\n            var style = this._model.states[span[0] * 2 + 1];\n\n            // tslint:disable-next-line: no-bitwise\n            result.push([map.productID, state + (style << 8)]);\n        }\n        return result;\n    }\n\n    public restoreModelState(states: number[][]): void {\n        if (this.empty) {\n            return null;\n        }\n\n        states.forEach((s) => {\n            const id = s[0];\n            // tslint:disable: no-bitwise\n            const style = s[1] >> 8;\n            const state = s[1] - (style << 8);\n\n            var map = this.getProductMap(id);\n            if (map != null) {\n                map.spans.forEach((span) => {\n                    //set state or style\n                    for (var k = span[0]; k < span[1]; k++) {\n                        this._model.states[k * 2] = state;\n                        this._model.states[k * 2 + 1] = style;\n                    }\n                });\n            }\n\n        });\n\n        //buffer data to GPU\n        this.bufferData(this._stateBuffer, this._model.states);\n        this._changed = true;\n    }\n\n    /**\n     * Counts number of triangles for every product. This might be usefull to understand \n     * performance of certain models.\n     * @returns List of product analytical results\n     */\n    public getProductAnalysis(results: ProductAnalyticalResult[]): ProductAnalyticalResult[] {\n        if (results == null) results = [];\n        Object.getOwnPropertyNames(this._model.productMaps).forEach((n) => {\n            const map: ProductMap = this._model.productMaps[n];\n            const indexCount = map.spans.reduce((p, c) => {\n                return p + c[1] - c[0];\n            }, 0);\n            const boxSize = Math.max(map.bBox[3], map.bBox[4], map.bBox[5]);\n            const volume = Math.sqrt(map.bBox[3] * map.bBox[3] + map.bBox[4] * map.bBox[4] + map.bBox[5] * map.bBox[5]);\n            results.push({\n                modelId: this.id,\n                numberOfTriangles: indexCount / 3,\n                productId: map.productID,\n                size: boxSize,\n                volume: volume,\n                density: indexCount / 3 / volume\n            });\n        });\n        return results;\n    }\n}\n\nexport enum DrawMode {\n    SOLID,\n    TRANSPARENT\n}\n","export class ModelPointers {\n    public NormalAttrPointer: number;\n    public IndexlAttrPointer: number;\n    public ProductAttrPointer: number;\n    public StateAttrPointer: number;\n    public StyleAttrPointer: number;\n    public TransformationAttrPointer: number;\n\n    public VertexSamplerUniform: WebGLUniformLocation;\n    public MatrixSamplerUniform: WebGLUniformLocation;\n    public StyleSamplerUniform: WebGLUniformLocation;\n    public VertexTextureSizeUniform: WebGLUniformLocation;\n    public MatrixTextureSizeUniform: WebGLUniformLocation;\n    public StyleTextureSizeUniform: WebGLUniformLocation;\n    public MeterUniform: WebGLUniformLocation;\n    public WcsUniform: WebGLUniformLocation;\n\n    public ClippingAUniform: WebGLUniformLocation;\n    public ClippingBUniform: WebGLUniformLocation;\n    public ClippingPlaneAUniform: WebGLUniformLocation;\n    public ClippingPlaneBUniform: WebGLUniformLocation;\n\n    constructor(gl: WebGLRenderingContext, program: WebGLProgram) {\n\n        //get attribute pointers\n        this.NormalAttrPointer = gl.getAttribLocation(program, 'aNormal');\n        this.IndexlAttrPointer = gl.getAttribLocation(program, 'aVertexIndex');\n        this.ProductAttrPointer = gl.getAttribLocation(program, 'aProduct');\n        this.StateAttrPointer = gl.getAttribLocation(program, 'aState');\n        this.StyleAttrPointer = gl.getAttribLocation(program, 'aStyleIndex');\n        this.TransformationAttrPointer = gl.getAttribLocation(program, 'aTransformationIndex');\n\n        //get uniform pointers\n        this.VertexSamplerUniform = gl.getUniformLocation(program, 'uVertexSampler');\n        this.MatrixSamplerUniform = gl.getUniformLocation(program, 'uMatrixSampler');\n        this.StyleSamplerUniform = gl.getUniformLocation(program, 'uStyleSampler');\n        this.VertexTextureSizeUniform = gl.getUniformLocation(program, 'uVertexTextureSize');\n        this.MatrixTextureSizeUniform = gl.getUniformLocation(program, 'uMatrixTextureSize');\n        this.StyleTextureSizeUniform = gl.getUniformLocation(program, 'uStyleTextureSize');\n        this.ClippingPlaneAUniform = gl.getUniformLocation(program, 'uClippingPlaneA');\n        this.ClippingAUniform = gl.getUniformLocation(program, 'uClippingA');\n        this.ClippingPlaneBUniform = gl.getUniformLocation(program, 'uClippingPlaneB');\n        this.ClippingBUniform = gl.getUniformLocation(program, 'uClippingB');\n        this.MeterUniform = gl.getUniformLocation(program, 'uMeter');\n        this.WcsUniform = gl.getUniformLocation(program, 'uWcs');\n\n\n        //enable vertex attributes arrays\n        gl.enableVertexAttribArray(this.NormalAttrPointer);\n        gl.enableVertexAttribArray(this.IndexlAttrPointer);\n        gl.enableVertexAttribArray(this.ProductAttrPointer);\n        gl.enableVertexAttribArray(this.StateAttrPointer);\n        gl.enableVertexAttribArray(this.StyleAttrPointer);\n        gl.enableVertexAttribArray(this.TransformationAttrPointer);\n    }\n}\n","import { Viewer } from \"../viewer\";\nimport { mat4, vec3, quat } from \"gl-matrix\";\n\n/**\n * @category Core\n */\nexport enum EasingType {\n    LINEAR,\n    SINUS,\n    SINUS2,\n    CIRCLE\n}\n\n/**\n * @category Core\n */\nexport class Animations {\n\n    private requestAnimationFrame: (callback: FrameRequestCallback) => number;\n    private setTimeout: (callback: () => void, offset: number) => void;\n\n    /**\n     * Constructor to handle all animations\n     */\n    constructor(private viewer: Viewer) {\n        // monkey patching protection\n        this.setTimeout = window.setTimeout.bind(window);\n        this.requestAnimationFrame = (window.requestAnimationFrame ||\n            window[\"webkitRequestAnimationFrame\"] ||\n            window[\"mozRequestAnimationFrame\"] ||\n            window[\"oRequestAnimationFrame\"] ||\n            window[\"msRequestAnimationFrame\"] ||\n            function (/* function FrameRequestCallback */ callback: () => void) {\n                window.setTimeout(callback, 1000 / 60);\n            }).bind(window);\n\n        // stop animations when user starts any interaction\n        viewer.canvas.addEventListener('mousedown', () => this.clear());\n        viewer.canvas.addEventListener('touchstart', () => this.clear());\n    }\n\n    /**\n     * Stops all animations and clears the queues\n     */\n    public clear(): void {\n        Animations.viewQueue = [];\n        Animations.zoomQueue = [];\n        this._rotationOn = false;\n    }\n\n    private _rotationOn: boolean = false;\n    public startRotation(): Promise<void> {\n        if (this._rotationOn) {\n            return new Promise<void>((a, r) => { a(); });\n        }\n        this._rotationOn = true;\n        return new Promise<void>((a, r) => {\n            let rotate = () => {\n                if (!this._rotationOn) {\n                    a();\n                    return;\n                }\n                this.viewer.mvMatrix = mat4.rotateZ(mat4.create(), this.viewer.mvMatrix, 0.2 * Math.PI / 180.0);\n                this.requestAnimationFrame(rotate);\n            };\n            rotate();\n        });\n    }\n\n    public stopRotation(): void {\n        this._rotationOn = false;\n    }\n\n    private static viewQueue: { mv: mat4, height: number }[] = [];\n\n    /**\n     * Animates transition from the current view to target view. Animations are queued and execuded in sequence.\n     * \n     * @param end Target model view matrix\n     * @param duration Duration of the transition in milliseconds\n     */\n    public viewTo(end: { mv: mat4, height: number }, duration: number, easing: EasingType = EasingType.SINUS2): Promise<void> {\n        return new Promise<void>((resolve, reject) => {\n\n            if (duration <= 0) { // no animation needed.\n                this.viewer.mvMatrix = end.mv;\n                this.viewer.cameraProperties.height = end.height;\n                resolve();\n                return;\n            }\n\n            let start: { mv: mat4, height: number } = null;\n            if (Animations.viewQueue.length > 0) {\n                // use last animation as a start to create a smooth animation\n                start = Animations.viewQueue[Animations.viewQueue.length - 1];\n            } else {\n                // nothing on the queue, just use the current values\n                start = {\n                    mv: mat4.copy(mat4.create(), this.viewer.mvMatrix),\n                    height: this.viewer.cameraProperties.height\n                };\n            }\n\n            // start and end are the same, do nothing and return\n            if (mat4.equals(start.mv, end.mv) && Math.abs(start.height - end.height) < 1e-6) {\n                resolve();\n                return;\n            }\n\n            // decompose the start matrix\n            let startRotation: quat = mat4.getRotation(quat.create(), start.mv);\n            let startScale: vec3 = mat4.getScaling(vec3.create(), start.mv);\n            let startTranslation: vec3 = mat4.getTranslation(vec3.create(), start.mv);\n            let startTime: number = null;\n\n            // decompose final matrix\n            let endRotation = mat4.getRotation(quat.create(), end.mv);\n            let endScale = mat4.getScaling(vec3.create(), end.mv);\n            let endTranslation = mat4.getTranslation(vec3.create(), end.mv);\n\n            Animations.viewQueue.push(end);\n            let step = () => {\n                if (Animations.viewQueue[0] !== end) {\n                    // check we are in the queue\n                    var exist = Animations.viewQueue.filter(m => m === end).pop() != null;\n                    if (!exist) {\n                        // navigation queue was cleared. stop animation\n                        resolve();\n                        return;\n                    }\n\n                    // not our run, just wait, try again later\n                    this.requestAnimationFrame(step);\n                    return;\n                }\n                if (startTime == null) { startTime = Date.now(); }\n                const now = Date.now();\n                if (now < (startTime + duration)) {\n\n                    // linear interpolation of the state\n                    let state = (now - startTime) / duration;\n\n                    // apply easing in and out\n                    switch (easing) {\n                        case EasingType.LINEAR:\n                            // linear is the default\n                            break;\n                        case EasingType.CIRCLE:\n                            state = this.getCircleEasing(state);\n                            break;\n                        case EasingType.SINUS:\n                            state = this.getSinEasing(state);\n                            break;\n                        case EasingType.SINUS2:\n                            state = this.getSinEasing(state);\n                            state = this.getSinEasing(state);\n                            break;\n                        default:\n                            break;\n                    }\n\n                    // interpolate transformation components\n                    let rotation = quat.slerp(quat.create(), startRotation, endRotation, state);\n                    let scale = vec3.lerp(vec3.create(), startScale, endScale, state);\n                    let translation = vec3.lerp(vec3.create(), startTranslation, endTranslation, state);\n                    // interpolate orthogonal view height\n                    let heightDelta = (end.height - start.height) * state;\n\n                    // recompose the matrix\n                    let mv = mat4.fromRotationTranslationScaleOrigin(mat4.create(), rotation, translation, scale, vec3.create());\n                    this.viewer.mvMatrix = mv;\n                    this.viewer.cameraProperties.height = start.height + heightDelta;\n\n                    this.requestAnimationFrame(step);\n                } else { // set exact value, remove from the queue and resolve promise\n                    this.viewer.mvMatrix = end.mv;\n                    this.viewer.cameraProperties.height = end.height;\n                    Animations.viewQueue.shift();\n                    resolve();\n                    return;\n                }\n            };\n\n            // start\n            step();\n        });\n\n\n    }\n\n    private static zoomQueue: { mv: mat4, height: number }[] = [];\n    /**\n     * Animates transition from the current view to target view\n     * \n     * @param end Target model view matrix\n     * @param duration Duration of the transition in milliseconds\n     */\n    public addZoom(distance: number, duration: number, direction?: vec3): Promise<void> {\n        // current model view\n        let currentMv = mat4.copy(mat4.create(), this.viewer.mvMatrix);\n        let currentHeight = this.viewer.cameraProperties.height;\n\n        // if there is an animation in progress, zoom should start where that ends\n        if (Animations.zoomQueue.length > 0) {\n            const current = Animations.zoomQueue[Animations.zoomQueue.length - 1];\n            currentMv = current.mv;\n            currentHeight = current.height;\n        }\n\n        // get zoom direction\n        let zoomDirection = vec3.create();\n        if (direction) {\n            direction = vec3.normalize(vec3.create(), direction);\n            vec3.negate(zoomDirection, direction);\n        } else {\n            const inv = mat4.invert(mat4.create(), currentMv);\n            const rotation = mat4.getRotation(quat.create(), inv);\n            const cameraDirection = vec3.transformQuat(vec3.create(), vec3.fromValues(0, 0, -1), rotation);\n            vec3.negate(zoomDirection, cameraDirection);\n        }\n\n        // get movement and orthogonal view height\n        const move = vec3.scale(vec3.create(), zoomDirection, distance);\n        const fov = this.viewer.cameraProperties.fov * Math.PI / 180.0;\n        let deltaHeight = 2.0 * distance * Math.tan(fov / 2.0);\n        const limit = 2.0 * this.viewer.cameraProperties.near * Math.tan(fov / 2.0);\n\n        // avoid singularity where height is negative and image is flipped.\n        if ((currentHeight - deltaHeight) < limit)\n            deltaHeight = 0;\n\n        // final state\n        const end = {\n            mv: mat4.translate(mat4.create(), currentMv, move),\n            height: currentHeight - deltaHeight\n        };\n\n\n        return new Promise<void>((resolve, reject) => {\n            if (duration <= 0) { // no animation needed.\n                Animations.zoomQueue = [];\n                this.viewer.mvMatrix = end.mv;\n                this.viewer.cameraProperties.height = end.height;\n                resolve();\n                return;\n            }\n\n            let startTime: number = null;\n            let endTranslation = move;\n\n            Animations.zoomQueue.push(end);\n            let step = () => {\n                if (Animations.zoomQueue[0] !== end) {\n                    // check we are in the queue\n                    var exist = Animations.zoomQueue.filter(m => m === end).pop() != null;\n                    if (!exist) {\n                        resolve();\n                        return;\n                    }\n\n                    // not our run, just wait, try again later\n                    this.requestAnimationFrame(step);\n                    return;\n                }\n                // first run - set start\n                if (startTime == null)\n                    startTime = Date.now();\n                const now = Date.now();\n                if (now < (startTime + duration)) {\n                    // we always use linear interpolation for zoom because it needs to be smooth when executed in sequence\n                    let state = (now - startTime) / duration;\n                    let translation = vec3.lerp(vec3.create(), vec3.create(), endTranslation, state);\n                    let delta = deltaHeight * state;\n\n                    // set position and perspective width\n                    this.viewer.mvMatrix = mat4.translate(mat4.create(), currentMv, translation);\n                    this.viewer.cameraProperties.height = currentHeight - delta;\n\n                    this.requestAnimationFrame(step);\n                } else { // set exact value, remove from the queue and quit\n                    this.viewer.mvMatrix = end.mv;\n                    this.viewer.cameraProperties.height = end.height;\n                    Animations.zoomQueue.shift();\n                    resolve();\n                    return;\n                }\n            };\n\n            // start\n            step();\n        });\n\n\n    }\n\n    /**\n     * Returns easing spread over circular path\n     * \n     * @param value value between 0.0 and 1.0\n     */\n    private getCircleEasing(value: number): number {\n        // x2 + y2 = r2, r = 1\n        // y = Math.sqtr(r2 - x2)\n        if (value <= 0.5) {\n            const period = value * 2.0;\n            const y = Math.sqrt(1 - period * period);\n            return (1.0 - y) / 2.0;\n        } else {\n            const period = value * 2.0 - 2.0;\n            const y = Math.sqrt(1 - period * period);\n            return (1.0 + y) / 2.0;\n        }\n    }\n\n    private getSinEasing(value: number): number {\n        // apply easing in and out using sinus\n        let period = value * Math.PI - Math.PI / 2.0;\n        return Math.sin(period) * 0.5 + 0.5;\n    }\n}\n","import { Viewer } from \"../viewer\";\nimport { Framebuffer } from \"../framebuffer\";\nimport { mat4, vec3, vec2 } from \"gl-matrix\";\nimport { CameraType } from \"../camera\";\n\nexport class CameraAdjustment {\n    private lastMvChange = 0;\n    private dirty = true;\n    private stopped = true;\n\n    /**\n     * This object can be used to keep orthographic height aligned with the current perspective view and to\n     * keep camera position (distance) right for orthographic view\n     */\n    constructor(\n        private viewer: Viewer,\n        private request: (callback: FrameRequestCallback) => number,\n        private density: number) {\n    }\n\n    public stop() {\n        this.stopped = true;\n    }\n\n    public watch(latency: number = 500) {\n        // without a depth support this doesn't make a sense\n        if (!this.viewer.hasDepthSupport) {\n            return;\n        }\n\n        const request = this.request;\n        const viewer = this.viewer;\n        this.stopped = false;\n\n        const step = () => {\n            if (this.stopped)\n                return;\n\n            // this redraw is likely caused by us\n            if ((Date.now() - this.lastMvChange) < latency + 20) {\n                request(step);\n                return;\n            }\n\n            // user interaction\n            if (viewer.mvMatrixAge < latency) {\n                this.dirty = true;\n                request(step);\n                return;\n            }\n\n            // handled already\n            if (viewer.mvMatrixAge > latency && !this.dirty) {\n                request(step);\n                return;\n            }\n\n            // no height means it is not in any interactive state, not rendering anything.\n            if (!viewer.height) {\n                request(step);\n                return;\n            }\n\n            // adjust view properties\n            this.adjust();\n\n            // clear the flag\n            this.dirty = false;\n            request(step);\n        };\n\n        // start watching\n        request(step);\n    }\n\n    public adjust(density: number = null): void {\n        const viewer = this.viewer;\n        density = density || this.density;\n\n        if (!viewer.hasDepthSupport)\n            return;\n\n        // only run adjustment if there is something to see\n        if (!viewer.isRunning || viewer.activeHandles.length === 0)\n            return;\n\n        // make it smaller (therefore lower the resolution)\n        const width = viewer.width / 4.0;\n        const height = viewer.height / 4.0;\n\n        if (width === 0 || height === 0) {\n            return;\n        }\n\n        var fb = new Framebuffer(viewer.gl, width, height, true, this.viewer.glVersion);\n        viewer.draw(fb, true);\n\n        // create the analytical matrix of points based on density and current width and height\n        const points: { x: number, y: number }[] = [];\n        const dw = width / (density + 1);\n        const dh = height / (density + 1);\n        for (let i = 1; i < (density + 1); i++) {\n            const x = i * dw;\n            for (let j = 1; j < (density + 1); j++) {\n                const y = j * dh;\n                points.push({ x, y });\n            }\n        }\n\n        // plain average weights\n        const weights = points.map(p => 1);\n\n        // get non-null xyz in clip space\n        const clipPoints = fb.getXYZArray(points)\n            // enrich the result with weights\n            .map((p, i) => {\n                if (p == null)\n                    return null;\n                return { point: p, weight: weights[i] }\n            })\n            .filter(p => p != null);\n\n        if (clipPoints.length === 0) {\n            return;\n        }\n\n        // convert to view space\n        const pMatrix = viewer.cameraProperties.getProjectionMatrix(width, height);\n        // const matrix = mat4.multiply(mat4.create(), pMatrix, viewer.mvMatrix);\n        const inv = mat4.invert(mat4.create(), pMatrix);\n        const viewPoints = clipPoints.map(p => ({ point: vec3.transformMat4(vec3.create(), p.point, inv), weight: p.weight }));\n\n        // z dimension is distance from camera in view space\n        const distances = viewPoints.map(p => ({ distance: -p.point[2], weight: p.weight }));\n\n        // average distance in the view\n        const distance = this.trimmedMean(distances);\n        const fov = viewer.cameraProperties.fov * Math.PI / 180.0;\n\n        // in perspective camera, adjust orthographic height\n        if (viewer.camera === CameraType.PERSPECTIVE) {\n            const optimalHeight = 2.0 * distance * Math.tan(fov / 2.0);\n            // setting height when camera mode is 'PERSPECTIVE' doesn't cause redraw. This will not cause a redraw loop\n            viewer.cameraProperties.height = optimalHeight;\n        }\n\n        // in orthographic camera, adjust camera distance from subject\n        if (viewer.camera === CameraType.ORTHOGONAL) {\n            const dir = vec3.normalize(vec3.create(), viewer.getCameraDirection());\n            const h = viewer.cameraProperties.height;\n            const optimalDistance = h / (2.0 * Math.tan(fov / 2));\n\n            // only move if the difference is more than 10% (either side) to avoid the redraw loop\n            const check = optimalDistance / distance;\n            if (check > 1.1 || check < 0.9) {\n                const delta = optimalDistance - distance;\n                const move = vec3.scale(vec3.create(), dir, delta);\n\n                viewer.mvMatrix = mat4.translate(mat4.create(), viewer.mvMatrix, move);\n                this.lastMvChange = Date.now();\n            }\n        }\n    }\n\n    private trimmedMean(values: { distance: number, weight: number }[]): number {\n        // don't trim if there are less than 100 values, calculate weighted mean\n        if (values.length > 100) {\n            // sort as numbers (default algorithm sorts as strings)\n            values.sort((a, b) => a.distance - b.distance);\n\n            // cut off top and bottom 10% to get rid of outliers\n            const cutOff = Math.floor(values.length / 10);\n            values = values.slice(cutOff, values.length - cutOff);\n        }\n\n        // return trimmed weighted mean value\n        return values.reduce((previous, current) => previous + current.distance * current.weight, 0) /\n            values.reduce((previous, current) => previous + current.weight, 0);\n    }\n}","export * from './camera-adjustment';\nexport { EasingType, Animations } from './animations';","import { Viewer } from \"../viewer\";\nimport { vec3 } from \"gl-matrix\";\n\nexport class KeyboardNavigation {\n    public static initKeyboardEvents(viewer: Viewer) {\n\n        //listen to key events to support WASD and cursor nav\n        document.addEventListener('keydown', (event: KeyboardEvent) => {\n\n            if (viewer.navigationMode !== \"walk\") {\n                return;\n            }\n\n            const getPanOrigin = (): vec3 => {\n                // data from the middle point of the viewer\n                const dir = viewer.getCameraDirection();\n                const eye = viewer.getCameraPosition();\n                const dist = viewer.unitsInMeter * 10;\n                return vec3.add(vec3.create(), eye, vec3.scale(vec3.create(), dir, dist));\n            }\n\n            //console.log(event);\n            let multiplier = (event.shiftKey === true) ? 3 : 1;\n\n            switch (event.code) {\n                case 'KeyW':\n                    // origin is not used\n                    viewer.navigate('walk', 0, 2 * multiplier, vec3.create());\n                    break;\n\n                case 'KeyS':\n                    // origin is not used\n                    viewer.navigate('walk', 0, -2 * multiplier, vec3.create());\n                    break;\n\n                case 'KeyA':\n                    viewer.navigate('pan', 4 * multiplier, 0, getPanOrigin());\n                    break;\n\n                case 'KeyD':\n                    viewer.navigate('pan', -4 * multiplier, 0, getPanOrigin());\n                    break;\n\n                case 'KeyR':\n                case 'ArrowUp':\n                    viewer.navigate('pan', 0, 4 * multiplier, getPanOrigin());\n                    break;\n\n                case 'KeyF':\n                case 'ArrowDown':\n                    viewer.navigate('pan', 0, -4 * multiplier, getPanOrigin());\n                    break;\n\n                case 'KeyQ':\n                case 'ArrowLeft':\n                    viewer.navigate('look-around', 2, 0, viewer.getCameraPosition());\n                    break;\n\n                case 'KeyE':\n                case 'ArrowRight':\n                    viewer.navigate('look-around', -2, 0, viewer.getCameraPosition());\n                    break;\n\n            }\n        }, false);\n\n    }\n}\n","import { Viewer } from \"../viewer\";\nimport { ProductIdentity } from \"../common/product-identity\";\nimport { vec3, mat4, quat, vec2 } from \"gl-matrix\";\n\nexport class MouseNavigation {\n    public static initMouseEvents(viewer: Viewer) {\n        let mouseDown = false;\n        let lastMouseX = null;\n        let lastMouseY = null;\n        let startX = null;\n        let startY = null;\n        let button = 'L';\n        let id = -1;\n        let modelId = -1;\n        let xyz: vec3 = null;\n        let isPointerLocked = false;\n\n        let origin = vec3.create();\n\n        //set initial conditions so that different gestures can be identified\n        const handleMouseDown = (event: MouseEvent) => {\n            mouseDown = true;\n            lastMouseX = event.clientX;\n            lastMouseY = event.clientY;\n            startX = event.clientX;\n            startY = event.clientY;\n\n            //get coordinates within canvas (with the right orientation)\n            let r = viewer.canvas.getBoundingClientRect();\n            let viewX = startX - r.left;\n            let viewY = viewer.height - (startY - r.top);\n\n            //this is for picking\n            const data = viewer.getEventData(viewX, viewY);\n            if (data == null) {\n                mouseDown = false;\n                return;\n            }\n\n            id = data.id;\n            modelId = data.model;\n            xyz = data.xyz;\n\n            if (viewer.navigationMode === 'locked-orbit') {\n                origin = viewer.lockedOrbitOrigin;\n            } else  if (data == null || data.id == null || data.model == null) {\n                const region = viewer.getMergedRegion();\n                if (region == null || region.centre == null) {\n                    // there is nothing in the viewer\n                    mouseDown = false;\n                    return;\n                }\n                origin = vec3.fromValues(region.centre[0], region.centre[1], region.centre[2]);\n            } else if (data.xyz == null) {\n                const bb = viewer.getTargetBoundingBox(data.id, data.model);\n                origin = vec3.fromValues(bb[0] + bb[3] / 2.0, bb[1] + bb[4] / 2.0, bb[2] + bb[5] / 2.0);\n            } else {\n                origin = data.xyz\n            }\n\n            //keep information about the mouse button\n            switch (event.button) {\n                case 0:\n                    button = 'left';\n                    break;\n\n                case 1:\n                    button = 'middle';\n                    break;\n\n                case 2:\n                    button = 'right';\n                    break;\n\n                default:\n                    button = 'left';\n                    break;\n            }\n\n            viewer.disableTextSelection();\n        };\n\n        const handleMouseUp = (event: MouseEvent) => {\n            if (!mouseDown)\n                return;\n\n            mouseDown = false;\n\n            const endX = event.clientX;\n            const endY = event.clientY;\n\n            const deltaX = Math.abs(endX - startX);\n            const deltaY = Math.abs(endY - startY);\n\n            //if it was a longer movement do not perform picking\n            if (deltaX < 3 && deltaY < 3 && button === 'left') {\n\n                /**\n                * Occurs when user click on model.\n                *\n                * @event Viewer#pick\n                * @type {object}\n                * @param {Number} id - product ID of the element or null if there wasn't any product under mouse\n                * @param {Number} model - Model ID\n                * @param {MouseEvent} event - Original HTML event\n                */\n                viewer.fire('pick', { id: id, model: modelId, event: event, xyz: xyz });\n                // Handle double-click\n                let time = (new Date()).getTime();\n                if (time - timer < 250) {\n                    viewer.fire('dblclick', { id: id, model: modelId, event: event, xyz: xyz });\n                }\n                timer = time;\n            }\n\n            viewer.enableTextSelection();\n        };\n\n\n        var handleLookAround = (event: MouseEvent) => {\n            const sensitivity = 0.5;\n            if (viewer.navigationMode !== 'walk') {\n                return;\n            }\n\n            viewer.navigate('look-at', event.movementX * sensitivity, event.movementY * sensitivity, origin);\n\n        };\n\n        var handleMouseMove = (event: MouseEvent) => {\n            if (viewer.hoverPickEnabled && !mouseDown && viewer.navigationMode !== 'walk') {\n\n                //get coordinates within canvas (with the right orientation)\n                let r = viewer.canvas.getBoundingClientRect();\n                let viewX = event.clientX - r.left;\n                let viewY = viewer.height - (event.clientY - r.top);\n                const data = viewer.getEventData(viewX, viewY);\n\n                viewer.setHoverPick(data.id, data.model);\n                viewer.fire('hoverpick', { id: data.id, model: data.model, event: event, xyz: data.xyz });\n            }\n            if (!mouseDown) {\n                return;\n            }\n\n            if (viewer.navigationMode === 'none') {\n                return;\n            }\n\n            var newX = event.clientX;\n            var newY = event.clientY;\n\n            var deltaX = newX - lastMouseX;\n            var deltaY = newY - lastMouseY;\n\n            lastMouseX = newX;\n            lastMouseY = newY;\n\n            if (button === 'left') {\n                if (event.shiftKey) {\n                    viewer.navigate('pan', deltaX, deltaY, origin);\n                } else {\n                    switch (viewer.navigationMode) {\n                        case 'free-orbit':\n                            viewer.navigate('free-orbit', deltaX, deltaY, origin);\n                            break;\n\n                        case 'locked-orbit':\n                            viewer.navigate('locked-orbit', deltaX, deltaY, origin);\n                        case 'fixed-orbit':\n                        case 'orbit':\n                            viewer.navigate('orbit', deltaX, deltaY, origin);\n                            break;\n\n                        case 'pan':\n                            viewer.navigate('pan', deltaX, deltaY, origin);\n                            break;\n\n                        case 'zoom':\n                            viewer.navigate('zoom', deltaX, deltaY, origin);\n                            break;\n\n                        case 'look-around':\n                            viewer.navigate('look-around', deltaX, deltaY, origin);\n                            break;\n\n                        default:\n                            break;\n                    }\n                }\n            }\n            if (button === 'middle' || button === 'right') {\n                viewer.navigate('pan', deltaX, deltaY, origin);\n            }\n\n        };\n\n        let scrollOrigin: vec3 = null;\n        let lastScrollPoint: vec2 = null;\n        let scrollCounter = 0;\n        var handleMouseScroll = (event: WheelEvent) => {\n            try {\n                if (viewer.navigationMode === 'none') {\n                    return;\n                }\n                if (event.stopPropagation) {\n                    event.stopPropagation();\n                }\n                if (event.preventDefault) {\n                    event.preventDefault();\n                }\n    \n                scrollCounter++;\n                const scrollPoint = vec2.fromValues(event.clientX, event.clientY);\n                if (lastScrollPoint == null || vec2.dist(lastScrollPoint, scrollPoint) > 5 || scrollCounter > 10) {\n                    scrollOrigin = viewer.getInteractionOrigin(event);\n                    \n                    if (scrollOrigin == null) {\n                        var region = viewer.getMergedRegion();\n    \n                        if(region && region.centre) {\n                            var centre = vec3.fromValues(region.centre[0], region.centre[1], region.centre[2]);\n                            var eye = viewer.getCameraPosition();\n                            var distance = vec3.distance(centre,  eye);\n                            var trans = mat4.invert(mat4.create(), viewer.mvMatrix);\n                            var rotation = mat4.getRotation(quat.create(), trans);\n                            var dir = vec3.normalize(vec3.create(), vec3.transformQuat(vec3.create(), [0,0,-1], rotation));\n                            var move = vec3.scale(vec3.create(), dir, distance);\n                            scrollOrigin = vec3.add(vec3.create(), move, eye);\n                        }\n                    }\n    \n                    lastScrollPoint = scrollPoint;\n                    scrollCounter = 0;\n                } \n                \n    \n                var sign = (x: any) => {\n                    x = +x; // convert to a number\n                    if (x === 0 || isNaN(x)) {\n                        return x;\n                    }\n                    return x > 0 ? 1 : -1;\n                };\n    \n                //deltaX and deltaY have very different values in different web browsers so fixed value is used for constant functionality.\n                viewer.navigate('zoom', sign(event.deltaX) * -1.0, sign(event.deltaY) * -1.0, scrollOrigin);\n            } catch(e){\n                console.error(e);\n            }\n        };\n\n        // handle mouse movements when using PointerLock mode.\n        var handlePointerLockChange = (event: Event) => {\n            const lockElement = document.pointerLockElement as HTMLElement;\n            if (lockElement === viewer.canvas) {\n                if (!isPointerLocked) {\n                    isPointerLocked = true;\n                    viewer.canvas.addEventListener('mousemove', handleLookAround, false);\n                }\n            } else {\n                isPointerLocked = false;\n                viewer.canvas.removeEventListener(\"mousemove\", handleLookAround, false);\n            }\n        };\n\n        // handle pointer lock for walk mode to grab the mouse movement data\n        let requestPointerLock = viewer.canvas.requestPointerLock as () => void;\n        if (requestPointerLock != null) {\n            requestPointerLock = requestPointerLock.bind(viewer.canvas) as () => void;\n            viewer.canvas.onclick = () => {\n                if (viewer.navigationMode === 'walk' && !isPointerLocked) {\n                    requestPointerLock();\n                }\n            };\n        }\n\n        document.addEventListener('pointerlockchange', handlePointerLockChange, false);\n\n        var timer = 0;\n        //attach callbacks\n        viewer.canvas.addEventListener('mousedown', (event) => handleMouseDown(event), true);\n        viewer.canvas.addEventListener('wheel', (event) => handleMouseScroll(event), true);\n        window.addEventListener('mouseup', (event) => handleMouseUp(event), true);\n        window.addEventListener('mousemove', (event) => handleMouseMove(event), true);\n    }\n}","import { Viewer } from \"../viewer\";\nimport { vec3, mat4 } from \"gl-matrix\";\nimport { VectorUtils } from \"../common/vector-utils\";\n\nexport class PreflightCheck {\n    public static findView(viewer: Viewer, elements: { id: number, model: number }[], density: number): { mv: mat4, height: number } {\n        if (elements == null || elements.length === 0)\n            return null;\n\n        // merged bounding box\n        const bBox = viewer.getTargetsBoundingBox(elements);\n        if(bBox == null) {\n            return null; // element not in model;\n        }\n        const directions = [\n            // 8 base horizontal view directions\n            { dir: [1, 0, 0], up: [0, 0, 1] },\n            { dir: [0, 1, 0], up: [0, 0, 1] },\n            { dir: [-1, 0, 0], up: [0, 0, 1] },\n            { dir: [0, -1, 0], up: [0, 0, 1] },\n            { dir: [1, 1, 0], up: [0, 0, 1] },\n            { dir: [-1, -1, 0], up: [0, 0, 1] },\n            { dir: [-1, 1, 0], up: [0, 0, 1] },\n            { dir: [1, -1, 0], up: [0, 0, 1] },\n            // top view\n            // { dir: [0, 0, -1], up: [0, 1, 0] }\n        ]\n            .map(d => ({ dir: vec3.normalize(vec3.create(), VectorUtils.getVec3(d.dir)), up: vec3.normalize(vec3.create(), VectorUtils.getVec3(d.up)) }));\n\n        // only add top view for elements which have significant horizontal dimensions (roof, slab)\n        const boxHorizontalArea = bBox[3] * bBox[4];\n        const boxVerticalAreaX = bBox[3] * bBox[5];\n        const boxVerticalAreaY = bBox[4] * bBox[5];\n        if (boxHorizontalArea > boxVerticalAreaX && boxHorizontalArea > boxVerticalAreaY) {\n            directions.push({\n                dir: vec3.fromValues(0, 0, -1),\n                up: vec3.fromValues(0, 1, 0)\n            });\n            directions.push({\n                dir: vec3.fromValues(0, 0, -1),\n                up: vec3.fromValues(1, 0, 0)\n            });\n        }\n\n        const dW = viewer.width / density;\n        const dH = viewer.height / density;\n        const checkPoints: { x: number, y: number }[] = [];\n        for (let i = 1; i < density; i++) {\n            for (let j = 1; j < 10; j++) {\n                checkPoints.push({ x: i * dW, y: j * dH });\n            }\n        }\n\n        const lookUp: { [id: string]: boolean } = elements.reduce((l, e) => { l[`${e.model}.${e.id}`] = true; return l; }, {});\n\n        // stop to prevent interference with offscreen rendering\n        const isRunning = viewer.isRunning;\n        viewer.stop();\n        const originalMv = viewer.mvMatrix;\n        const originalHeight = viewer.cameraProperties.height;\n        const originalAdaptive = viewer.adaptivePerformanceOn;\n        try {\n            viewer.adaptivePerformanceOn = false;\n            const center = vec3.fromValues(bBox[0] + bBox[3] / 2.0, bBox[1] + bBox[4] / 2.0, bBox[2] + bBox[5] / 2.0);\n\n            // get optimal distances and heights\n            const optimal = directions.map(d => viewer.getDistanceAndHeight(bBox, d.dir, d.up));\n\n            const mvs = optimal.map((o, idx) => {\n                const inv = vec3.negate(vec3.create(), directions[idx].dir);\n                const trans = vec3.scale(vec3.create(), inv, o.distance);\n                const eye = vec3.add(vec3.create(), trans, center);\n                return mat4.lookAt(mat4.create(), eye, center, directions[idx].up);\n            });\n\n            // get matrix of identities\n            const data = mvs.map((mv, idx) => {\n                // set the offscreen view\n                viewer.mvMatrix = mv;\n                viewer.cameraProperties.height = optimal[idx].height;\n                // get data, keep string usable for lookup\n                return viewer.getData(checkPoints).map(e => e != null ? `${e.model}.${e.id}` : null);\n            });\n\n            // how many times we have seen target elements\n            const ratingTypes = data.map(ids => ids.reduce((c, id) => {\n                if (id == null)\n                    return c;\n                if (lookUp[id] === true) {\n                    c.count++;\n                    if (c.types[id] == null)\n                        c.types[id] = 1;\n                    else\n                        c.types[id] = c.types[id] + 1;\n                }\n                return c\n            }, { count: 0, types: {} }));\n            // multiply number of objects hit by number of hits. It is better to see more objects in the view than one large\n            const ratings = ratingTypes.map(c => c.count * Math.pow(Object.getOwnPropertyNames(c.types).length, 2));\n\n            let maxIdx = 0;\n            let maxRating = 0;\n            ratings.forEach((r, idx) => { if (r > maxRating) { maxRating = r; maxIdx = idx; } });\n\n            return maxRating > 0 ? { mv: mvs[maxIdx], height: optimal[maxIdx].height } : null;\n        }\n        catch(ex)\n        {\nconsole.error(ex);\n        }\n        finally {\n            viewer.mvMatrix = originalMv;\n            if (originalHeight != null && originalHeight > 0)\n                viewer.cameraProperties.height = originalHeight;\n            viewer.adaptivePerformanceOn = originalAdaptive;\n            if (isRunning) viewer.start();\n        }\n\n\n    }\n}","import { Viewer } from \"../viewer\";\nimport { ProductIdentity } from \"../common/product-identity\";\nimport { vec3 } from \"gl-matrix\";\n\nexport class TouchNavigation {\n    public static initTouchNavigationEvents(viewer: Viewer) {\n\n        let lastTouchX_1: number;\n        let lastTouchY_1: number;\n        let lastTouchX_2: number;\n        let lastTouchY_2: number;\n\n        let origin = vec3.create();\n\n        const handleTouchStart = (event: TouchEvent) => {\n            if (event.cancelable)\n                event.preventDefault();\n\n            if (event.touches.length >= 1) {\n                lastTouchX_1 = event.touches[0].clientX;\n                lastTouchY_1 = event.touches[0].clientY;\n            }\n            if (event.touches.length >= 2) {\n                lastTouchX_2 = event.touches[1].clientX;\n                lastTouchY_2 = event.touches[1].clientY;\n            }\n\n            const data = viewer.getEventDataFromEvent(event.touches[0]);\n            if (data == null || data.id == null || data.model == null) {\n                const region = viewer.getMergedRegion();\n                origin = vec3.fromValues(region.centre[0], region.centre[1], region.centre[2]);\n            } else if (data.xyz == null) {\n                const bb = viewer.getTargetBoundingBox(data.id, data.model);\n                origin = vec3.fromValues(bb[0] + bb[3] /2.0, bb[1] + bb[4] /2.0, bb[2] + bb[5] /2.0);\n            } else {\n                origin = data.xyz\n            }\n        };\n\n        const handleTouchMove = (event: TouchEvent) => {\n            if (event.cancelable)\n                event.preventDefault();\n            if (viewer.navigationMode === 'none' || !event.touches) {\n                return;\n            }\n            if (event.touches.length === 1) {\n                // touch move with single finger -> orbit\n                var deltaX = event.touches[0].clientX - lastTouchX_1;\n                var deltaY = event.touches[0].clientY - lastTouchY_1;\n                lastTouchX_1 = event.touches[0].clientX;\n                lastTouchY_1 = event.touches[0].clientY;\n                // force-setting navigation mode to 'free-orbit' currently for touch navigation since regular orbit\n                // feels awkward and un-intuitive on touch devices\n                // MC: I prefer fixed orbit as it doesn't allow for wierd angles\n                if (viewer.navigationMode === 'locked-orbit') {\n                    viewer.navigate('locked-orbit', deltaX / 1.5 , deltaY / 1.5, viewer.lockedOrbitOrigin);\n                } else {\n                    viewer.navigate('orbit', deltaX / 1.5 , deltaY / 1.5, origin);\n                }\n            } else if (event.touches.length >= 2) {\n                // touch move with two fingers -> zoom\n                const distanceBefore = Math.sqrt((lastTouchX_1 - lastTouchX_2) * (lastTouchX_1 - lastTouchX_2) +\n                    (lastTouchY_1 - lastTouchY_2) * (lastTouchY_1 - lastTouchY_2));\n                const middleBefore = [(lastTouchX_1 + lastTouchX_2) / 2.0, (lastTouchY_1 + lastTouchY_2) / 2.0]\n                lastTouchX_1 = event.touches[0].clientX;\n                lastTouchY_1 = event.touches[0].clientY;\n                lastTouchX_2 = event.touches[1].clientX;\n                lastTouchY_2 = event.touches[1].clientY;\n                const distanceAfter = Math.sqrt((lastTouchX_1 - lastTouchX_2) * (lastTouchX_1 - lastTouchX_2) +\n                    (lastTouchY_1 - lastTouchY_2) * (lastTouchY_1 - lastTouchY_2));\n                const middleAfter = [(lastTouchX_1 + lastTouchX_2) / 2.0, (lastTouchY_1 + lastTouchY_2) / 2.0]\n\n                // only zoom if there are exactly 2 fingers on the screen\n                if (event.touches.length === 2){\n                    const delta = distanceBefore - distanceAfter;\n                    if (delta > 10) {\n                        viewer.navigate('zoom', -1.5, -1.5, origin); // Zooming out, fingers are getting closer together\n                    } else if (delta < -10) {\n                        viewer.navigate('zoom', 1.5, 1.5, origin); // zooming in, fingers are getting further apart\n                    }\n                }\n\n                // also pan so it is possible to zoom and pan at the same time\n                const dX = middleAfter[0] - middleBefore[0];\n                const dY = middleAfter[1] - middleBefore[1];\n                viewer.navigate('pan', dX, dY, origin);\n            } \n        }\n\n        viewer.canvas.addEventListener('touchstart', (event) => handleTouchStart(event), true);\n        viewer.canvas.addEventListener('touchmove', (event) => handleTouchMove(event), true);\n    }\n\n    public static initTouchTapEvents(viewer: Viewer) {\n        var touchDown = false;\n        var lastTouchX: number;\n        var lastTouchY: number;\n        var maximumLengthBetweenDoubleTaps = 200;\n        var lastTap = new Date();\n\n        let data: { id: number, model: number, xyz: vec3 } = { id: null, model: null, xyz: null };\n\n        //set initial conditions so that different gestures can be identified\n        var handleTouchStart = (event: TouchEvent) => {\n            if (event.touches.length !== 1) {\n                return;\n            }\n\n\n            touchDown = true;\n            lastTouchX = event.touches[0].clientX;\n            lastTouchY = event.touches[0].clientY;\n            //get coordinates within canvas (with the right orientation)\n            var r = viewer.canvas.getBoundingClientRect();\n            var viewX = lastTouchX - r.left;\n            var viewY = viewer.height - (lastTouchY - r.top);\n\n            //viewer is for picking\n            data = viewer.getEventData(viewX, viewY);\n\n            var now = new Date();\n            var isDoubleTap = (now.getTime() - lastTap.getTime()) < maximumLengthBetweenDoubleTaps;\n            if (isDoubleTap) {\n                viewer.fire('dblclick', { id: data.id, model: data.model, event: event, xyz: data.xyz });\n            };\n            lastTap = now;\n\n            /**\n            * Occurs when mousedown event happens on underlying canvas.\n            *\n            * @event Viewer#mouseDown\n            * @type {object}\n            * @param {Number} id - product ID of the element or null if there wasn't any product under mouse\n            * @param {Number} model - model ID\n            * @param {MouseEvent} event - original HTML event\n            */\n            viewer.fire('mousedown', { id: data.id, model: data.model, event: event, xyz: data.xyz });\n\n            viewer.disableTextSelection();\n        };\n\n        var handleTouchEnd = (event: TouchEvent) => {\n            if (!touchDown) {\n                return;\n            }\n            touchDown = false;\n\n            var endX = event.changedTouches[0].clientX;\n            var endY = event.changedTouches[0].clientY;\n\n            var deltaX = Math.abs(endX - lastTouchX);\n            var deltaY = Math.abs(endY - lastTouchY);\n\n            //if it was a longer movement do not perform picking\n            if (deltaX < 3 && deltaY < 3) {\n\n                viewer.fire('pick', { id: data.id, model: data.model, event: event, xyz: data.xyz });\n            }\n\n            viewer.enableTextSelection();\n        };\n\n\n        viewer.canvas.addEventListener('touchstart', (event) => handleTouchStart(event), true);\n        viewer.canvas.addEventListener('touchend', (event) => handleTouchEnd(event), true);\n    }\n}\n","/**\n * @category Core\n */\nexport enum PerformanceRating {\n    VERY_LOW = 0,\n    LOW = 1,\n    MEDIUM = 2,\n    HIGH = 3\n}\n","export const fshader = \"precision mediump float;\\n\\nvarying vec4 vColor;\\n\\n\\nvoid main(void) {\\n gl_FragColor = vColor;\\n}\"","import { mat4, vec3 } from \"gl-matrix\";\nimport { NavigationMode, Viewer } from \"../../viewer\";\nimport { IPlugin } from \"../plugin\";\nimport { fshader } from \"./fshader\";\nimport { vshader } from \"./vshader\";\nimport { CameraType } from \"../../camera\";\nimport { quat } from \"gl-matrix\";\n\nexport class InteractiveClippingPlane implements IPlugin {\n    private viewer: Viewer;\n    private indices: Uint16Array;\n    private vertices: Float32Array;\n    private colours: Float32Array;\n    private ids: Float32Array;\n\n    private ARROW = 1;\n    private HORIZONTAL = 2;\n    private VERTICAL = 3;\n    private PLANE = 4;\n\n    private arrowColour = [1.0, 0.0, 0.0, 1.0];\n    private horizontalColour = [0.0, 1.0, 0.0, 1.0];\n    private verticalColour = [0.0, 0.0, 1.0, 1.0];\n    private planeColour = [0.5, 0.5, 0.5, 0.05];\n    private currentInteraction: number = -1;\n\n    private program: WebGLProgram;\n    private vertex_buffer: WebGLBuffer;\n    private colours_buffer: WebGLBuffer;\n    private id_buffer: WebGLBuffer;\n    private index_buffer: WebGLBuffer;\n\n    private coordinatesAttributePointer: number;\n    private coloursAttributePointer: number;\n    private idsAttributePointer: number;\n\n    private mvUniformPointer: WebGLUniformLocation;\n    private pUniformPointer: WebGLUniformLocation;\n    private idCodingUniformPointer: WebGLUniformLocation;\n    private idSelectedIdUniformPointer: WebGLUniformLocation;\n    private hoverPickColourUniformPointer: WebGLUniformLocation;\n    private initialized = false;\n    private transformation: mat4 = mat4.create();\n    private mvMatrix: mat4 = mat4.create();\n    private _hoverPickColour: number[] = [10, 150, 112, 255];\n\n    /**\n     * Set to true to stop rendering of this plugin\n     */\n    public get stopped(): boolean { return this._stopped; }\n    public set stopped(value: boolean) {\n        this._stopped = value;\n        if (value === false) {\n            var region = this.viewer.getMergedRegion();\n            var size = Math.sqrt(region.bbox[3] * region.bbox[3] + region.bbox[4] * region.bbox[4] + region.bbox[5] * region.bbox[5])\n            this.setActive();\n            const controlsSize = Math.max(this.viewer.unitsInMeter * 0.5, size * 0.05);\n            this.bufferGeometry(controlsSize, size)\n            this.updateTransformationFromPlane();\n            this.applyCurrentPlane();\n        }\n        if (this.viewer) {\n            this.viewer.draw();\n        }\n    }\n    private _stopped = true;\n\n    init(viewer: Viewer): void {\n        this.viewer = viewer;\n\n        const gl = viewer.gl;\n\n        this.initShader();\n        gl.useProgram(this.program);\n\n        // create vertex buffer\n        this.index_buffer = gl.createBuffer();\n        this.vertex_buffer = gl.createBuffer();\n        this.colours_buffer = gl.createBuffer();\n        this.id_buffer = gl.createBuffer();\n\n        // Get the attribute location\n        this.coordinatesAttributePointer = gl.getAttribLocation(this.program, \"aVertex\");\n        this.coloursAttributePointer = gl.getAttribLocation(this.program, \"aColour\");\n        this.idsAttributePointer = gl.getAttribLocation(this.program, \"aId\");\n\n        // bind buffers\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertex_buffer);\n        gl.vertexAttribPointer(this.coordinatesAttributePointer, 3, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.colours_buffer);\n        gl.vertexAttribPointer(this.coloursAttributePointer, 4, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id_buffer);\n        gl.vertexAttribPointer(this.idsAttributePointer, 1, gl.FLOAT, false, 0, 0);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices, gl.STATIC_DRAW);\n\n        // Enable the attributes\n        gl.enableVertexAttribArray(this.coordinatesAttributePointer);\n        gl.enableVertexAttribArray(this.coloursAttributePointer);\n        gl.enableVertexAttribArray(this.idsAttributePointer);\n\n        // get uniform locations\n        this.pUniformPointer = gl.getUniformLocation(this.program, \"uPMatrix\");\n        this.mvUniformPointer = gl.getUniformLocation(this.program, \"uMvMatrix\");\n        this.idCodingUniformPointer = gl.getUniformLocation(this.program, \"uColorCoding\");\n        this.idSelectedIdUniformPointer = gl.getUniformLocation(this.program, \"uSelectedId\");\n        this.hoverPickColourUniformPointer = gl.getUniformLocation(this.program, 'uHoverPickColour');\n\n        this.bufferGeometry(1, 1);\n\n        this.initEvents();\n\n        this.initialized = true;\n        this.updateTransformationFromPlane();\n        this.applyCurrentPlane();\n    }\n\n    onBeforeDraw(width: number, height: number): void {\n        // this.applyCurrentPlane();\n    }\n\n    onAfterDraw(width: number, height: number): void {\n        if (this.stopped) {\n            return;\n        }\n        var gl = this.setActive();\n\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n\n        //set uniform for colour coding to false\n        gl.uniform1f(this.idCodingUniformPointer, 0);\n        this.draw(gl);\n    }\n\n    onBeforeDrawId(): void { }\n\n    onAfterDrawId(): void {\n        if (this.stopped) {\n            return;\n        }\n        var gl = this.setActive();\n\n        // UI control identity colour coding\n        gl.uniform1f(this.idCodingUniformPointer, 1);   \n        this.draw(gl);\n    }\n\n    onAfterDrawModelId(): void {\n        if (this.stopped) {\n            return;\n        }\n        var gl = this.setActive();\n\n        // model ID colour coding\n        gl.uniform1f(this.idCodingUniformPointer, -1);\n        this.draw(gl);\n    }\n\n    private draw(gl: WebGLRenderingContext): void {\n        if (this.stopped) {\n            return;\n        }\n\n        if (!this.initialized) {\n            return;\n        }\n\n        // set uniforms\n        mat4.multiply(this.mvMatrix, this.viewer.mvMatrix, this.transformation)\n        gl.uniformMatrix4fv(this.pUniformPointer, false, this.viewer.pMatrix);\n        gl.uniformMatrix4fv(this.mvUniformPointer, false, this.mvMatrix);\n        gl.uniform4fv(this.hoverPickColourUniformPointer,\n            new Float32Array(\n                [\n                    this._hoverPickColour[0] / 255.0,\n                    this._hoverPickColour[1] / 255.0,\n                    this._hoverPickColour[2] / 255.0,\n                    this._hoverPickColour[3] / 255.0\n                ]));\n\n        this.viewer.gl.uniform1f(this.idSelectedIdUniformPointer, this.currentInteraction);\n\n        //bind data buffers\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertex_buffer);\n        gl.vertexAttribPointer(this.coordinatesAttributePointer, 3, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id_buffer);\n        gl.vertexAttribPointer(this.idsAttributePointer, 1, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.colours_buffer);\n        gl.vertexAttribPointer(this.coloursAttributePointer, 4, gl.FLOAT, false, 0, 0);\n\n        gl.disable(gl.CULL_FACE);\n        gl.enable(gl.DEPTH_TEST);\n\n        //draw\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\n        gl.drawElements(gl.TRIANGLES, this.indices.length, gl.UNSIGNED_SHORT, 0);\n    }\n\n    private bufferGeometry(size: number, planeSize: number): void {\n        const segments = 50;\n\n        const planeVertices = this.computePlaneVertices(planeSize);\n        const arrowVerticesA = this.computeArrowVertices(size / 3.0, size, size / 1000.0);\n        const arrowVerticesB = this.computeArrowVertices(size / 3.0, size, size / -1000.0);\n        const arrowIndices = this.computeArrowIndices();\n\n        const planeIndices = this.computePlaneIndices();\n        const horizontalRingVertices = this.computeRingVertices(size * 0.9, size * 0.5, segments, (a, b) => [a, b, 0]);\n        const verticalRingVertices = this.computeRingVertices(size * 0.9, size * 0.5, segments, (a, b) => [a, 0, b]);\n        const ringIndices = this.computeRingIndices(segments);\n\n        const vertices: number[] = [];\n        vertices.push(...arrowVerticesA);\n        vertices.push(...arrowVerticesB);\n        vertices.push(...horizontalRingVertices);\n        vertices.push(...verticalRingVertices);\n        vertices.push(...planeVertices);\n        this.vertices = new Float32Array(vertices);\n\n        const indices: number[] = [];\n        indices.push(...arrowIndices);\n        indices.push(...arrowIndices.map(idx => idx + arrowVerticesA.length / 3))\n        indices.push(...ringIndices.map(idx => idx + arrowVerticesA.length / 3 * 2))\n        indices.push(...ringIndices.map(idx => idx + arrowVerticesA.length / 3 * 2 + horizontalRingVertices.length / 3 - 2));\n        indices.push(...planeIndices.map(idx => idx + arrowVerticesA.length / 3 * 2 + horizontalRingVertices.length / 3 * 2));\n        this.indices = new Uint16Array(indices);\n\n        const ids: number[] = [];\n        ids.push(...arrowVerticesA.filter((_, i) => i % 3 === 0).map(() => this.ARROW));\n        ids.push(...arrowVerticesA.filter((_, i) => i % 3 === 0).map(() => this.ARROW));\n        ids.push(...horizontalRingVertices.filter((_, i) => i % 3 === 0).map(() => this.HORIZONTAL));\n        ids.push(...verticalRingVertices.filter((_, i) => i % 3 === 0).map(() => this.VERTICAL));\n        ids.push(...planeVertices.filter((_, i) => i % 3 === 0).map(() => this.PLANE));\n        this.ids = new Float32Array(ids);\n\n\n        const colours: number[] = [];\n        colours.push(...arrowVerticesA.filter((_, i) => i % 3 === 0).flatMap(() => this.arrowColour));\n        colours.push(...arrowVerticesA.filter((_, i) => i % 3 === 0).flatMap(() => this.arrowColour));\n        colours.push(...horizontalRingVertices.filter((_, i) => i % 3 === 0).flatMap(() => this.horizontalColour));\n        colours.push(...verticalRingVertices.filter((_, i) => i % 3 === 0).flatMap(() => this.verticalColour));\n        colours.push(...planeVertices.filter((_, i) => i % 3 === 0).flatMap(() => this.planeColour));\n        this.colours = new Float32Array(colours);\n\n        // bind buffers\n        const gl = this.viewer.gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertex_buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.vertices, gl.STATIC_DRAW);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.colours_buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.colours, gl.STATIC_DRAW);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id_buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.ids, gl.STATIC_DRAW);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.index_buffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices, gl.STATIC_DRAW);\n    }\n\n    private initEvents(): void {\n        let lastMouseX: number = null;\n        let lastMouseY: number = null;\n        let lastNavigation: NavigationMode;\n        let origin: vec3 = null; \n        let originInPlaneSpace: vec3;\n        \n        this.viewer.canvas.addEventListener('pointerdown', event => {\n            // don't do anything if this plugin is not active\n            if (this.stopped || this.viewer.plugins.indexOf(this) < 0) {\n                return;\n            }\n\n            const data = this.viewer.getEventDataFromEvent(event, true);\n            // not an interaction with this UI control\n            if (data.model !== 1000010 || data.id == this.PLANE) {\n                return;\n            }\n            lastMouseX = event.clientX;\n            lastMouseY = event.clientY;\n            lastNavigation = this.viewer.navigationMode;\n            this.viewer.navigationMode = 'none';\n            this.currentInteraction = data.id;\n        });\n\n        window.addEventListener('pointerup', event => {\n            if (this.currentInteraction === -1) return;\n            this.snapToMainAxes();\n            this.applyCurrentPlane();\n            this.currentInteraction = -1;\n            this.viewer.navigationMode = lastNavigation;\n            origin = null;\n        });\n        \n        window.addEventListener('pointermove', event => {\n             \n            if (this.currentInteraction === -1) {\n                return;\n            }\n            const data = this.viewer.getEventDataFromEvent(event, true);\n            if(!origin){\n                origin = data.xyz? data.xyz : vec3.create();\n                originInPlaneSpace = vec3.transformMat4(vec3.create(), origin, mat4.invert(mat4.create(), this.transformation));\n            }\n             \n            var newX = event.clientX;\n            var newY = event.clientY;\n\n            var deltaX = newX - lastMouseX;\n            var deltaY = newY - lastMouseY;\n \n \n            lastMouseX = newX;\n            lastMouseY = newY;\n            const camera = this.viewer.getCameraPosition();\n            const distance = vec3.distance(camera, origin);\n             \n            switch (this.currentInteraction) {\n                case this.ARROW:\n                    let c = 0;\n                    if (this.viewer.camera === CameraType.ORTHOGONAL) {\n                        c = this.viewer.cameraProperties.height / this.viewer.height;\n                    } else {\n                        const fov = this.viewer.cameraProperties.fov * Math.PI / 180;\n                        const h = 2 * distance * Math.tan(fov / 2.0);\n                        c = h / this.viewer.height;\n                    }\n\n                    const draggingOffset = this.getDragOffset(c, deltaX, deltaY);\n                    mat4.translate(this.transformation, this.transformation, draggingOffset);\n\n                    break;\n                case this.HORIZONTAL:\n                    let angle = this.getRotatingAngle(deltaX, deltaY, originInPlaneSpace);\n                    mat4.rotateZ(this.transformation, this.transformation, angle);\n                    break;\n                case this.VERTICAL: \n                    angle = this.getRotatingAngle(deltaX, deltaY, originInPlaneSpace, true);\n                    mat4.rotateY(this.transformation, this.transformation, angle);\n                    break;\n            }\n\n            this.applyCurrentPlane();\n        });\n    }\n\n    private getRotatingAngle(deltaX: number, deltaY: number, originInPlaneSpace: vec3, vertical: boolean = false) : number {\n\n        // project the rotating point origin to screen to work with\n        // screen mouse movemnt vectors\n        const modelViewRotation = mat4.getRotation(quat.create(), this.mvMatrix);\n        const projectedOrigin = vec3.normalize(vec3.create(), vec3.transformQuat(vec3.create(), originInPlaneSpace, modelViewRotation));\n\n        // reverse the angle according to if we are top or bottom of the plane of rotation\n        const camera = this.viewer.getCameraPosition();\n        const planeOfRevert = vertical? this.getTangentPlaneEquation() : this.getPrependicularPlaneEquation();\n        const topOrBottom = (planeOfRevert[0]*camera[0]) + (planeOfRevert[1]*camera[1]) + (planeOfRevert[2]*camera[2]) + (planeOfRevert[3]);\n\n        // mouse movement vector\n       // const displacmentVector = vec3.fromValues(vertical? 0 : deltaX, vertical? -deltaY : 0, 0);\n        const displacmentVector = vec3.fromValues( deltaX, -deltaY , 0);\n\n        // move the rotating origin point with the displacement vector\n        const displacedOrigin = vec3.add(vec3.create(), projectedOrigin, displacmentVector);\n        \n        const displacment = vec3.length(displacmentVector) / 100;\n \n        // we use the vector perpendicular to the plane of rotation to determine\n        // if we are rotating clockwise or anti-clockwise\n        const signVector = vec3.cross(vec3.create(), displacedOrigin, projectedOrigin);\n        vec3.normalize(signVector, signVector); \n\n        return (vertical? -1 : 1) * (topOrBottom > 0 ? -1 : 1) * signVector[2] * displacment;\n    }\n\n    private getDragOffset(speed: number, deltaX: number, deltaY: number) : vec3{\n         \n        const dragAxis = vec3.fromValues(1, 0, 0); \n         \n        // we use this projected screen normal to map mouse movement\n        // to actual drag axis\n        const modelViewRotation = mat4.getRotation(quat.create(), this.mvMatrix); \n        const projectedNormal = vec3.transformQuat(vec3.create(), dragAxis, modelViewRotation);\n        vec3.normalize(projectedNormal, projectedNormal)\n        \n        // calculate offset based on the projected axis orientation\n        const offset = (deltaX * projectedNormal[0]) - (deltaY * projectedNormal[1]);\n         \n        // scale the dragging axis with the deduced offset and speed factor\n        vec3.scale(dragAxis, dragAxis, offset * speed);\n\n        return dragAxis;\n    }\n\n    private updateTransformationFromPlane() {\n        if (this.viewer == null || this.stopped || this.viewer.plugins.indexOf(this) === -1 || this.viewer.activeHandles.length === 0) {\n            return;\n        }\n\n        const plane = this.viewer.getClip()?.PlaneA;\n\n        // no plane is defined, so we shall place it in the middle\n        if (plane == null) {\n            const region = this.viewer.getMergedRegion();\n            this.transformation = mat4.translate(mat4.create(), mat4.create(), region.centre);\n            return;\n        } \n \n        // noraml, tangent and binormal of the plane\n        const normal = vec3.normalize(vec3.create(), vec3.fromValues(plane[0], plane[1], plane[2]));\n        const tangent = this.getTangent(normal);\n        const binormal = vec3.cross(vec3.create(), normal, tangent);\n        vec3.normalize(binormal, binormal);\n\n        // plane point\n        const planePoint = this.getPlanePoint(plane)\n\n        // build transformation\n        const transform = mat4.fromValues(\n            normal[0], normal[1], normal[2], 0,\n            tangent[0], tangent[1], tangent[2], 0,\n            binormal[0], binormal[1], binormal[2], 0,\n            planePoint[0], planePoint[1], planePoint[2], 1);\n          \n            \n        if(this.transformation && this.isTransformationsHasSameOrientation(this.transformation, transform, plane)){\n            return;\n        }\n        this.transformation = transform;\n    }\n\n    private  isTransformationsHasSameOrientation (transform1 :mat4, transform2: mat4, plane: number[]) : boolean{\n        const tolerance = 0.001; \n        // if the two planes has same normal\n        if (Math.abs(transform1[0] - transform2[0]) < tolerance && Math.abs(transform1[1] - transform2[1]) < tolerance && \n            Math.abs(transform1[2] - transform2[2]) < tolerance && Math.abs(transform1[3] - transform2[3]) < tolerance) {\n                // if the new transform placment lies on the older plane\n                return Math.abs((plane[0] * transform2[12]) + (plane[1] * transform2[13]) + (plane[2] * transform2[14]) + plane[3]) < tolerance;\n            }\n    }\n\n    private getPlanePoint(plane: number[]): vec3 {\n\n        const regionCentre = this.viewer.getMergedRegion()?.centre ?? vec3.create();\n        const wcs = this.viewer.getCurrentWcs();\n        var transformed = this.transformPlane(plane, wcs);\n        const normal = vec3.fromValues(transformed[0], transformed[1], transformed[2]);\n        let planePoint : vec3 = null;\n        if(normal[2] != 0){\n            const acc = (normal[0] * regionCentre[0]) + (normal[1] * regionCentre[1]) + transformed[3];\n            planePoint = vec3.fromValues(regionCentre[0], regionCentre[1], -1 * (acc / normal[2]));\n        }\n        else if(normal[1] != 0){\n            const acc = (normal[0] * regionCentre[0]) + (normal[2] * regionCentre[2]) + transformed[3];\n            planePoint = vec3.fromValues(regionCentre[0], -1 * (acc / normal[1]), regionCentre[2]);\n        }\n        else if(normal[0] != 0){\n            const acc = (normal[1] * regionCentre[1]) + (normal[2] * regionCentre[2]) + transformed[3];\n            planePoint = vec3.fromValues(-1 * (acc/ normal[0]), regionCentre[1], regionCentre[2]);\n        }\n        return planePoint;\n    }\n\n    private transformPlane(plane: number[], transform: vec3): Float32Array {\n        // plane components\n        const a = plane[0];\n        const b = plane[1];\n        const c = plane[2];\n        let d = plane[3];\n        const normalLength = vec3.len(vec3.fromValues(a, b, c));\n\n        // point closest to [0,0,0]\n        let x = (a * -d) / normalLength;\n        let y = (b * -d) / normalLength;\n        let z = (c * -d) / normalLength;\n\n        // translate\n        x -= transform[0];\n        y -= transform[1];\n        z -= transform[2];\n\n        //compute new normal equation of the plane\n        d = 0.0 - a * x - b * y - c * z;\n\n        return new Float32Array([a, b, c, d]);\n    }\n\n    private getTangent(normal: vec3): vec3 { \n\n        const between = (x: number, min: number, max: number) => {\n            return x > min && x < max;\n        }\n\n        const x = vec3.fromValues(1, 0, 0);\n        const y = vec3.fromValues(0, 1, 0);\n        const z = vec3.fromValues(0, 0, 1);\n        \n        let tangent : vec3 = null;\n        if(between(vec3.angle(normal, z), 0, Math.PI)) {\n            tangent = vec3.cross(vec3.create(), normal, z);\n        }\n        else if(between(vec3.angle(normal, x), 0, Math.PI)){\n             tangent = vec3.cross(vec3.create(), normal, x);\n        }\n        else if(between(vec3.angle(normal, y), 0, Math.PI)){\n            tangent = vec3.cross(vec3.create(), normal, y);\n        }\n\n        vec3.normalize(tangent, tangent);\n    \n        return tangent;\n    }\n\n    private applyCurrentPlane(): void {\n        if (this.viewer == null || this.stopped || this.viewer.plugins.indexOf(this) === -1 || this.viewer.activeHandles.length === 0) {\n            return;\n        }\n        const plane = this.getPlaneEquation();\n        this.viewer.setClippingPlaneA(plane);\n    }\n\n    private snapToMainAxes(): void {\n        const rotation = mat4.getRotation(quat.create(), this.transformation);\n        const normal = vec3.transformQuat(vec3.create(), vec3.fromValues(1, 0, 0), rotation);\n        const tolerance = Math.PI / 180.0 * 6;\n\n        if (vec3.angle(normal, vec3.fromValues(0, 0, 1)) < tolerance) {\n            const translation = mat4.getTranslation(vec3.create(), this.transformation);\n            const yRoration = quat.rotateY(quat.create(), quat.create(), - Math.PI / 2.0);\n            mat4.fromRotationTranslation(this.transformation, yRoration, translation);\n        }\n        if (vec3.angle(normal, vec3.fromValues(0, 0, -1)) < tolerance) {\n            const translation = mat4.getTranslation(vec3.create(), this.transformation);\n            const yRoration = quat.rotateY(quat.create(), quat.create(), Math.PI / 2.0);\n            mat4.fromRotationTranslation(this.transformation, yRoration, translation);\n        }\n        const proj = vec3.fromValues(normal[0], normal[1], 0);\n        if (vec3.angle(normal, proj) < tolerance) {\n            const translation = mat4.getTranslation(vec3.create(), this.transformation);\n            const roration = quat.rotateZ(quat.create(), quat.create(), Math.atan2(proj[1], proj[0]));\n            mat4.fromRotationTranslation(this.transformation, roration, translation);\n        }\n        \n    }\n\n    private getPlaneEquation(): number[] {\n        const wcs = this.viewer.getCurrentWcs();\n        const point = vec3.transformMat4(vec3.create(), vec3.create(), this.transformation);\n        const normal = this.getPlaneNormal();\n        const normalLength = vec3.len(normal);\n        const d = - (normal[0] * (point[0] + wcs[0])) - (normal[1] * (point[1] + wcs[1])) - (normal[2] * (point[2] + wcs[2]));\n\n        return [normal[0], normal[1], normal[2], d / normalLength];\n    }\n\n    private getPrependicularPlaneEquation(): number[] {\n        const point = vec3.transformMat4(vec3.create(), vec3.create(), this.transformation);\n        const normal = this.getPlaneBinormal();\n        const d = 0.0 - normal[0] * point[0] - normal[1] * (point[1]) - normal[2] * point[2];\n        return [normal[0], normal[1], normal[2], d];\n    }\n\n    private getTangentPlaneEquation(): number[] {\n        const point = vec3.transformMat4(vec3.create(), vec3.create(), this.transformation);\n        const normal = this.getPlaneTangent();\n        const d = 0.0 - normal[0] * point[0] - normal[1] * point[1] - normal[2] * point[2];\n        return [normal[0], normal[1], normal[2], d];\n    }\n\n    private getPlaneNormal(): vec3 {\n        const rotation = mat4.getRotation(quat.create(), this.transformation);\n        return vec3.transformQuat(vec3.create(), vec3.fromValues(1, 0, 0), rotation);\n    }\n\n    private getPlaneBinormal(): vec3 {\n        const rotation = mat4.getRotation(quat.create(), this.transformation);\n        const normal = vec3.transformQuat(vec3.create(), vec3.fromValues(0, 0, 1), rotation);\n        return normal;\n    }\n\n    private getPlaneTangent(): vec3 {\n        const rotation = mat4.getRotation(quat.create(), this.transformation);\n        const normal = vec3.transformQuat(vec3.create(), vec3.fromValues(0, -1, 0), rotation);\n        return normal;\n    }\n\n    private initShader(): void {\n        const gl = this.viewer.gl;\n        const viewer = this.viewer;\n        const compile = (shader: WebGLShader, code: string) => {\n            gl.shaderSource(shader, code);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                let msg = gl.getShaderInfoLog(shader);\n                viewer.error(msg);\n                return null;\n            }\n        };\n\n        // compile shaders\n        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        compile(fragmentShader, fshader);\n\n        const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        compile(vertexShader, vshader);\n\n        //link program\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, vertexShader);\n        gl.attachShader(this.program, fragmentShader);\n        gl.linkProgram(this.program);\n\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            viewer.error('Could not initialise shaders for a navigation cube plugin');\n        }\n    }\n\n    private setActive(): WebGLRenderingContext {\n        var gl = this.viewer.gl;\n        gl.useProgram(this.program);\n        return gl;\n    }\n\n    private computeArrowVertices(width: number, length: number, offset: number): number[] {\n        const arrowRight = [\n            0, offset, -width / 2.0,      // 0\n            length, offset, -width / 2.0, // 1\n            length, offset, width / 2.0,  // 2\n            0, offset, width / 2.0,       // 3\n            length, offset, -width,     // 4\n            length + width, offset, 0,    // 5\n            length, offset, width       // 6\n        ];\n        const arrowLeft = arrowRight.map((v, i) => i % 3 === 0 ? -1 * v : v);\n        return arrowRight.concat(arrowLeft);\n    }\n\n    private computeArrowIndices(): number[] {\n        return [\n            0, 1, 2,\n            0, 2, 3,\n            4, 5, 6,\n\n            9, 8, 7,\n            9, 7, 10,\n            13, 12, 11\n        ];\n    }\n\n    private computeRingVertices(outerRadius: number, innerRadius: number, segments: number, pt: (a: number, b: number) => number[]): number[] {\n        const vertices: number[] = [];\n        for (let i = 0; i <= segments; i++) {\n            const angle = Math.PI * 2.0 / segments * i;\n            const a1 = Math.cos(angle) * innerRadius;\n            const b1 = Math.sin(angle) * innerRadius;\n            const a2 = Math.cos(angle) * outerRadius;\n            const b2 = Math.sin(angle) * outerRadius;\n\n            const pt1 = pt(a1, b1);\n            const pt2 = pt(a2, b2);\n\n            vertices.push(...pt1);\n            vertices.push(...pt2);\n        }\n        return vertices;\n    }\n\n    private computeRingIndices(segments: number): number[] {\n        const indices: number[] = [];\n        for (let i = 0; i <= segments; i++) {\n            const offset = i * 2\n            indices.push(\n                0 + offset, 1 + offset, 2 + offset,\n                1 + offset, 3 + offset, 2 + offset);\n        }\n        return indices;\n    }\n\n    private computePlaneVertices(size: number): number[] {\n        return [\n            0, -size / 2.0, -size / 2.0,\n            0, size / 2.0, -size / 2.0,\n            0, size / 2.0, size / 2.0,\n            0, -size / 2.0, size / 2.0\n        ];\n    }\n\n    private computePlaneIndices(): number[] {\n        return [\n            0, 1, 2,\n            0, 2, 3\n        ];\n    }\n}","export const vshader = \"attribute highp vec3 aVertex;\\nattribute highp vec4 aColour;\\nattribute highp float aId;\\n\\n\\nuniform mat4 uMvMatrix;\\nuniform mat4 uPMatrix;\\n\\n\\nuniform mediump float uColorCoding; \\nuniform mediump float uSelectedId;\\n\\n\\nuniform vec4 uHoverPickColour;\\n\\n\\nvarying vec4 vColor;\\n\\nvec4 getIdColor(float id){\\n float product = floor(id + 0.5);\\n float B = floor(product / (256.0*256.0));\\n float G = floor((product - B * 256.0*256.0) / 256.0);\\n float R = mod(product, 256.0);\\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\\n}\\n\\nvec4 getTransparentColor(vec4 color, float transparency){\\n mat4 aMat4 = mat4(1.0, 0.0, 0.0, 0.0,\\n 0.0, 1.0, 0.0, 0.0,\\n 0.0, 0.0, 1.0, 0.0,\\n 0.0, 0.0, 0.0, transparency);\\n return aMat4 * color;\\n}\\n\\n\\nvoid main(void) {\\n\\n bool ignoreVec = false;\\n if (uColorCoding > 0.5 && uColorCoding <= 1.0)\\n {\\n ignoreVec = aId == 4.0;\\n vColor = getIdColor(aId);\\n }\\n else if (uColorCoding < -0.5)\\n {\\n ignoreVec = aId == 4.0;\\n vColor = getIdColor(1000010.0);\\n }\\n else\\n { \\n if(uSelectedId == aId)\\n { \\n vColor = aColour; \\n }\\n else\\n {\\n if(uSelectedId > 0.0) \\n {\\n if(aId != 4.0){ \\n ignoreVec = true;\\n }\\n else if(uSelectedId != 4.0) \\n vColor = getTransparentColor(aColour, 1.5);\\n }\\n else \\n vColor = aColour;\\n }\\n }\\n\\n if(!ignoreVec)\\n {\\n gl_Position = uPMatrix * uMvMatrix * vec4(aVertex, 1.0);\\n }\\n\\n}\"","import { IPlugin } from '../plugin';\nimport { Viewer } from '../../viewer';\nimport { vshader } from './vshader';\n\n/**\n * @category Plugins\n */\nexport class Grid implements IPlugin {\n\n    private viewer: Viewer;\n    private program: WebGLProgram;\n    private vertex_buffer: WebGLBuffer;\n    private coordinatesAttributePointer: number;\n    private mvUniformPointer: WebGLUniformLocation;\n    private pUniformPointer: WebGLUniformLocation;\n    private colourUniformPointer: WebGLUniformLocation;\n    private initialized = false;\n\n    /**\n     * Factor used to make the grid bigger than the current region\n     */\n    public factor = 1.5;\n    /**\n     * Fragment of Z height to be used as a Z offset bellow the model\n     */\n    public zFactor = 5.0;\n\n    /**\n     * Number of lines to be drawn\n     */\n    public numberOfLines = 10.0;\n\n    /**\n     * Colour of the grid\n     */\n    public colour = [0.0, 0.0, 0.0, 0.6];\n\n    /**\n     * Set to true to stop rendering of this plugin\n     */\n    public get stopped(): boolean { return this._stopped; }\n    public set stopped(value: boolean) {\n        this._stopped = value;\n        if (this.viewer) {\n            this.viewer.draw();\n        }\n    }\n    private _stopped = false;\n\n    public init(viewer: Viewer): void {\n        this.viewer = viewer;\n\n        const gl = viewer.gl;\n\n        this._initShader();\n        gl.useProgram(this.program);\n\n        // create vertex buffer\n        this.vertex_buffer = gl.createBuffer();\n\n        // Get the attribute location\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertex_buffer);\n        this.coordinatesAttributePointer = gl.getAttribLocation(this.program, \"coordinates\");\n        gl.vertexAttribPointer(this.coordinatesAttributePointer, 3, gl.FLOAT, false, 0, 0);\n\n        // Enable the attribute\n        gl.enableVertexAttribArray(this.coordinatesAttributePointer);\n\n        // get uniform locations\n        this.colourUniformPointer = gl.getUniformLocation(this.program, \"uColour\");\n        this.pUniformPointer = gl.getUniformLocation(this.program, \"uPMatrix\");\n        this.mvUniformPointer = gl.getUniformLocation(this.program, \"uMvMatrix\");\n\n        this.initialized = true;\n    }\n\n    private _initShader(): void {\n\n        var gl = this.viewer.gl;\n        var viewer = this.viewer;\n        var compile = (shader, code) => {\n            gl.shaderSource(shader, code);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                let msg = gl.getShaderInfoLog(shader);\n                viewer.error(msg);\n                return null;\n            }\n        };\n\n        //fragment shader\n        // Fragment shader source code\n        const fragCode =\n            'precision mediump float; uniform vec4 uColour;' +\n            'void main(void) {' +\n            'gl_FragColor = uColour;' +\n            '}';\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        compile(fragmentShader, fragCode);\n\n        //vertex shader (the more complicated one)\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        compile(vertexShader, vshader);\n\n        //link program\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, vertexShader);\n        gl.attachShader(this.program, fragmentShader);\n        gl.linkProgram(this.program);\n\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            viewer.error('Could not initialise shaders for a navigation cube plugin');\n        }\n    }\n\n    public onAfterDraw(width: number, height: number): void {\n        if (!this.initialized || this.stopped) {\n            return;\n        }\n        const region = this.viewer.getMergedRegion();\n        if (!region || region.population < 1) {\n            return;\n        }\n        const size = Math.max(region.bbox[3], region.bbox[4]) * this.factor;\n        if (size < 0.1) {\n            return;\n        }\n\n        const spacing = size / (this.numberOfLines + 1);\n\n        const x = region.bbox[0] + region.bbox[3] / 2.0 - size / 2.0;\n        const y = region.bbox[1] + region.bbox[4] / 2.0 - size / 2.0;\n        const z = region.bbox[2] - region.bbox[5] / this.zFactor;\n\n        const vertices: number[] = [];\n\n        // x lines\n        for (let i = 1; i < this.numberOfLines + 1; i++) {\n            vertices.push(x); // start x\n            vertices.push(y + i * spacing); // start y\n            vertices.push(z); // start z\n\n            vertices.push(x + size); // end x\n            vertices.push(y + i * spacing); // end y\n            vertices.push(z); // end z\n        }\n\n        // y lines\n        for (let i = 1; i < this.numberOfLines + 1; i++) {\n            vertices.push(x + i * spacing); // start x\n            vertices.push(y); // start y\n            vertices.push(z); // start z\n\n            vertices.push(x + i * spacing); // end x\n            vertices.push(y + size); // end y\n            vertices.push(z); // end z\n        }\n\n        const gl = this.viewer.gl;\n        gl.useProgram(this.program);\n\n        // set uniforms\n        gl.uniformMatrix4fv(this.pUniformPointer, false, this.viewer.pMatrix);\n        gl.uniformMatrix4fv(this.mvUniformPointer, false, this.viewer.mvMatrix);\n        gl.uniform4fv(this.colourUniformPointer, this.colour);\n\n\n        // Bind vertex buffer object\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertex_buffer);\n        // Pass the vertex data to the buffer\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n\n\n        // Point an attribute to the currently bound VBO\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertex_buffer);\n        gl.vertexAttribPointer(this.coordinatesAttributePointer, 3, gl.FLOAT, false, 0, 0);\n\n        gl.enable(gl.BLEND);\n        gl.enable(gl.DEPTH_TEST);\n        gl.blendFunc(gl.ONE_MINUS_DST_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n        // Draw lines\n        gl.drawArrays(gl.LINES, 0, vertices.length / 3);\n    }\n\n    // tslint:disable: no-empty\n    public onBeforeDraw(width: number, height: number): void { }\n\n    public onBeforeDrawId(): void { }\n\n    public onAfterDrawId(): void { }\n\n    public onAfterDrawModelId(): void { }\n}","export const vshader = \"attribute vec3 coordinates;\\n\\n\\nuniform mat4 uMvMatrix;\\nuniform mat4 uPMatrix;\\n\\nvoid main(void) {\\n gl_Position = uPMatrix * uMvMatrix * vec4(coordinates, 1.0);\\n}\"","import { IPlugin } from \"../plugin\";\nimport { Viewer } from \"../../viewer\";\n\n/**\n * @category Plugins\n */\nexport class LoaderOverlay implements IPlugin {\n    private viewer: Viewer;\n    private overlay: HTMLDivElement;\n\n    public init(viewer: Viewer): void {\n        this.viewer = viewer;\n    }\n\n    public onBeforeDraw(width: number, height: number): void {\n    }\n    public onAfterDraw(width: number, height: number): void {\n    }\n    public onBeforeDrawId(): void {\n    }\n    public onAfterDrawId(): void {\n    }\n    public onAfterDrawModelId(): void {\n    }\n\n\n    public show(image?: HTMLImageElement) {\n\n        if (this.overlay)\n            return;\n\n        // create an overlay\n        const div = document.createElement('div');\n        div.style.width = '100%';\n        div.style.height = '100%';\n        div.style.zIndex = '1000';\n        div.style.overflow = 'hidden';\n        div.style.position = 'absolute';\n        div.style.top = '0';\n        div.style.left = '0';\n\n        // semi-transparent layer\n        const over = document.createElement('div');\n        over.style.height = '100%';\n        over.style.width = '100%';\n        over.style.backgroundColor = 'rgb(200,200,200)';\n        over.style.opacity = '0.5';\n        div.appendChild(over);\n\n        if (image != null) {\n            const imageContainer = document.createElement('div');\n            imageContainer.style.position = 'absolute';\n            imageContainer.style.top = '0';\n            imageContainer.style.left = '0';\n            imageContainer.style.height = '100%';\n            imageContainer.style.width = '100%';\n            imageContainer.style.display = 'flex';\n            imageContainer.style.alignItems = 'center';\n            imageContainer.style.justifyContent = 'center';\n            div.appendChild(imageContainer);\n\n            // blurred image\n            image.style.height = '100%';\n            image.style.filter = 'blur(15px)';\n            imageContainer.appendChild(image);\n        }\n\n        // rotating loader\n        const loaderContainer = document.createElement('div');\n        loaderContainer.style.position = 'absolute';\n        loaderContainer.style.top = '0';\n        loaderContainer.style.left = '0';\n        loaderContainer.style.height = '100%';\n        loaderContainer.style.width = '100%';\n        loaderContainer.style.display = 'flex';\n        loaderContainer.style.alignItems = 'center';\n        loaderContainer.style.justifyContent = 'center';\n\n        const loader = document.createElement('div');\n        loader.className = 'xbim-viewer-loader';\n        loaderContainer.appendChild(loader);\n        div.appendChild(loaderContainer);\n\n        this.overlay = div;\n\n        const parent = this.viewer.canvas.parentElement;\n        if (parent.style.position !== 'relative' && parent.style.position !== 'absolute') {\n            parent.style.position = 'relative';\n        }\n\n        const next = this.viewer.canvas.nextElementSibling;\n        if (next != null) {\n            parent.insertBefore(div, next);\n        } else {\n            parent.appendChild(div);\n        }\n    }\n\n    public hide() {\n        if (this.overlay == null) {\n            return;\n        }\n\n        if (this.overlay.parentElement != null) {\n            this.overlay.parentElement.removeChild(this.overlay);\n        }\n\n        this.overlay = null;\n    }\n\n    /**\n     *\n     */\n    constructor() {\n        const style = `\n        .xbim-viewer-loader {\n            border: 32px solid #eee; /* Light grey */\n            border-top: 32px solid #aaa; /* Dark gray */\n            border-radius: 50%;\n            width: 120px;\n            height: 120px;\n            animation: xbim-viewer-loader-spin 2s linear infinite;\n          }\n          \n          @keyframes xbim-viewer-loader-spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }`;\n        const element = document.createElement('style');\n        element.innerText = style;\n        document.body.appendChild(element);\n    }\n\n}\n","export const cube_fshader = \"precision mediump float;\\n\\nuniform float uAlpha;\\nuniform sampler2D uTexture;\\nuniform mediump float uColorCoding;\\nuniform float uHighlighting;\\n\\nvarying vec2 vTexCoord;\\nvarying vec4 vIdColor;\\n\\n\\nvoid main(void) {\\n if (uColorCoding > 0.0)\\n {\\n gl_FragColor = vIdColor;\\n }\\n else\\n {\\n vec4 pixel = texture2D(uTexture, vTexCoord);\\n if (vIdColor.x < 0.0)\\n {\\n \\n gl_FragColor = vec4(pixel.rgb * uHighlighting, uAlpha);\\n }\\n else\\n {\\n \\n gl_FragColor = vec4(pixel.rgb, uAlpha);\\n }\\n }\\n}\"","export const cube_vshader = \"attribute highp vec3 aVertex;\\nattribute highp vec2 aTexCoord;\\nattribute highp float aId;\\n\\n\\nuniform mat3 uRotation;\\nuniform mat4 uPMatrix;\\n\\n\\n\\nuniform mediump float uColorCoding; \\nuniform float uSelection;\\n\\n\\nvarying vec2 vTexCoord;\\nvarying vec4 vIdColor;\\n\\nvec4 getIdColor(float id){\\n float product = floor(id + 0.5);\\n float B = floor(product / (256.0*256.0));\\n float G = floor((product - B * 256.0*256.0) / 256.0);\\n float R = mod(product, 256.0);\\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\\n}\\n\\nvoid main(void) {\\n vec4 point = vec4(uRotation * aVertex, 1.0);\\n gl_Position = uPMatrix * point;\\n vTexCoord = aTexCoord;\\n\\n if (uColorCoding == 1.0)\\n {\\n vIdColor = getIdColor(aId);\\n return;\\n }\\n\\n if (uColorCoding > 1.0)\\n {\\n vIdColor = getIdColor(float(uColorCoding));\\n return;\\n }\\n \\n bool isSelected = abs(uSelection - aId) < 0.1;\\n if (isSelected){\\n vIdColor = vec4(-1.0, -1.0, -1.0, -1.0);\\n }\\n else{\\n vIdColor = vec4(1.0, 1.0, 1.0, 1.0);\\n }\\n}\"","export var CubeTextures = {\n    en: 'data:image/png;base64,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'\n}\n","import { Viewer, ViewType } from \"../../viewer\";\nimport { IPlugin } from \"../plugin\";\nimport { cube_fshader } from \"./cube_fshader\";\nimport { cube_vshader } from \"./cube_vshader\";\nimport { CubeTextures } from \"./navigation-cube-textures\";\nimport { ProductIdentity } from \"../../common/product-identity\";\nimport { vec3, mat4, mat3, quat } from \"gl-matrix\";\nimport { Framebuffer } from \"../../framebuffer\";\n\n/**\n * @category Plugins\n */\nexport class NavigationCube implements IPlugin {\n\n    /**\n     * This is constructor of the Navigation Cube plugin for {@link Viewer xBIM Viewer}. It gets optional Image as an argument.\n     * The image will be used as a texture of the navigation cube. If you don't specify eny image default one will be used.\n     * Image has to be square and its size has to be power of 2. \n     * @name NavigationCube\n     * @constructor\n     * @classdesc This is a plugin for Viewer which renders interactive navigation cube. It is customizable in terms of alpha \n     * behaviour and its position on the viewer canvas. Use of plugin:\n     *  \n     *     var cube = new NavigationCube();\n     *     viewer.addPlugin(cube);\n     * \n     * You can specify your own texture of the cube as an [Image](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image)\n     * object argumen in constructor. If you don't specify any image default texture will be used (you can also use this one and enhance it if you want):\n     * \n     * ![Cube texture](cube_texture.png) \n     *\n     * @param {Image} [image = null] - optional image to be used for a cube texture.\n    */\n    constructor(image?: ImageBitmap | ImageData | HTMLVideoElement | HTMLImageElement | HTMLCanvasElement) {\n        this._image = image;\n    }\n\n    private _image: ImageBitmap | ImageData | HTMLVideoElement | HTMLImageElement | HTMLCanvasElement;\n    private TOP = 1;\n    private BOTTOM = 2;\n    private LEFT = 3;\n    private RIGHT = 4;\n    private FRONT = 5;\n    private BACK = 6;\n\n    private TOP_LEFT_FRONT = 7;\n    private TOP_RIGHT_FRONT = 8;\n    private TOP_LEFT_BACK = 9;\n    private TOP_RIGHT_BACK = 10;\n    private BOTTOM_LEFT_FRONT = 11;\n    private BOTTOM_RIGHT_FRONT = 12;\n    private BOTTOM_LEFT_BACK = 13;\n    private BOTTOM_RIGHT_BACK = 14;\n\n    private TOP_LEFT = 15;\n    private TOP_RIGHT = 16;\n    private TOP_FRONT = 17;\n    private TOP_BACK = 18;\n    private BOTTOM_LEFT = 19;\n    private BOTTOM_RIGHT = 20;\n    private BOTTOM_FRONT = 21;\n    private BOTTOM_BACK = 22;\n\n    private FRONT_RIGHT = 23;\n    private FRONT_LEFT = 24;\n    private BACK_RIGHT = 25;\n    private BACK_LEFT = 26;\n\n    private _initialized: boolean = false;\n    private _modelId = 1000001;\n\n    //region where the cube is drawn. This helps to avoid unnecessary requests for ID\n    private _region: number[];\n\n    /**\n    * Size of the cube relative to the size of viewer canvas. This has to be a positive number between [0,1] Default value is 0.15. \n    * @member {Number} NavigationCube#ratio\n    */\n    public ratio = 0.15;\n\n\n    /**\n     * Minimum size of the cube when scaling the view. Default is 50px\n     * @member {Number} NavigationCube#minSize\n     */\n    public minSize = 50;\n\n    /**\n     * Maximum size of the cube when scaling the view. Default is 200px\n     * @member {Number} NavigationCube#maxSize\n     */\n    public maxSize = 200;\n\n    /**\n    * Active parts of the navigation cube are highlighted so that user can recognize which part is active. \n    * This should be a positive number between [0,2]. If the value is less than 1 active area is darker.\n    * If the value is greater than 1 active area is lighter. Default value is 1.2. \n    * @member {Number} NavigationCube#highlighting\n    */\n    public highlighting = 1.2;\n\n    /**\n    * Navigation cube has two transparency states. One is when user hovers over the cube and the second when the cursor is anywhere else.\n    * This is for the hovering shate and it should be a positive number between [0,1]. If the value is less than 1 cube will be semitransparent \n    * when user hovers over. Default value is 1.0. \n    * @member {Number} NavigationCube#activeAlpha\n    */\n    public activeAlpha = 1.0;\n\n    /**\n    * Navigation cube has two transparency states. One is when user hovers over the cube and the second when the cursor is anywhere else.\n    * This is for the non-hovering shate and it should be a positive number between [0,1]. If the value is less than 1 cube will be semitransparent \n    * when user is not hovering over. Default value is 0.3. \n    * @member {Number} NavigationCube#passiveAlpha\n    */\n    public passiveAlpha = 0.7;\n\n    /**\n    * It is possible to place navigation cube to any of the corners of the canvas using this property. Default value is cube.BOTTOM_RIGHT. \n    * Allowed values are cube.BOTTOM_RIGHT, cube.BOTTOM_LEFT, cube.TOP_RIGHT and cube.TOP_LEFT.\n    * @member {Enum} NavigationCube#position\n    */\n    public position = this.BOTTOM_RIGHT;\n\n    /**\n     * True north correction to be applied to navigation cube both for visualization and for navigation. Value should be in degrees. Default is 0.\n     * @member {Enum} NavigationCube#trueNorth\n     */\n    public trueNorth: number = 0;\n\n    /**\n    * Set this to true to stop rendering of this plugin\n    * @member {boolean} NavigationCube#stopped\n    */\n    public get stopped(): boolean { return this._stopped; }\n    public set stopped(value: boolean) {\n        this._stopped = value;\n        if (this.viewer) {\n            this.viewer.draw();\n        }\n    }\n    private _stopped = false;\n\n    private viewer: Viewer;\n    private _shader: WebGLProgram;\n    private _alpha: number;\n    private _selection: number;\n\n    private _pMatrixUniformPointer: WebGLUniformLocation;\n    private _rotationUniformPointer: WebGLUniformLocation;\n    private _colourCodingUniformPointer: WebGLUniformLocation;\n    private _alphaUniformPointer: WebGLUniformLocation;\n    private _selectionUniformPointer: WebGLUniformLocation;\n    private _textureUniformPointer: WebGLUniformLocation;\n    private _highlightingUniformPointer: WebGLUniformLocation;\n\n    private _vertexAttrPointer: number;\n    private _texCoordAttrPointer: number;\n    private _idAttrPointer: number;\n\n    private _indexBuffer: any;\n    private _vertexBuffer: any;\n    private _texCoordBuffer: any;\n    private _idBuffer: any;\n\n    private _texture: WebGLTexture;\n\n    private _drag: boolean;\n\n    private _originalNavigation: any;\n\n\n    public init(viewer: Viewer) {\n        var self = this;\n        this.viewer = viewer;\n        var gl = this.viewer.gl;\n\n        //create own shader \n        this._shader = null;\n        this._initShader();\n\n        this._alpha = this.passiveAlpha;\n        this._selection = 0.0;\n\n        //set own shader for init\n        gl.useProgram(this._shader);\n\n        //create uniform and attribute pointers\n        this._pMatrixUniformPointer = gl.getUniformLocation(this._shader, \"uPMatrix\");\n        this._rotationUniformPointer = gl.getUniformLocation(this._shader, \"uRotation\");\n        this._colourCodingUniformPointer = gl.getUniformLocation(this._shader, \"uColorCoding\");\n        this._alphaUniformPointer = gl.getUniformLocation(this._shader, \"uAlpha\");\n        this._selectionUniformPointer = gl.getUniformLocation(this._shader, \"uSelection\");\n        this._textureUniformPointer = gl.getUniformLocation(this._shader, \"uTexture\");\n        this._highlightingUniformPointer = gl.getUniformLocation(this._shader, \"uHighlighting\");\n\n        this._vertexAttrPointer = gl.getAttribLocation(this._shader, \"aVertex\"),\n            this._texCoordAttrPointer = gl.getAttribLocation(this._shader, \"aTexCoord\"),\n            this._idAttrPointer = gl.getAttribLocation(this._shader, \"aId\"),\n            gl.enableVertexAttribArray(this._vertexAttrPointer);\n        gl.enableVertexAttribArray(this._texCoordAttrPointer);\n        gl.enableVertexAttribArray(this._idAttrPointer);\n\n        //feed data into the GPU and keep pointers\n        this._indexBuffer = gl.createBuffer();\n        this._vertexBuffer = gl.createBuffer();\n        this._texCoordBuffer = gl.createBuffer();\n        this._idBuffer = gl.createBuffer();\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices, gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.vertices, gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._texCoordBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.txtCoords, gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._idBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.ids, gl.STATIC_DRAW);\n\n        //create texture\n        var self = this;\n        this._texture = gl.createTexture();\n        if (typeof (this._image) === \"undefined\") {\n            //add HTML UI to viewer port\n            var data = CubeTextures.en;\n            var image = new Image();\n            self._image = image;\n            image.addEventListener(\"load\",\n                () => {\n                    //load image texture into GPU\n                    gl.bindTexture(gl.TEXTURE_2D, self._texture);\n                    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\n                    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, self._image);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n                    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n                    gl.generateMipmap(gl.TEXTURE_2D);\n                });\n            image.src = data;\n        } else {\n            //load image texture into GPU\n            gl.bindTexture(gl.TEXTURE_2D, self._texture);\n            gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, self._image);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n            gl.generateMipmap(gl.TEXTURE_2D);\n        }\n\n        viewer.canvas.addEventListener('mousemove',\n            (event) => {\n                if (this.stopped || viewer.plugins.indexOf(this) < 0) {\n                    // don't do anything if this plugin is not active\n                    return;\n                }\n\n\n                var startX = event.clientX;\n                var startY = event.clientY;\n\n                //get coordinates within canvas (with the right orientation)\n                var r = viewer.canvas.getBoundingClientRect();\n                var x = startX - r.left;\n                var y = viewer.height - (startY - r.top);\n\n                //cube hasn't been drawn yet\n                if (!self._region) {\n                    return;\n                }\n\n                // user doing anything should cause redraw in case there is any form of interaction\n                // viewer.changed = true;\n\n                if (!self.isInRegion(x, y)) {\n                    self._alpha = self.passiveAlpha;\n                    self._selection = 0;\n                    return;\n                }\n\n                //this is for picking\n                var id = this.getId(event);\n                if (id == null) {\n                    self._alpha = self.passiveAlpha;\n                    self._selection = 0;\n                } else if (id >= self.TOP && id <= self.BACK_LEFT) {\n                    self._alpha = self.activeAlpha;\n                    self._selection = id;\n                }\n                // overdraw the cube\n                this.onAfterDraw(viewer.width, viewer.height);\n            },\n            true);\n\n        self._drag = false;\n\n        viewer.canvas.addEventListener('mousedown',\n            (event) => {\n                // don't do anything if this plugin is not active\n                if (this.stopped || viewer.plugins.indexOf(this) < 0) {\n                    return;\n                }\n\n\n                var startX = event.clientX;\n                var startY = event.clientY;\n\n                //get coordinates within canvas (with the right orientation)\n                var r = viewer.canvas.getBoundingClientRect();\n                var viewX = startX - r.left;\n                var viewY = viewer.height - (startY - r.top);\n\n                // don't do anything if mousedown \n                if (!this._region || !self.isInRegion(viewX, viewY)) {\n                    return;\n                }\n\n                var id = this.getId(event);\n                // not an event of this plugin\n                if (id == null) {\n                    return;\n                }\n\n                if (id >= self.TOP && id <= self.BACK_LEFT) {\n                    //change viewer navigation mode to be 'orbit'\n                    self._drag = true;\n                    self._originalNavigation = viewer.navigationMode;\n                    viewer.navigationMode = \"orbit\";\n                }\n            },\n            true);\n\n        window.addEventListener('mouseup',\n            (event) => {\n                if (this.stopped || viewer.plugins.indexOf(this) < 0) {\n                    // don't do anything if this plugin is not active\n                    self._drag = false;\n                    return;\n                }\n\n                if (self._drag === true) {\n                    viewer.navigationMode = self._originalNavigation;\n                }\n                self._drag = false;\n            },\n            true);\n\n        viewer.on('pick', (args) => {\n            // normal pick where something from the model is actually selected\n            if (args.model != null) {\n                return;\n            }\n\n            const event = args.event;\n            if (!(event instanceof MouseEvent || event instanceof TouchEvent)) {\n                return;\n            }\n\n            let idArg: MouseEvent | Touch = null;\n            if (event instanceof MouseEvent) {\n                idArg = event;\n            } else {\n                const te = event as TouchEvent;\n                idArg = te.changedTouches[0];\n            }\n\n            const id = this.getId(idArg);\n            let dir = vec3.create();\n            let heading: vec3 = vec3.fromValues(0, 0, 1);\n\n            switch (id) {\n                case this.TOP:\n                    dir = vec3.fromValues(0, 0, 1);\n                    heading = vec3.fromValues(0, 1, 0);\n                    break;\n                case this.BOTTOM:\n                    dir = vec3.fromValues(0, 0, -1);\n                    heading = vec3.fromValues(0, -1, 0);\n                    break;\n                case this.FRONT:\n                    dir = vec3.fromValues(0, -1, 0);\n                    break;\n                case this.BACK:\n                    dir = vec3.fromValues(0, 1, 0);\n                    break;\n                case this.LEFT:\n                    dir = vec3.fromValues(-1, 0, 0);\n                    break;\n                case this.RIGHT:\n                    dir = vec3.fromValues(1, 0, 0);\n                    break;\n                case this.TOP_LEFT_FRONT:\n                    dir = vec3.fromValues(-1, -1, 1);\n                    break;\n                case this.TOP_RIGHT_FRONT:\n                    dir = vec3.fromValues(1, -1, 1);\n                    break;\n                case this.TOP_LEFT_BACK:\n                    dir = vec3.fromValues(-1, 1, 1);\n                    break;\n                case this.TOP_RIGHT_BACK:\n                    dir = vec3.fromValues(1, 1, 1);\n                    break;\n                case this.BOTTOM_LEFT_FRONT:\n                    dir = vec3.fromValues(-1, -1, -1);\n                    break;\n                case this.BOTTOM_RIGHT_FRONT:\n                    dir = vec3.fromValues(1, -1, -1);\n                    break;\n                case this.BOTTOM_LEFT_BACK:\n                    dir = vec3.fromValues(-1, 1, -1);\n                    break;\n                case this.BOTTOM_RIGHT_BACK:\n                    dir = vec3.fromValues(1, 1, -1);\n                    break;\n                case this.TOP_LEFT:\n                    dir = vec3.fromValues(-1, 0, 1);\n                    break;\n                case this.TOP_RIGHT:\n                    dir = vec3.fromValues(1, 0, 1);\n                    break;\n                case this.TOP_FRONT:\n                    dir = vec3.fromValues(0, -1, 1);\n                    break;\n                case this.TOP_BACK:\n                    dir = vec3.fromValues(0, 1, 1);\n                    break;\n                case this.BOTTOM_LEFT:\n                    dir = vec3.fromValues(-1, 0, -1);\n                    break;\n                case this.BOTTOM_RIGHT:\n                    dir = vec3.fromValues(1, 0, -1);\n                    break;\n                case this.BOTTOM_FRONT:\n                    dir = vec3.fromValues(0, -1, -1);\n                    break;\n                case this.BOTTOM_BACK:\n                    dir = vec3.fromValues(0, 1, -1);\n                    break;\n                case this.FRONT_RIGHT:\n                    dir = vec3.fromValues(1, -1, 0);\n                    break;\n                case this.FRONT_LEFT:\n                    dir = vec3.fromValues(-1, -1, 0);\n                    break;\n                case this.BACK_RIGHT:\n                    dir = vec3.fromValues(1, 1, 0);\n                    break;\n                case this.BACK_LEFT:\n                    dir = vec3.fromValues(-1, 1, 0);\n                    break;\n                default:\n                    return false;\n            }\n\n            const bbox = viewer.getTargetBoundingBox();\n            const origin = vec3.fromValues(bbox[0] + bbox[3] / 2.0, bbox[1] + bbox[4] / 2.0, bbox[2] + bbox[5] / 2.0);\n            dir = vec3.normalize(vec3.create(), dir);\n\n            // fix to true north if needed\n            if (this.trueNorth !== 0) {\n                const angle = -this.trueNorth * Math.PI / 180.0;\n                const rotation = quat.rotateZ(quat.create(), quat.create(), angle);\n                dir = vec3.transformQuat(vec3.create(), dir, rotation);\n                heading = vec3.transformQuat(vec3.create(), heading, rotation);\n            }\n\n            const widthAndDistance = viewer.getDistanceAndHeight(bbox, dir, heading);\n\n            const shift = vec3.scale(vec3.create(), dir, widthAndDistance.distance);\n            const camera = vec3.add(vec3.create(), origin, shift);\n\n            // use look-at function to set up camera and target\n            let mv = mat4.lookAt(mat4.create(), camera, origin, heading);\n            this.viewer.animations.viewTo({ mv: mv, height: widthAndDistance.height }, this.viewer.zoomDuration);\n        });\n\n        this._initialized = true;\n\n    }\n\n    // tslint:disable: no-empty\n    public onBeforeDraw(width: number, height: number) { }\n\n    public onBeforePick(identity: ProductIdentity) {\n        if (identity.model !== this._modelId || identity.id == null) {\n            return false;\n        }\n\n\n        return true;\n\n    }\n\n    public onAfterDraw(width: number, height: number) {\n        if (this.stopped) {\n            return;\n        }\n        var gl = this.setActive();\n        gl.disable(gl.BLEND);\n        gl.disable(gl.DEPTH_TEST);\n\n        //set uniform for colour coding to false\n        gl.uniform1f(this._colourCodingUniformPointer, 0);\n        this.draw(width, height);\n    }\n\n    public onBeforeDrawId() { }\n\n    public onAfterDrawId() {\n        if (this.stopped) {\n            return;\n        }\n        var gl = this.setActive();\n        //set uniform for colour coding to true\n        gl.uniform1f(this._colourCodingUniformPointer, 1);\n        this.draw(this.viewer.width, this.viewer.height);\n    }\n\n    public onAfterDrawModelId() {\n        if (this.stopped) {\n            return;\n        }\n        var gl = this.setActive();\n        //set uniform for colour coding to this model id\n        gl.uniform1f(this._colourCodingUniformPointer, this._modelId);\n        this.draw(this.viewer.width, this.viewer.height);\n    }\n\n    private getId(event: MouseEvent | Touch) {\n        let x = event.clientX;\n        let y = event.clientY;\n\n        //get coordinates within canvas (with the right orientation)\n        let r = this.viewer.canvas.getBoundingClientRect();\n        let viewX = x - r.left;\n        let viewY = this.viewer.height - (y - r.top);\n\n        const gl = this.viewer.gl;\n        var fb = new Framebuffer(gl, this.viewer.width, this.viewer.height, this.viewer.hasDepthSupport, this.viewer.glVersion);\n        gl.viewport(0, 0, this.viewer.width, this.viewer.height);\n        gl.enable(gl.DEPTH_TEST); //we don't use any kind of blending or transparency\n        gl.disable(gl.BLEND);\n        // clear all\n        gl.clearColor(0, 0, 0, 0); //zero colour for no-values\n        // tslint:disable-next-line: no-bitwise\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        this.onAfterDrawId();\n        const id = fb.getId(viewX, viewY);\n        fb.delete();\n        return id;\n    }\n\n    private setActive(): WebGLRenderingContext {\n        var gl = this.viewer.gl;\n        //set own shader\n        gl.useProgram(this._shader);\n\n        return gl;\n    }\n\n    private isInRegion(x: number, y: number) {\n        const minX = this._region[0] * this.viewer.width;\n        const maxX = this._region[2] * this.viewer.width;\n        const minY = this._region[1] * this.viewer.height;\n        const maxY = this._region[3] * this.viewer.height;\n\n        return !(x < minX || x > maxX || y < minY || y > maxY);\n    }\n\n    private draw(viewerWidth: number, viewerHeight: number) {\n        if (this.stopped) {\n            return;\n        }\n\n        if (!this._initialized) {\n            return;\n        }\n\n        const gl = this.viewer.gl;\n\n        const minDim = Math.min(viewerWidth, viewerHeight);\n        const minRatio = this.minSize / minDim;\n        const maxRatio = this.maxSize / minDim;\n        let ratio = this.ratio;\n        if (ratio < minRatio) {\n            ratio = minRatio;\n        } else if (ratio > maxRatio) {\n            ratio = maxRatio;\n        }\n\n        //set navigation data from Viewer to this shader\n        let pMatrix = mat4.create();\n        let height = 1.0 / ratio;\n        let width = height / viewerHeight * viewerWidth;\n        if (viewerHeight > viewerWidth) {\n            width = 1.0 / ratio;\n            height = width / viewerWidth * viewerHeight;\n        }\n\n        var regionX = ratio * viewerHeight / viewerWidth * 2.0;\n        var regionY = ratio * 2.0;\n\n        //create orthogonal projection matrix\n        switch (this.position) {\n            case this.BOTTOM_RIGHT:\n                mat4.ortho(pMatrix,\n                    1.0 - width, //left\n                    1.0, //right\n                    -1.0, //bottom\n                    height - 1.0, //top\n                    -1, //near\n                    1); //far\n                this._region = [1 - regionX, 0.0, 1.0, regionY];\n                break;\n            case this.BOTTOM_LEFT:\n                mat4.ortho(pMatrix,\n                    -1.0, //left\n                    width - 1.0, //right\n                    -1.0, //bottom\n                    height - 1.0, //top\n                    -1, //near\n                    1); //far\n                this._region = [0.0, 0.0, regionX, regionY];\n                break;\n            case this.TOP_LEFT:\n                mat4.ortho(pMatrix,\n                    -1.0, //left\n                    width - 1.0, //right\n                    1.0 - height, //bottom\n                    1.0, //top\n                    -1, //near\n                    1); //far\n                this._region = [0.0, 1.0 - regionY, regionX, 1.0];\n                break;\n            case this.TOP_RIGHT:\n                mat4.ortho(pMatrix,\n                    1.0 - width, //left\n                    1.0, //right\n                    1.0 - height, //bottom\n                    1.0, //top\n                    -1, //near\n                    1); //far\n                this._region = [1.0 - regionX, 1.0 - regionY, 1.0, 1.0];\n                break;\n            default:\n        }\n\n        //extract just a rotation from model-view matrix\n        let rotation = mat3.fromMat4(mat3\n            .create(),\n            this.viewer.mvMatrix);\n\n        // adjust to true north if needed\n        if (this.trueNorth !== 0) {\n            const angle = -this.trueNorth * Math.PI / 180.0;\n            const northRotation = mat3.fromRotation(mat3.create(), angle);\n            rotation = mat3.multiply(mat3.create(), rotation, northRotation);\n        }\n\n        gl.uniformMatrix4fv(this._pMatrixUniformPointer, false, pMatrix);\n        gl.uniformMatrix3fv(this._rotationUniformPointer, false, rotation);\n        gl.uniform1f(this._alphaUniformPointer, this._alpha);\n        gl.uniform1f(this._highlightingUniformPointer, this.highlighting);\n        gl.uniform1f(this._selectionUniformPointer, this._selection);\n\n        //bind data buffers\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer);\n        gl.vertexAttribPointer(this._vertexAttrPointer, 3, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._idBuffer);\n        gl.vertexAttribPointer(this._idAttrPointer, 1, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._texCoordBuffer);\n        gl.vertexAttribPointer(this._texCoordAttrPointer, 2, gl.FLOAT, false, 0, 0);\n        \n        //bind texture\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this._texture);\n        gl.uniform1i(this._textureUniformPointer, 1);\n        \n        var cfEnabled = gl.getParameter(gl.CULL_FACE);\n        if (!cfEnabled) {\n            gl.enable(gl.CULL_FACE);\n        }\n        \n        gl.disable(gl.BLEND);\n        \n        //draw the cube as an element array\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n        gl.drawElements(gl.TRIANGLES, this.indices.length, gl.UNSIGNED_SHORT, 0);\n\n        if (!cfEnabled) {\n            gl.disable(gl.CULL_FACE);\n        }\n\n    }\n\n    private _initShader(): void {\n\n        var gl = this.viewer.gl;\n        var viewer = this.viewer;\n        var compile = (shader, code) => {\n            gl.shaderSource(shader, code);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                let msg = gl.getShaderInfoLog(shader);\n                viewer.error(msg);\n                return null;\n            }\n        };\n\n        //fragment shader\n        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        compile(fragmentShader, cube_fshader);\n\n        //vertex shader (the more complicated one)\n        var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        compile(vertexShader, cube_vshader);\n\n        //link program\n        this._shader = gl.createProgram();\n        gl.attachShader(this._shader, vertexShader);\n        gl.attachShader(this._shader, fragmentShader);\n        gl.linkProgram(this._shader);\n\n        if (!gl.getProgramParameter(this._shader, gl.LINK_STATUS)) {\n            viewer.error('Could not initialise shaders for a navigation cube plugin');\n        }\n    }\n\n\n    public vertices = new Float32Array([\n        // Front face\n        -0.3, -0.5, -0.3,\n        0.3, -0.5, -0.3,\n        0.3, -0.5, 0.3,\n        -0.3, -0.5, 0.3,\n\n        // Back face\n        -0.3, 0.5, -0.3,\n        -0.3, 0.5, 0.3,\n        0.3, 0.5, 0.3,\n        0.3, 0.5, -0.3,\n\n\n        // Top face\n        -0.3, -0.3, 0.5,\n        0.3, -0.3, 0.5,\n        0.3, 0.3, 0.5,\n        -0.3, 0.3, 0.5,\n\n        // Bottom face\n        -0.3, -0.3, -0.5,\n        -0.3, 0.3, -0.5,\n        0.3, 0.3, -0.5,\n        0.3, -0.3, -0.5,\n\n        // Right face\n        0.5, -0.3, -0.3,\n        0.5, 0.3, -0.3,\n        0.5, 0.3, 0.3,\n        0.5, -0.3, 0.3,\n\n        // Left face\n        -0.5, -0.3, -0.3,\n        -0.5, -0.3, 0.3,\n        -0.5, 0.3, 0.3,\n        -0.5, 0.3, -0.3,\n\n        //top - left - front (--+)\n        -0.5, -0.5, 0.5,\n        -0.3, -0.5, 0.5,\n        -0.3, -0.3, 0.5,\n        -0.5, -0.3, 0.5,\n        -0.5, -0.5, 0.3,\n        -0.5, -0.5, 0.5,\n        -0.5, -0.3, 0.5,\n        -0.5, -0.3, 0.3,\n        -0.5, -0.5, 0.3,\n        -0.3, -0.5, 0.3,\n        -0.3, -0.5, 0.5,\n        -0.5, -0.5, 0.5,\n\n        //top-right-front (+-+)\n        0.3, -0.5, 0.5,\n        0.5, -0.5, 0.5,\n        0.5, -0.3, 0.5,\n        0.3, -0.3, 0.5,\n        0.5, -0.5, 0.3,\n        0.5, -0.3, 0.3,\n        0.5, -0.3, 0.5,\n        0.5, -0.5, 0.5,\n        0.3, -0.5, 0.3,\n        0.5, -0.5, 0.3,\n        0.5, -0.5, 0.5,\n        0.3, -0.5, 0.5,\n\n        //top-left-back (-++)\n        -0.5, 0.3, 0.5,\n        -0.3, 0.3, 0.5,\n        -0.3, 0.5, 0.5,\n        -0.5, 0.5, 0.5,\n        -0.5, 0.3, 0.3,\n        -0.5, 0.3, 0.5,\n        -0.5, 0.5, 0.5,\n        -0.5, 0.5, 0.3,\n        -0.5, 0.5, 0.3,\n        -0.5, 0.5, 0.5,\n        -0.3, 0.5, 0.5,\n        -0.3, 0.5, 0.3,\n\n        //top-right-back (+++)\n        0.3, 0.3, 0.5,\n        0.5, 0.3, 0.5,\n        0.5, 0.5, 0.5,\n        0.3, 0.5, 0.5,\n        0.5, 0.3, 0.3,\n        0.5, 0.5, 0.3,\n        0.5, 0.5, 0.5,\n        0.5, 0.3, 0.5,\n        0.3, 0.5, 0.3,\n        0.3, 0.5, 0.5,\n        0.5, 0.5, 0.5,\n        0.5, 0.5, 0.3,\n\n        //bottom - left - front (---)\n        -0.5, -0.5, -0.5,\n        -0.3, -0.5, -0.5,\n        -0.3, -0.3, -0.5,\n        -0.5, -0.3, -0.5,\n        -0.5, -0.5, -0.5,\n        -0.5, -0.5, -0.3,\n        -0.5, -0.3, -0.3,\n        -0.5, -0.3, -0.5,\n        -0.5, -0.5, -0.5,\n        -0.3, -0.5, -0.5,\n        -0.3, -0.5, -0.3,\n        -0.5, -0.5, -0.3,\n\n        //bottom-right-front (+--)\n        0.3, -0.5, -0.5,\n        0.5, -0.5, -0.5,\n        0.5, -0.3, -0.5,\n        0.3, -0.3, -0.5,\n        0.5, -0.5, -0.5,\n        0.5, -0.3, -0.5,\n        0.5, -0.3, -0.3,\n        0.5, -0.5, -0.3,\n        0.3, -0.5, -0.5,\n        0.5, -0.5, -0.5,\n        0.5, -0.5, -0.3,\n        0.3, -0.5, -0.3,\n\n        //bottom-left-back (-+-)\n        -0.5, 0.3, -0.5,\n        -0.3, 0.3, -0.5,\n        -0.3, 0.5, -0.5,\n        -0.5, 0.5, -0.5,\n        -0.5, 0.3, -0.5,\n        -0.5, 0.3, -0.3,\n        -0.5, 0.5, -0.3,\n        -0.5, 0.5, -0.5,\n        -0.5, 0.5, -0.5,\n        -0.5, 0.5, -0.3,\n        -0.3, 0.5, -0.3,\n        -0.3, 0.5, -0.5,\n\n        //bottom-right-back (++-)\n        0.3, 0.3, -0.5,\n        0.5, 0.3, -0.5,\n        0.5, 0.5, -0.5,\n        0.3, 0.5, -0.5,\n        0.5, 0.3, -0.5,\n        0.5, 0.5, -0.5,\n        0.5, 0.5, -0.3,\n        0.5, 0.3, -0.3,\n        0.3, 0.5, -0.5,\n        0.3, 0.5, -0.3,\n        0.5, 0.5, -0.3,\n        0.5, 0.5, -0.5,\n\n        //top-right (+0+)\n        0.3, -0.3, 0.5,\n        0.5, -0.3, 0.5,\n        0.5, 0.3, 0.5,\n        0.3, 0.3, 0.5,\n        0.5, -0.3, 0.3,\n        0.5, 0.3, 0.3,\n        0.5, 0.3, 0.5,\n        0.5, -0.3, 0.5,\n\n        //top-left (-0+)\n        -0.5, -0.3, 0.5,\n        -0.3, -0.3, 0.5,\n        -0.3, 0.3, 0.5,\n        -0.5, 0.3, 0.5,\n        -0.5, -0.3, 0.3,\n        -0.5, -0.3, 0.5,\n        -0.5, 0.3, 0.5,\n        -0.5, 0.3, 0.3,\n\n        //top-front (0-+)\n        -0.3, -0.5, 0.5,\n        0.3, -0.5, 0.5,\n        0.3, -0.3, 0.5,\n        -0.3, -0.3, 0.5,\n        -0.3, -0.5, 0.3,\n        0.3, -0.5, 0.3,\n        0.3, -0.5, 0.5,\n        -0.3, -0.5, 0.5,\n\n        //top-back (0++)\n        -0.3, 0.3, 0.5,\n        0.3, 0.3, 0.5,\n        0.3, 0.5, 0.5,\n        -0.3, 0.5, 0.5,\n        -0.3, 0.5, 0.3,\n        -0.3, 0.5, 0.5,\n        0.3, 0.5, 0.5,\n        0.3, 0.5, 0.3,\n\n        //bottom-right (+0-)\n        0.3, -0.3, -0.5,\n        0.5, -0.3, -0.5,\n        0.5, 0.3, -0.5,\n        0.3, 0.3, -0.5,\n        0.5, -0.3, -0.5,\n        0.5, 0.3, -0.5,\n        0.5, 0.3, -0.3,\n        0.5, -0.3, -0.3,\n\n        //bottom-left (-0-)\n        -0.5, -0.3, -0.5,\n        -0.5, 0.3, -0.5,\n        -0.3, 0.3, -0.5,\n        -0.3, -0.3, -0.5,\n        -0.5, -0.3, -0.5,\n        -0.5, -0.3, -0.3,\n        -0.5, 0.3, -0.3,\n        -0.5, 0.3, -0.5,\n\n        //bottom-front (0--)\n        -0.3, -0.5, -0.5,\n        0.3, -0.5, -0.5,\n        0.3, -0.3, -0.5,\n        -0.3, -0.3, -0.5,\n        -0.3, -0.5, -0.5,\n        0.3, -0.5, -0.5,\n        0.3, -0.5, -0.3,\n        -0.3, -0.5, -0.3,\n\n        //bottom-back (0+-)\n        -0.3, 0.3, -0.5,\n        0.3, 0.3, -0.5,\n        0.3, 0.5, -0.5,\n        -0.3, 0.5, -0.5,\n        -0.3, 0.5, -0.5,\n        -0.3, 0.5, -0.3,\n        0.3, 0.5, -0.3,\n        0.3, 0.5, -0.5,\n\n        //front-right (+-0)\n        0.3, -0.5, -0.3,\n        0.5, -0.5, -0.3,\n        0.5, -0.5, 0.3,\n        0.3, -0.5, 0.3,\n        0.5, -0.5, -0.3,\n        0.5, -0.3, -0.3,\n        0.5, -0.3, 0.3,\n        0.5, -0.5, 0.3,\n\n        //front-left (--0)\n        -0.5, -0.5, -0.3,\n        -0.3, -0.5, -0.3,\n        -0.3, -0.5, 0.3,\n        -0.5, -0.5, 0.3,\n        -0.5, -0.5, -0.3,\n        -0.5, -0.5, 0.3,\n        -0.5, -0.3, 0.3,\n        -0.5, -0.3, -0.3,\n\n        //back-right (++0)\n        0.3, 0.5, -0.3,\n        0.3, 0.5, 0.3,\n        0.5, 0.5, 0.3,\n        0.5, 0.5, -0.3,\n        0.5, 0.3, -0.3,\n        0.5, 0.5, -0.3,\n        0.5, 0.5, 0.3,\n        0.5, 0.3, 0.3,\n\n        //back-left (-+0)\n        -0.5, 0.5, -0.3,\n        -0.5, 0.5, 0.3,\n        -0.3, 0.5, 0.3,\n        -0.3, 0.5, -0.3,\n        -0.5, 0.3, -0.3,\n        -0.5, 0.3, 0.3,\n        -0.5, 0.5, 0.3,\n        -0.5, 0.5, -0.3,\n    ]);\n\n\n    //// Front face\n    //-0.5, -0.5, -0.5,\n    // 0.5, -0.5, -0.5,\n    // 0.5, -0.5, 0.5,\n    //-0.5, -0.5, 0.5,\n    //\n    //// Back face\n    //-0.5, 0.5, -0.5,\n    //-0.5, 0.5, 0.5,\n    // 0.5, 0.5, 0.5,\n    // 0.5, 0.5, -0.5,\n    //\n    //// Top face\n    //-0.5, -0.5, 0.5,\n    // 0.5, -0.5, 0.5,\n    // 0.5, 0.5, 0.5,\n    //-0.5, 0.5, 0.5,\n    //\n    //// Bottom face\n    //-0.5, -0.5, -0.5,\n    //-0.5, 0.5, -0.5,\n    // 0.5, 0.5, -0.5,\n    // 0.5, -0.5, -0.5,\n    //\n    //// Right face\n    // 0.5, -0.5, -0.5,\n    // 0.5, 0.5, -0.5,\n    // 0.5, 0.5, 0.5,\n    // 0.5, -0.5, 0.5,\n    //\n    //// Left face\n    //-0.5, -0.5, -0.5,\n    //-0.5, -0.5, 0.5,\n    //-0.5, 0.5, 0.5,\n    //-0.5, 0.5, -0.5,\n\n    private indices = new Uint16Array([\n        0, 1, 2, 0, 2, 3, // Front face\n        4, 5, 6, 4, 6, 7, // Back face\n        8, 9, 10, 8, 10, 11, // Top face\n        12, 13, 14, 12, 14, 15, // Bottom face\n        16, 17, 18, 16, 18, 19, // Right face\n        20, 21, 22, 20, 22, 23, // Left face\n\n        //top - left - front \n        0 + 24, 1 + 24, 2 + 24, 0 + 24, 2 + 24, 3 + 24,\n        4 + 24, 5 + 24, 6 + 24, 4 + 24, 6 + 24, 7 + 24,\n        8 + 24, 9 + 24, 10 + 24, 8 + 24, 10 + 24, 11 + 24,\n\n        //top-right-front \n        0 + 36, 1 + 36, 2 + 36, 0 + 36, 2 + 36, 3 + 36,\n        4 + 36, 5 + 36, 6 + 36, 4 + 36, 6 + 36, 7 + 36,\n        8 + 36, 9 + 36, 10 + 36, 8 + 36, 10 + 36, 11 + 36,\n\n        //top-left-back \n        0 + 48, 1 + 48, 2 + 48, 0 + 48, 2 + 48, 3 + 48,\n        4 + 48, 5 + 48, 6 + 48, 4 + 48, 6 + 48, 7 + 48,\n        8 + 48, 9 + 48, 10 + 48, 8 + 48, 10 + 48, 11 + 48,\n\n        //top-right-back\n        0 + 60, 1 + 60, 2 + 60, 0 + 60, 2 + 60, 3 + 60,\n        4 + 60, 5 + 60, 6 + 60, 4 + 60, 6 + 60, 7 + 60,\n        8 + 60, 9 + 60, 10 + 60, 8 + 60, 10 + 60, 11 + 60,\n\n        //bottom - left - front\n        0 + 72, 2 + 72, 1 + 72, 0 + 72, 3 + 72, 2 + 72,\n        4 + 72, 5 + 72, 6 + 72, 4 + 72, 6 + 72, 7 + 72,\n        8 + 72, 9 + 72, 10 + 72, 8 + 72, 10 + 72, 11 + 72,\n\n        //bottom-right-front \n        0 + 84, 2 + 84, 1 + 84, 0 + 84, 3 + 84, 2 + 84,\n        4 + 84, 5 + 84, 6 + 84, 4 + 84, 6 + 84, 7 + 84,\n        8 + 84, 9 + 84, 10 + 84, 8 + 84, 10 + 84, 11 + 84,\n\n        //bottom-left-back \n        0 + 96, 2 + 96, 1 + 96, 0 + 96, 3 + 96, 2 + 96,\n        4 + 96, 5 + 96, 6 + 96, 4 + 96, 6 + 96, 7 + 96,\n        8 + 96, 9 + 96, 10 + 96, 8 + 96, 10 + 96, 11 + 96,\n\n        //bottom-right-back\n        0 + 108, 2 + 108, 1 + 108, 0 + 108, 3 + 108, 2 + 108,\n        4 + 108, 5 + 108, 6 + 108, 4 + 108, 6 + 108, 7 + 108,\n        8 + 108, 9 + 108, 10 + 108, 8 + 108, 10 + 108, 11 + 108,\n\n        //top-right\n        0 + 120, 1 + 120, 2 + 120, 0 + 120, 2 + 120, 3 + 120,\n        4 + 120, 5 + 120, 6 + 120, 4 + 120, 6 + 120, 7 + 120,\n\n        //top-left\n        0 + 128, 1 + 128, 2 + 128, 0 + 128, 2 + 128, 3 + 128,\n        4 + 128, 5 + 128, 6 + 128, 4 + 128, 6 + 128, 7 + 128,\n\n        //top-front\n        0 + 136, 1 + 136, 2 + 136, 0 + 136, 2 + 136, 3 + 136,\n        4 + 136, 5 + 136, 6 + 136, 4 + 136, 6 + 136, 7 + 136,\n\n        //top-back\n        0 + 144, 1 + 144, 2 + 144, 0 + 144, 2 + 144, 3 + 144,\n        4 + 144, 5 + 144, 6 + 144, 4 + 144, 6 + 144, 7 + 144,\n\n        //bottom-right\n        0 + 152, 2 + 152, 1 + 152, 0 + 152, 3 + 152, 2 + 152,\n        4 + 152, 5 + 152, 6 + 152, 4 + 152, 6 + 152, 7 + 152,\n\n        //bottom-left\n        0 + 160, 1 + 160, 2 + 160, 0 + 160, 2 + 160, 3 + 160,\n        4 + 160, 5 + 160, 6 + 160, 4 + 160, 6 + 160, 7 + 160,\n\n        //bottom-front\n        0 + 168, 2 + 168, 1 + 168, 0 + 168, 3 + 168, 2 + 168,\n        4 + 168, 5 + 168, 6 + 168, 4 + 168, 6 + 168, 7 + 168,\n\n        //bottom-back\n        0 + 176, 2 + 176, 1 + 176, 0 + 176, 3 + 176, 2 + 176,\n        4 + 176, 5 + 176, 6 + 176, 4 + 176, 6 + 176, 7 + 176,\n\n        //front-right\n        0 + 184, 1 + 184, 2 + 184, 0 + 184, 2 + 184, 3 + 184,\n        4 + 184, 5 + 184, 6 + 184, 4 + 184, 6 + 184, 7 + 184,\n\n        //front-left\n        0 + 192, 1 + 192, 2 + 192, 0 + 192, 2 + 192, 3 + 192,\n        4 + 192, 5 + 192, 6 + 192, 4 + 192, 6 + 192, 7 + 192,\n\n        //back-right\n        0 + 200, 1 + 200, 2 + 200, 0 + 200, 2 + 200, 3 + 200,\n        4 + 200, 5 + 200, 6 + 200, 4 + 200, 6 + 200, 7 + 200,\n\n        //back-left\n        0 + 208, 1 + 208, 2 + 208, 0 + 208, 2 + 208, 3 + 208,\n        4 + 208, 5 + 208, 6 + 208, 4 + 208, 6 + 208, 7 + 208,\n    ]);\n\n    //// Front face\n    //1.0 / 3.0, 0.0 / 3.0,\n    //2.0 / 3.0, 0.0 / 3.0,\n    //2.0 / 3.0, 1.0 / 3.0,\n    //1.0 / 3.0, 1.0 / 3.0,\n    //\n    //// Back face\n    //1.0, 0.0 / 3.0,\n    //1.0, 1.0 / 3.0,\n    //2.0 / 3.0, 1.0 / 3.0,\n    //2.0 / 3.0, 0.0 / 3.0,\n    //\n    //\n    //// Top face\n    //2.0 / 3.0, 1.0 / 3.0,\n    //1.0, 1.0 / 3.0,\n    //1.0, 2.0 / 3.0,\n    //2.0 / 3.0, 2.0 / 3.0,\n    //\n    //// Bottom face\n    //0.0, 1.0 / 3.0,\n    //0.0, 0.0 / 3.0,\n    //1.0 / 3.0, 0.0 / 3.0,\n    //1.0 / 3.0, 1.0 / 3.0,\n    //\n    //// Right face\n    //0.0, 1.0 / 3.0,\n    //1.0 / 3.0, 1.0 / 3.0,\n    //1.0 / 3.0, 2.0 / 3.0,\n    //0.0, 2.0 / 3.0,\n    //\n    //// Left face\n    //2.0 / 3.0, 1.0 / 3.0,\n    //2.0 / 3.0, 2.0 / 3.0,\n    //1.0 / 3.0, 2.0 / 3.0,\n    //1.0 / 3.0, 1.0 / 3.0\n\n    private txtCoords = new Float32Array([\n        // Front face\n        1.0 / 3.0 + 1.0 / 15.0, 0.0 / 3.0 + 1.0 / 15.0,\n        2.0 / 3.0 - 1.0 / 15.0, 0.0 / 3.0 + 1.0 / 15.0,\n        2.0 / 3.0 - 1.0 / 15.0, 1.0 / 3.0 - 1.0 / 15.0,\n        1.0 / 3.0 + 1.0 / 15.0, 1.0 / 3.0 - 1.0 / 15.0,\n\n        // Back face\n        1.0 - 1.0 / 15.0, 0.0 / 3.0 + 1.0 / 15.0,\n        1.0 - 1.0 / 15.0, 1.0 / 3.0 - 1.0 / 15.0,\n        2.0 / 3.0 + 1.0 / 15.0, 1.0 / 3.0 - 1.0 / 15.0,\n        2.0 / 3.0 + 1.0 / 15.0, 0.0 / 3.0 + 1.0 / 15.0,\n\n\n        // Top face\n        2.0 / 3.0 + 1.0 / 15.0, 1.0 / 3.0 + 1.0 / 15.0,\n        1.0 - 1.0 / 15.0, 1.0 / 3.0 + 1.0 / 15.0,\n        1.0 - 1.0 / 15.0, 2.0 / 3.0 - 1.0 / 15.0,\n        2.0 / 3.0 + 1.0 / 15.0, 2.0 / 3.0 - 1.0 / 15.0,\n\n        // Bottom face\n        0.0 + 1.0 / 15.0, 1.0 / 3.0 - 1.0 / 15.0,\n        0.0 + 1.0 / 15.0, 0.0 / 3.0 + 1.0 / 15.0,\n        1.0 / 3.0 - 1.0 / 15.0, 0.0 / 3.0 + 1.0 / 15.0,\n        1.0 / 3.0 - 1.0 / 15.0, 1.0 / 3.0 - 1.0 / 15.0,\n\n        // Right face\n        0.0 + 1.0 / 15.0, 1.0 / 3.0 + 1.0 / 15.0,\n        1.0 / 3.0 - 1.0 / 15.0, 1.0 / 3.0 + 1.0 / 15.0,\n        1.0 / 3.0 - 1.0 / 15.0, 2.0 / 3.0 - 1.0 / 15.0,\n        0.0 + 1.0 / 15.0, 2.0 / 3.0 - 1.0 / 15.0,\n\n        // Left face\n        2.0 / 3.0 - 1.0 / 15.0, 1.0 / 3.0 + 1.0 / 15.0,\n        2.0 / 3.0 - 1.0 / 15.0, 2.0 / 3.0 - 1.0 / 15.0,\n        1.0 / 3.0 + 1.0 / 15.0, 2.0 / 3.0 - 1.0 / 15.0,\n        1.0 / 3.0 + 1.0 / 15.0, 1.0 / 3.0 + 1.0 / 15.0,\n\n        //top - left - front \n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n\n        //top-right-front \n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n\n        //top-left-back \n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n\n        //top-right-back \n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n\n        //bottom - left - front \n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n\n        //bottom-right-front \n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n\n        //bottom-left-back \n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n\n        //bottom-right-back \n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 1.0 / 30.0, 1.0 / 30.0,\n\n        //top-right\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n\n        //top-left\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n\n        //top-front\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n\n        //top-back\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n\n        //bottom-right\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n\n        //bottom-left\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n\n        //bottom-front\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n\n        //bottom-back\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n\n        //front-right\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n\n        //front-left\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n\n        //back-right\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n\n        //back-left\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        2.0 / 3.0 + 2.0 / 30.0, 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n        1.0 / 3.0 + 2.0 / 30.0, 1.0 / 3.0 + 1.0 / 30.0,\n    ]);\n\n    private ids = new Float32Array([\n        this.FRONT, // Front face\n        this.FRONT,\n        this.FRONT,\n        this.FRONT,\n        this.BACK, // Back face\n        this.BACK,\n        this.BACK,\n        this.BACK,\n        this.TOP, // Top face\n        this.TOP,\n        this.TOP,\n        this.TOP,\n        this.BOTTOM, // Bottom face\n        this.BOTTOM,\n        this.BOTTOM,\n        this.BOTTOM,\n        this.RIGHT, // Right face\n        this.RIGHT,\n        this.RIGHT,\n        this.RIGHT,\n        this.LEFT, // Left face\n        this.LEFT,\n        this.LEFT,\n        this.LEFT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_LEFT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_RIGHT_FRONT,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_LEFT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.TOP_RIGHT_BACK,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_LEFT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_RIGHT_FRONT,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_LEFT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.BOTTOM_RIGHT_BACK,\n        this.TOP_RIGHT,\n        this.TOP_RIGHT,\n        this.TOP_RIGHT,\n        this.TOP_RIGHT,\n        this.TOP_RIGHT,\n        this.TOP_RIGHT,\n        this.TOP_RIGHT,\n        this.TOP_RIGHT,\n        this.TOP_LEFT,\n        this.TOP_LEFT,\n        this.TOP_LEFT,\n        this.TOP_LEFT,\n        this.TOP_LEFT,\n        this.TOP_LEFT,\n        this.TOP_LEFT,\n        this.TOP_LEFT,\n        this.TOP_FRONT,\n        this.TOP_FRONT,\n        this.TOP_FRONT,\n        this.TOP_FRONT,\n        this.TOP_FRONT,\n        this.TOP_FRONT,\n        this.TOP_FRONT,\n        this.TOP_FRONT,\n        this.TOP_BACK,\n        this.TOP_BACK,\n        this.TOP_BACK,\n        this.TOP_BACK,\n        this.TOP_BACK,\n        this.TOP_BACK,\n        this.TOP_BACK,\n        this.TOP_BACK,\n        this.BOTTOM_RIGHT,\n        this.BOTTOM_RIGHT,\n        this.BOTTOM_RIGHT,\n        this.BOTTOM_RIGHT,\n        this.BOTTOM_RIGHT,\n        this.BOTTOM_RIGHT,\n        this.BOTTOM_RIGHT,\n        this.BOTTOM_RIGHT,\n        this.BOTTOM_LEFT,\n        this.BOTTOM_LEFT,\n        this.BOTTOM_LEFT,\n        this.BOTTOM_LEFT,\n        this.BOTTOM_LEFT,\n        this.BOTTOM_LEFT,\n        this.BOTTOM_LEFT,\n        this.BOTTOM_LEFT,\n        this.BOTTOM_FRONT,\n        this.BOTTOM_FRONT,\n        this.BOTTOM_FRONT,\n        this.BOTTOM_FRONT,\n        this.BOTTOM_FRONT,\n        this.BOTTOM_FRONT,\n        this.BOTTOM_FRONT,\n        this.BOTTOM_FRONT,\n        this.BOTTOM_BACK,\n        this.BOTTOM_BACK,\n        this.BOTTOM_BACK,\n        this.BOTTOM_BACK,\n        this.BOTTOM_BACK,\n        this.BOTTOM_BACK,\n        this.BOTTOM_BACK,\n        this.BOTTOM_BACK,\n        this.FRONT_RIGHT,\n        this.FRONT_RIGHT,\n        this.FRONT_RIGHT,\n        this.FRONT_RIGHT,\n        this.FRONT_RIGHT,\n        this.FRONT_RIGHT,\n        this.FRONT_RIGHT,\n        this.FRONT_RIGHT,\n        this.FRONT_LEFT,\n        this.FRONT_LEFT,\n        this.FRONT_LEFT,\n        this.FRONT_LEFT,\n        this.FRONT_LEFT,\n        this.FRONT_LEFT,\n        this.FRONT_LEFT,\n        this.FRONT_LEFT,\n        this.BACK_RIGHT,\n        this.BACK_RIGHT,\n        this.BACK_RIGHT,\n        this.BACK_RIGHT,\n        this.BACK_RIGHT,\n        this.BACK_RIGHT,\n        this.BACK_RIGHT,\n        this.BACK_RIGHT,\n        this.BACK_LEFT,\n        this.BACK_LEFT,\n        this.BACK_LEFT,\n        this.BACK_LEFT,\n        this.BACK_LEFT,\n        this.BACK_LEFT,\n        this.BACK_LEFT,\n        this.BACK_LEFT,\n    ]);\n}\n","export * from \"./plugin\";\nexport * from \"./NavigationCube/navigation-cube\";\nexport * from \"./Grid/grid\";\nexport * from \"./LoaderOverlay/loader-overlay\";\nexport * from \"./ClippingPlane/interactive-clipping-plane\"","/**\n * @category Core\n */\nexport class Product {\n    public name: string;\n    public id: number;\n    public abs: boolean;\n    public children?: Product[];\n\n    public static getByName(name: string): Product {\n        name = name.toUpperCase();\n        let toProcess: Product[] = [ProductInheritance];\n        while (toProcess.length !== 0) {\n            const type = toProcess.shift();\n            if (type.name.toUpperCase() === name) {\n                return type;\n            }\n            if (type.children) {\n                type.children.forEach((c) => { toProcess.push(c); });\n            }\n        }\n        return null;\n    }\n\n    public static getAllSubTypes(root: number): {[id: number]: boolean} {\n        // find roots\n        const roots: Product[] = [];\n        let toProcess: Product[] = [ProductInheritance];\n        while (toProcess.length !== 0) {\n            const type = toProcess.shift();\n            if (type.id === root) {\n                roots.push(type);\n            }\n            if (type.children) {\n                type.children.forEach((c) => { toProcess.push(c); });\n            }\n        }\n\n        // collect all non-abstract sub types\n        toProcess = roots.slice();\n        const result: {[id: number]: boolean} = {};\n        while (toProcess.length !== 0) {\n            const type = toProcess.shift();\n            if (type.abs === false) {\n                result[type.id] = true;\n            }\n            if (type.children) {\n                type.children.forEach((c) => { toProcess.push(c); });\n            }\n        }\n\n        return result;\n    }\n}\n\nconst ProductInheritance: Product = {\n    name: \"IfcProduct\",\n    id: 20,\n    abs: true,\n    children: [\n        {\n            name: \"IfcElement\",\n            id: 19,\n            abs: true,\n            children: [\n                {\n                    name: \"IfcDistributionElement\",\n                    id: 44,\n                    abs: false,\n                    children: [\n                        {\n                            name: \"IfcDistributionFlowElement\",\n                            id: 45,\n                            abs: false,\n                            children: [\n                                { name: \"IfcDistributionChamberElement\", id: 180, abs: false },\n                                {\n                                    name: \"IfcEnergyConversionDevice\",\n                                    id: 175,\n                                    abs: false,\n                                    children: [\n                                        { name: \"IfcAirToAirHeatRecovery\", id: 1097, abs: false },\n                                        { name: \"IfcBoiler\", id: 1105, abs: false },\n                                        { name: \"IfcBurner\", id: 1109, abs: false },\n                                        { name: \"IfcChiller\", id: 1119, abs: false },\n                                        { name: \"IfcCoil\", id: 1124, abs: false },\n                                        { name: \"IfcCondenser\", id: 1132, abs: false },\n                                        { name: \"IfcCooledBeam\", id: 1141, abs: false },\n                                        { name: \"IfcCoolingTower\", id: 1142, abs: false },\n                                        { name: \"IfcEngine\", id: 1164, abs: false },\n                                        { name: \"IfcEvaporativeCooler\", id: 1166, abs: false },\n                                        { name: \"IfcEvaporator\", id: 1167, abs: false },\n                                        { name: \"IfcHeatExchanger\", id: 1187, abs: false },\n                                        { name: \"IfcHumidifier\", id: 1188, abs: false },\n                                        { name: \"IfcTubeBundle\", id: 1305, abs: false },\n                                        { name: \"IfcUnitaryEquipment\", id: 1310, abs: false },\n                                        { name: \"IfcElectricGenerator\", id: 1160, abs: false },\n                                        { name: \"IfcElectricMotor\", id: 1161, abs: false },\n                                        { name: \"IfcMotorConnection\", id: 1216, abs: false },\n                                        { name: \"IfcSolarDevice\", id: 1270, abs: false },\n                                        { name: \"IfcTransformer\", id: 1303, abs: false }\n                                    ]\n                                }, {\n                                    name: \"IfcFlowController\",\n                                    id: 121,\n                                    abs: false,\n                                    children: [\n                                        { name: \"IfcElectricDistributionPoint\", id: 242, abs: false },\n                                        { name: \"IfcAirTerminalBox\", id: 1096, abs: false },\n                                        { name: \"IfcDamper\", id: 1148, abs: false },\n                                        { name: \"IfcFlowMeter\", id: 1182, abs: false },\n                                        { name: \"IfcValve\", id: 1311, abs: false },\n                                        { name: \"IfcElectricDistributionBoard\", id: 1157, abs: false },\n                                        { name: \"IfcElectricTimeControl\", id: 1162, abs: false },\n                                        { name: \"IfcProtectiveDevice\", id: 1235, abs: false },\n                                        { name: \"IfcSwitchingDevice\", id: 1290, abs: false }\n                                    ]\n                                }, {\n                                    name: \"IfcFlowFitting\",\n                                    id: 467,\n                                    abs: false,\n                                    children: [\n                                        { name: \"IfcDuctFitting\", id: 1153, abs: false },\n                                        { name: \"IfcPipeFitting\", id: 1222, abs: false },\n                                        { name: \"IfcCableCarrierFitting\", id: 1111, abs: false },\n                                        { name: \"IfcCableFitting\", id: 1113, abs: false },\n                                        { name: \"IfcJunctionBox\", id: 1195, abs: false }\n                                    ]\n                                }, {\n                                    name: \"IfcFlowMovingDevice\",\n                                    id: 502,\n                                    abs: false,\n                                    children: [\n                                        { name: \"IfcCompressor\", id: 1131, abs: false },\n                                        { name: \"IfcFan\", id: 1177, abs: false },\n                                        { name: \"IfcPump\", id: 1238, abs: false }\n                                    ]\n                                }, {\n                                    name: \"IfcFlowSegment\",\n                                    id: 574,\n                                    abs: false,\n                                    children: [\n                                        { name: \"IfcDuctSegment\", id: 1154, abs: false },\n                                        { name: \"IfcPipeSegment\", id: 1223, abs: false },\n                                        { name: \"IfcCableCarrierSegment\", id: 1112, abs: false },\n                                        { name: \"IfcCableSegment\", id: 1115, abs: false }\n                                    ]\n                                }, {\n                                    name: \"IfcFlowStorageDevice\",\n                                    id: 371,\n                                    abs: false,\n                                    children: [\n                                        { name: \"IfcTank\", id: 1293, abs: false },\n                                        { name: \"IfcElectricFlowStorageDevice\", id: 1159, abs: false }\n                                    ]\n                                }, {\n                                    name: \"IfcFlowTerminal\",\n                                    id: 46,\n                                    abs: false,\n                                    children: [\n                                        { name: \"IfcFireSuppressionTerminal\", id: 1179, abs: false },\n                                        { name: \"IfcSanitaryTerminal\", id: 1262, abs: false },\n                                        { name: \"IfcStackTerminal\", id: 1277, abs: false },\n                                        { name: \"IfcWasteTerminal\", id: 1315, abs: false },\n                                        { name: \"IfcAirTerminal\", id: 1095, abs: false },\n                                        { name: \"IfcMedicalDevice\", id: 1212, abs: false },\n                                        { name: \"IfcSpaceHeater\", id: 1272, abs: false },\n                                        { name: \"IfcAudioVisualAppliance\", id: 1099, abs: false },\n                                        { name: \"IfcCommunicationsAppliance\", id: 1127, abs: false },\n                                        { name: \"IfcElectricAppliance\", id: 1156, abs: false },\n                                        { name: \"IfcLamp\", id: 1198, abs: false },\n                                        { name: \"IfcLightFixture\", id: 1199, abs: false },\n                                        { name: \"IfcOutlet\", id: 1219, abs: false }\n                                    ]\n                                }, {\n                                    name: \"IfcFlowTreatmentDevice\",\n                                    id: 425,\n                                    abs: false,\n                                    children: [\n                                        { name: \"IfcInterceptor\", id: 1193, abs: false },\n                                        { name: \"IfcDuctSilencer\", id: 1155, abs: false },\n                                        { name: \"IfcFilter\", id: 1178, abs: false }\n                                    ]\n                                }\n                            ]\n                        }, {\n                            name: \"IfcDistributionControlElement\",\n                            id: 468,\n                            abs: false,\n                            children: [\n                                { name: \"IfcProtectiveDeviceTrippingUnit\", id: 1236, abs: false },\n                                { name: \"IfcActuator\", id: 1091, abs: false },\n                                { name: \"IfcAlarm\", id: 1098, abs: false },\n                                { name: \"IfcController\", id: 1139, abs: false },\n                                { name: \"IfcFlowInstrument\", id: 1181, abs: false },\n                                { name: \"IfcSensor\", id: 1264, abs: false },\n                                { name: \"IfcUnitaryControlElement\", id: 1308, abs: false }\n                            ]\n                        }\n                    ]\n                }, {\n                    name: \"IfcElementComponent\",\n                    id: 424,\n                    abs: true,\n                    children: [\n                        { name: \"IfcDiscreteAccessory\", id: 423, abs: false },\n                        {\n                            name: \"IfcFastener\",\n                            id: 535,\n                            abs: false,\n                            children: [{ name: \"IfcMechanicalFastener\", id: 536, abs: false }]\n                        }, {\n                            name: \"IfcReinforcingElement\",\n                            id: 262,\n                            abs: true,\n                            children: [\n                                { name: \"IfcReinforcingBar\", id: 571, abs: false },\n                                { name: \"IfcReinforcingMesh\", id: 531, abs: false },\n                                { name: \"IfcTendon\", id: 261, abs: false },\n                                { name: \"IfcTendonAnchor\", id: 675, abs: false }\n                            ]\n                        }, { name: \"IfcBuildingElementPart\", id: 220, abs: false },\n                        { name: \"IfcMechanicalFastener\", id: 536, abs: false },\n                        { name: \"IfcVibrationIsolator\", id: 1312, abs: false }\n                    ]\n                }, {\n                    name: \"IfcFeatureElement\",\n                    id: 386,\n                    abs: true,\n                    children: [\n                        {\n                            name: \"IfcFeatureElementSubtraction\",\n                            id: 499,\n                            abs: true,\n                            children: [\n                                {\n                                    name: \"IfcEdgeFeature\",\n                                    id: 764,\n                                    abs: true,\n                                    children: [\n                                        { name: \"IfcChamferEdgeFeature\", id: 765, abs: false },\n                                        { name: \"IfcRoundedEdgeFeature\", id: 766, abs: false }\n                                    ]\n                                }, {\n                                    name: \"IfcOpeningElement\",\n                                    id: 498,\n                                    abs: false,\n                                    children: [{ name: \"IfcOpeningStandardCase\", id: 1217, abs: false }]\n                                }, { name: \"IfcVoidingFeature\", id: 1313, abs: false }\n                            ]\n                        }, {\n                            name: \"IfcFeatureElementAddition\",\n                            id: 385,\n                            abs: true,\n                            children: [{ name: \"IfcProjectionElement\", id: 384, abs: false }]\n                        }, { name: \"IfcSurfaceFeature\", id: 1287, abs: false }\n                    ]\n                }, {\n                    name: \"IfcBuildingElement\",\n                    id: 26,\n                    abs: true,\n                    children: [\n                        {\n                            name: \"IfcBuildingElementComponent\",\n                            id: 221,\n                            abs: true,\n                            children: [\n                                { name: \"IfcBuildingElementPart\", id: 220, abs: false },\n                                {\n                                    name: \"IfcReinforcingElement\",\n                                    id: 262,\n                                    abs: true,\n                                    children: [\n                                        { name: \"IfcReinforcingBar\", id: 571, abs: false },\n                                        { name: \"IfcReinforcingMesh\", id: 531, abs: false },\n                                        { name: \"IfcTendon\", id: 261, abs: false },\n                                        { name: \"IfcTendonAnchor\", id: 675, abs: false }\n                                    ]\n                                }\n                            ]\n                        }, { name: \"IfcFooting\", id: 120, abs: false }, { name: \"IfcPile\", id: 572, abs: false },\n                        {\n                            name: \"IfcBeam\",\n                            id: 171,\n                            abs: false,\n                            children: [{ name: \"IfcBeamStandardCase\", id: 1104, abs: false }]\n                        },\n                        {\n                            name: \"IfcColumn\",\n                            id: 383,\n                            abs: false,\n                            children: [{ name: \"IfcColumnStandardCase\", id: 1126, abs: false }]\n                        }, { name: \"IfcCurtainWall\", id: 456, abs: false },\n                        {\n                            name: \"IfcDoor\",\n                            id: 213,\n                            abs: false,\n                            children: [{ name: \"IfcDoorStandardCase\", id: 1151, abs: false }]\n                        },\n                        {\n                            name: \"IfcMember\",\n                            id: 310,\n                            abs: false,\n                            children: [{ name: \"IfcMemberStandardCase\", id: 1214, abs: false }]\n                        }, {\n                            name: \"IfcPlate\",\n                            id: 351,\n                            abs: false,\n                            children: [{ name: \"IfcPlateStandardCase\", id: 1224, abs: false }]\n                        }, { name: \"IfcRailing\", id: 350, abs: false }, { name: \"IfcRamp\", id: 414, abs: false },\n                        { name: \"IfcRampFlight\", id: 348, abs: false }, { name: \"IfcRoof\", id: 347, abs: false },\n                        {\n                            name: \"IfcSlab\",\n                            id: 99,\n                            abs: false,\n                            children: [\n                                { name: \"IfcSlabElementedCase\", id: 1268, abs: false },\n                                { name: \"IfcSlabStandardCase\", id: 1269, abs: false }\n                            ]\n                        }, { name: \"IfcStair\", id: 346, abs: false }, { name: \"IfcStairFlight\", id: 25, abs: false },\n                        {\n                            name: \"IfcWall\",\n                            id: 452,\n                            abs: false,\n                            children: [\n                                { name: \"IfcWallStandardCase\", id: 453, abs: false },\n                                { name: \"IfcWallElementedCase\", id: 1314, abs: false }\n                            ]\n                        }, {\n                            name: \"IfcWindow\",\n                            id: 667,\n                            abs: false,\n                            children: [{ name: \"IfcWindowStandardCase\", id: 1316, abs: false }]\n                        }, { name: \"IfcBuildingElementProxy\", id: 560, abs: false },\n                        { name: \"IfcCovering\", id: 382, abs: false },\n                        { name: \"IfcChimney\", id: 1120, abs: false }, { name: \"IfcShadingDevice\", id: 1265, abs: false }\n                    ]\n                }, { name: \"IfcElementAssembly\", id: 18, abs: false },\n                {\n                    name: \"IfcFurnishingElement\",\n                    id: 253,\n                    abs: false,\n                    children: [\n                        { name: \"IfcFurniture\", id: 1184, abs: false },\n                        { name: \"IfcSystemFurnitureElement\", id: 1291, abs: false }\n                    ]\n                }, { name: \"IfcTransportElement\", id: 416, abs: false },\n                { name: \"IfcVirtualElement\", id: 168, abs: false },\n                { name: \"IfcElectricalElement\", id: 23, abs: false },\n                { name: \"IfcEquipmentElement\", id: 212, abs: false },\n                { name: \"IfcCivilElement\", id: 1122, abs: false },\n                { name: \"IfcGeographicElement\", id: 1185, abs: false }\n            ]\n        }, { name: \"IfcPort\", id: 179, abs: true, children: [{ name: \"IfcDistributionPort\", id: 178, abs: false }] },\n        { name: \"IfcProxy\", id: 447, abs: false }, {\n            name: \"IfcStructuralActivity\",\n            id: 41,\n            abs: true,\n            children: [\n                {\n                    name: \"IfcStructuralAction\",\n                    id: 40,\n                    abs: true,\n                    children: [\n                        {\n                            name: \"IfcStructuralLinearAction\",\n                            id: 463,\n                            abs: false,\n                            children: [{ name: \"IfcStructuralLinearActionVarying\", id: 464, abs: false }]\n                        }, {\n                            name: \"IfcStructuralPlanarAction\",\n                            id: 39,\n                            abs: false,\n                            children: [{ name: \"IfcStructuralPlanarActionVarying\", id: 357, abs: false }]\n                        }, { name: \"IfcStructuralPointAction\", id: 356, abs: false },\n                        {\n                            name: \"IfcStructuralCurveAction\",\n                            id: 1279,\n                            abs: false,\n                            children: [{ name: \"IfcStructuralLinearAction\", id: 463, abs: false }]\n                        }, {\n                            name: \"IfcStructuralSurfaceAction\",\n                            id: 1284,\n                            abs: false,\n                            children: [{ name: \"IfcStructuralPlanarAction\", id: 39, abs: false }]\n                        }\n                    ]\n                }, {\n                    name: \"IfcStructuralReaction\",\n                    id: 355,\n                    abs: true,\n                    children: [\n                        { name: \"IfcStructuralPointReaction\", id: 354, abs: false },\n                        { name: \"IfcStructuralCurveReaction\", id: 1280, abs: false },\n                        { name: \"IfcStructuralSurfaceReaction\", id: 1285, abs: false }\n                    ]\n                }\n            ]\n        }, {\n            name: \"IfcStructuralItem\",\n            id: 226,\n            abs: true,\n            children: [\n                {\n                    name: \"IfcStructuralConnection\",\n                    id: 265,\n                    abs: true,\n                    children: [\n                        { name: \"IfcStructuralCurveConnection\", id: 534, abs: false },\n                        { name: \"IfcStructuralPointConnection\", id: 533, abs: false },\n                        { name: \"IfcStructuralSurfaceConnection\", id: 264, abs: false }\n                    ]\n                }, {\n                    name: \"IfcStructuralMember\",\n                    id: 225,\n                    abs: true,\n                    children: [\n                        {\n                            name: \"IfcStructuralCurveMember\",\n                            id: 224,\n                            abs: false,\n                            children: [{ name: \"IfcStructuralCurveMemberVarying\", id: 227, abs: false }]\n                        }, {\n                            name: \"IfcStructuralSurfaceMember\",\n                            id: 420,\n                            abs: false,\n                            children: [{ name: \"IfcStructuralSurfaceMemberVarying\", id: 421, abs: false }]\n                        }\n                    ]\n                }\n            ]\n        }, { name: \"IfcAnnotation\", id: 634, abs: false }, {\n            name: \"IfcSpatialStructureElement\",\n            id: 170,\n            abs: true,\n            children: [\n                { name: \"IfcBuilding\", id: 169, abs: false }, { name: \"IfcBuildingStorey\", id: 459, abs: false },\n                { name: \"IfcSite\", id: 349, abs: false }, { name: \"IfcSpace\", id: 454, abs: false }\n            ]\n        }, { name: \"IfcGrid\", id: 564, abs: false }, {\n            name: \"IfcSpatialElement\",\n            id: 1273,\n            abs: true,\n            children: [\n                {\n                    name: \"IfcSpatialStructureElement\",\n                    id: 170,\n                    abs: true,\n                    children: [\n                        { name: \"IfcBuilding\", id: 169, abs: false },\n                        { name: \"IfcBuildingStorey\", id: 459, abs: false },\n                        { name: \"IfcSite\", id: 349, abs: false }, { name: \"IfcSpace\", id: 454, abs: false }\n                    ]\n                }, {\n                    name: \"IfcExternalSpatialStructureElement\",\n                    id: 1175,\n                    abs: true,\n                    children: [{ name: \"IfcExternalSpatialElement\", id: 1174, abs: false }]\n                }, { name: \"IfcSpatialZone\", id: 1275, abs: false }\n            ]\n        }\n    ]\n};\n","/**\n * Enumeration of product types.\n * @readonly\n * @enum {number}\n * @category Core\n */\nexport enum ProductType {\n    IFCPRODUCT = 20,\n    IFCELEMENT = 19,\n    IFCBUILDINGELEMENT = 26,\n    IFCFOOTING = 120,\n    IFCPILE = 572,\n    IFCBEAM = 171,\n    IFCBEAMSTANDARDCASE = 1104,\n    IFCBUILDINGELEMENTPROXY = 560,\n    IFCCHIMNEY = 1120,\n    IFCCOLUMN = 383,\n    IFCCOLUMNSTANDARDCASE = 1126,\n    IFCCOVERING = 382,\n    IFCCURTAINWALL = 456,\n    IFCDOOR = 213,\n    IFCDOORSTANDARDCASE = 1151,\n    IFCMEMBER = 310,\n    IFCMEMBERSTANDARDCASE = 1214,\n    IFCPLATE = 351,\n    IFCPLATESTANDARDCASE = 1224,\n    IFCRAILING = 350,\n    IFCRAMP = 414,\n    IFCRAMPFLIGHT = 348,\n    IFCROOF = 347,\n    IFCSHADINGDEVICE = 1265,\n    IFCSLAB = 99,\n    IFCSLABELEMENTEDCASE = 1268,\n    IFCSLABSTANDARDCASE = 1269,\n    IFCSTAIR = 346,\n    IFCSTAIRFLIGHT = 25,\n    IFCWALL = 452,\n    IFCWALLELEMENTEDCASE = 1314,\n    IFCWALLSTANDARDCASE = 453,\n    IFCWINDOW = 667,\n    IFCWINDOWSTANDARDCASE = 1316,\n    IFCELEMENTCOMPONENT = 424,\n    IFCREINFORCINGELEMENT = 262,\n    IFCREINFORCINGBAR = 571,\n    IFCREINFORCINGMESH = 531,\n    IFCTENDON = 261,\n    IFCTENDONANCHOR = 675,\n    IFCBUILDINGELEMENTPART = 220,\n    IFCDISCRETEACCESSORY = 423,\n    IFCFASTENER = 535,\n    IFCMECHANICALFASTENER = 536,\n    IFCVIBRATIONISOLATOR = 1312,\n    IFCFEATUREELEMENT = 386,\n    IFCSURFACEFEATURE = 1287,\n    IFCFEATUREELEMENTSUBTRACTION = 499,\n    IFCVOIDINGFEATURE = 1313,\n    IFCOPENINGELEMENT = 498,\n    IFCOPENINGSTANDARDCASE = 1217,\n    IFCFEATUREELEMENTADDITION = 385,\n    IFCPROJECTIONELEMENT = 384,\n    IFCFURNISHINGELEMENT = 253,\n    IFCFURNITURE = 1184,\n    IFCSYSTEMFURNITUREELEMENT = 1291,\n    IFCDISTRIBUTIONELEMENT = 44,\n    IFCDISTRIBUTIONFLOWELEMENT = 45,\n    IFCDISTRIBUTIONCHAMBERELEMENT = 180,\n    IFCENERGYCONVERSIONDEVICE = 175,\n    IFCAIRTOAIRHEATRECOVERY = 1097,\n    IFCBOILER = 1105,\n    IFCBURNER = 1109,\n    IFCCHILLER = 1119,\n    IFCCOIL = 1124,\n    IFCCONDENSER = 1132,\n    IFCCOOLEDBEAM = 1141,\n    IFCCOOLINGTOWER = 1142,\n    IFCENGINE = 1164,\n    IFCEVAPORATIVECOOLER = 1166,\n    IFCEVAPORATOR = 1167,\n    IFCHEATEXCHANGER = 1187,\n    IFCHUMIDIFIER = 1188,\n    IFCTUBEBUNDLE = 1305,\n    IFCUNITARYEQUIPMENT = 1310,\n    IFCELECTRICGENERATOR = 1160,\n    IFCELECTRICMOTOR = 1161,\n    IFCMOTORCONNECTION = 1216,\n    IFCSOLARDEVICE = 1270,\n    IFCTRANSFORMER = 1303,\n    IFCFLOWCONTROLLER = 121,\n    IFCAIRTERMINALBOX = 1096,\n    IFCDAMPER = 1148,\n    IFCFLOWMETER = 1182,\n    IFCVALVE = 1311,\n    IFCELECTRICDISTRIBUTIONBOARD = 1157,\n    IFCELECTRICTIMECONTROL = 1162,\n    IFCPROTECTIVEDEVICE = 1235,\n    IFCSWITCHINGDEVICE = 1290,\n    IFCFLOWFITTING = 467,\n    IFCDUCTFITTING = 1153,\n    IFCPIPEFITTING = 1222,\n    IFCCABLECARRIERFITTING = 1111,\n    IFCCABLEFITTING = 1113,\n    IFCJUNCTIONBOX = 1195,\n    IFCFLOWMOVINGDEVICE = 502,\n    IFCCOMPRESSOR = 1131,\n    IFCFAN = 1177,\n    IFCPUMP = 1238,\n    IFCFLOWSEGMENT = 574,\n    IFCDUCTSEGMENT = 1154,\n    IFCPIPESEGMENT = 1223,\n    IFCCABLECARRIERSEGMENT = 1112,\n    IFCCABLESEGMENT = 1115,\n    IFCFLOWSTORAGEDEVICE = 371,\n    IFCTANK = 1293,\n    IFCELECTRICFLOWSTORAGEDEVICE = 1159,\n    IFCFLOWTERMINAL = 46,\n    IFCFIRESUPPRESSIONTERMINAL = 1179,\n    IFCSANITARYTERMINAL = 1262,\n    IFCSTACKTERMINAL = 1277,\n    IFCWASTETERMINAL = 1315,\n    IFCAIRTERMINAL = 1095,\n    IFCMEDICALDEVICE = 1212,\n    IFCSPACEHEATER = 1272,\n    IFCAUDIOVISUALAPPLIANCE = 1099,\n    IFCCOMMUNICATIONSAPPLIANCE = 1127,\n    IFCELECTRICAPPLIANCE = 1156,\n    IFCLAMP = 1198,\n    IFCLIGHTFIXTURE = 1199,\n    IFCOUTLET = 1219,\n    IFCFLOWTREATMENTDEVICE = 425,\n    IFCINTERCEPTOR = 1193,\n    IFCDUCTSILENCER = 1155,\n    IFCFILTER = 1178,\n    IFCDISTRIBUTIONCONTROLELEMENT = 468,\n    IFCPROTECTIVEDEVICETRIPPINGUNIT = 1236,\n    IFCACTUATOR = 1091,\n    IFCALARM = 1098,\n    IFCCONTROLLER = 1139,\n    IFCFLOWINSTRUMENT = 1181,\n    IFCSENSOR = 1264,\n    IFCUNITARYCONTROLELEMENT = 1308,\n    IFCCIVILELEMENT = 1122,\n    IFCELEMENTASSEMBLY = 18,\n    IFCGEOGRAPHICELEMENT = 1185,\n    IFCTRANSPORTELEMENT = 416,\n    IFCVIRTUALELEMENT = 168,\n    IFCSTRUCTURALACTIVITY = 41,\n    IFCSTRUCTURALACTION = 40,\n    IFCSTRUCTURALCURVEACTION = 1279,\n    IFCSTRUCTURALLINEARACTION = 463,\n    IFCSTRUCTURALSURFACEACTION = 1284,\n    IFCSTRUCTURALPLANARACTION = 39,\n    IFCSTRUCTURALPOINTACTION = 356,\n    IFCSTRUCTURALREACTION = 355,\n    IFCSTRUCTURALCURVEREACTION = 1280,\n    IFCSTRUCTURALPOINTREACTION = 354,\n    IFCSTRUCTURALSURFACEREACTION = 1285,\n    IFCSTRUCTURALITEM = 226,\n    IFCSTRUCTURALCONNECTION = 265,\n    IFCSTRUCTURALCURVECONNECTION = 534,\n    IFCSTRUCTURALPOINTCONNECTION = 533,\n    IFCSTRUCTURALSURFACECONNECTION = 264,\n    IFCSTRUCTURALMEMBER = 225,\n    IFCSTRUCTURALCURVEMEMBER = 224,\n    IFCSTRUCTURALCURVEMEMBERVARYING = 227,\n    IFCSTRUCTURALSURFACEMEMBER = 420,\n    IFCSTRUCTURALSURFACEMEMBERVARYING = 421,\n    IFCPORT = 179,\n    IFCDISTRIBUTIONPORT = 178,\n    IFCANNOTATION = 634,\n    IFCSPATIALELEMENT = 1273,\n    IFCSPATIALSTRUCTUREELEMENT = 170,\n    IFCBUILDING = 169,\n    IFCBUILDINGSTOREY = 459,\n    IFCSITE = 349,\n    IFCSPACE = 454,\n    IFCEXTERNALSPATIALSTRUCTUREELEMENT = 1175,\n    IFCEXTERNALSPATIALELEMENT = 1174,\n    IFCSPATIALZONE = 1275,\n    IFCGRID = 564,\n    IFCPROXY = 447,\n}\n","import { LoadingPhase, Message, MessageType } from \"../common/message\";\n\n/**\n * Convenient class for binary reading. Arrays are read as new views on slices of the original data buffer,\n * individual values are read using little endian data view. \n */\nexport class BinaryReader {\n    private _buffer: ArrayBuffer = null;\n    private _view: DataView = null;\n    private _position: number = 0;\n    // tslint:disable: no-empty\n    private _progress: (message: Message) => void = (m) => { };\n    private _lastProgress = 0;\n\n    /**\n     * callback which will be called after asynchronous loading of data is finished\n     */\n    public onloaded: (reader: BinaryReader) => void;\n\n    public onerror: (message?: string) => void;\n\n    /**\n     * Current position\n     */\n    public get Position(): number {\n        return this._position;\n    }\n\n    /**\n     * Gets reader for a sub array starting at current position.\n     * This enforces isolation of reading within certain data island.\n     * \n     * @param length Byte length of the data island\n     */\n    public getSubReader(length: number): BinaryReader {\n        var reader = new BinaryReader();\n        //get slice of the data\n        var data = this._buffer.slice(this._position, this._position + length);\n        //load is synchronous with ArrayBuffer argument\n        reader.load(data, null, null);\n\n        //move position after the data island\n        this._position += length;\n\n        //return new reader\n        return reader;\n    }\n\n    /**\n     * Pass url string, blob, file of byte array to this function to initialize the reader. Only array buffer takes imidiate effect.\n     * Othe sources are loaded asynchronously and you need to use 'onloaded' delegate to use the reader only after it is initialized woth the data.\n     * @param source URL string of the file or BLOB or File or ArrayBuffer object\n     * @param headers http headers to be used to fetch data\n     * @param progress Callback which can be repeatedly called to report processing progress\n     */\n    public load(source: string | Blob | File | ArrayBuffer, headers: { [name: string]: string }, progress: (message: Message) => void): void {\n        this._position = 0;\n        var self = this;\n        progress = progress ? progress : (m) => { };\n        this._progress = progress;\n\n        if (typeof (source) == 'undefined' || source == null) {\n            throw 'Source must be defined';\n        }\n        if (typeof (source) == 'string') {\n            const xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", source, true);\n            xhr.onreadystatechange = () => {\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                    var fReader = new FileReader();\n                    fReader.onloadend = () => {\n                        if (fReader.result && typeof (fReader.result) !== 'string') {\n                            //set data buffer for next processing\n                            self._buffer = fReader.result as ArrayBuffer;\n                            self._view = new DataView(self._buffer);\n                            //do predefined processing of the data\n                            if (self.onloaded) {\n                                self.onloaded(self);\n                            }\n                        }\n                    };\n                    fReader.onprogress = (evt: ProgressEvent) => {\n                        progress({\n                            message: 'Downloading geometry',\n                            percent: Math.floor(evt.loaded / evt.total * 100.0),\n                            type: MessageType.PROGRESS,\n                            phase: LoadingPhase.DOWNLOADING\n                        });\n                    };\n                    fReader.readAsArrayBuffer(xhr.response);\n                }\n                //throw exception as a warning\n                if (xhr.readyState == 4 && xhr.status != 200) {\n                    var msg = 'Failed to fetch binary data from server. Server code: ' +\n                        xhr.status +\n                        '. This might be due to CORS policy of your browser if you run this as a local file.';\n                    progress(\n                        {\n                            message: 'Downloading geometry',\n                            percent: 0,\n                            type: MessageType.FAILED,\n                            phase: LoadingPhase.DOWNLOADING\n                        }\n                    );\n                    if (self.onerror) {\n                        self.onerror(msg);\n                    }\n                    throw msg;\n                }\n            };\n            xhr.responseType = 'blob';\n            if (headers != null) {\n                Object.keys(headers).forEach((header) => {\n                    const value = headers[header];\n                    xhr.setRequestHeader(header, value);\n                });\n            }\n            xhr.send();\n        } else if (source instanceof Blob || (typeof (File) !== 'undefined' && source instanceof File)) {\n            var fReader = new FileReader();\n            fReader.onloadend = () => {\n                if (fReader.result && typeof (fReader.result) !== 'string') {\n                    //set data buffer for next processing\n                    self._buffer = fReader.result as ArrayBuffer;\n                    self._view = new DataView(self._buffer);\n                    //do predefined processing of the data\n                    if (self.onloaded) {\n                        self.onloaded(self);\n                    }\n                }\n            };\n            fReader.onprogress = (evt: ProgressEvent) => {\n                progress({\n                    message: 'Loading binary data',\n                    percent: Math.floor(evt.loaded / evt.total * 100.0),\n                    type: MessageType.PROGRESS,\n                    phase: LoadingPhase.DOWNLOADING\n                });\n            };\n            fReader.readAsArrayBuffer(source);\n        } else if (source instanceof ArrayBuffer) {\n            this._buffer = source;\n            this._view = new DataView(self._buffer);\n            if (self.onloaded) {\n                self.onloaded(self);\n            }\n        }\n    }\n\n    public seek(position: number): void {\n        if (position < 0 || position > this._buffer.byteLength) {\n            throw \"Position out of range.\";\n        }\n\n        this._position = position;\n    }\n\n    public isEOF(): boolean {\n        if (this._position == null) {\n            throw \"Position is not defined\";\n        }\n        return this._position == this._buffer.byteLength;\n    }\n\n    private readArray<T>(unitSize: number, count: number, ctor: new (data: ArrayBuffer) => T): T {\n        if (count == null) {\n            count = 1;\n        }\n        var length = unitSize * count;\n        var offset = this._position;\n        this._position += length;\n\n        this.reportProgress();\n\n        return count === 1\n            ? new ctor(this._buffer.slice(offset, offset + length))[0]\n            : new ctor(this._buffer.slice(offset, offset + length));\n    }\n\n    private move(size: number): number {\n        var offset = this._position;\n        this._position += size;\n        this.reportProgress();\n        return offset;\n    }\n\n    private reportProgress() {\n        if (this._progress == null) {\n            return;\n        }\n        // report every 0.5MB\n        if ((this._position - this._lastProgress) > 5e5) {\n            this._lastProgress = this._position;\n            this._progress({\n                type: MessageType.PROGRESS,\n                message: \"Reading data\",\n                percent: Math.floor(100.0 * this._position / this._buffer.byteLength),\n                phase: LoadingPhase.READING\n            });\n        }\n    }\n\n    public readByte(): number {\n        return this.readUint8();\n    }\n\n    public readByteArray(count: number): Uint8Array {\n        return this.readUint8Array(count);\n    }\n\n    public readUint8(): number {\n        var offset = this.move(1);\n        return this._view.getUint8(offset);\n    }\n\n    public readUint8Array(count: number): Uint8Array {\n        return this.readArray(1, count, Uint8Array);\n    }\n\n    public readInt16(): number {\n        var offset = this.move(2);\n        return this._view.getInt16(offset, true);\n    }\n\n    public readInt16Array(count: number): Int16Array {\n        return this.readArray(2, count, Int16Array);\n    }\n\n    public readUInt16(): number {\n        var offset = this.move(2);\n        return this._view.getUint16(offset, true);\n    }\n\n    public readUint16Array(count: number): Uint16Array {\n        return this.readArray(2, count, Uint16Array);\n    }\n\n    public readInt32(): number {\n        var offset = this.move(4);\n        return this._view.getInt32(offset, true);\n    }\n\n    public readInt32Array(count: number): Int32Array {\n        return this.readArray(4, count, Int32Array);\n    }\n\n    public readUint32(): number {\n        var offset = this.move(4);\n        return this._view.getUint32(offset, true);\n    }\n\n    public readUint32Array(count: number): Uint32Array {\n        return this.readArray(4, count, Uint32Array);\n    }\n\n    public readFloat32(): number {\n        var offset = this.move(4);\n        return this._view.getFloat32(offset, true);\n    }\n\n    public readFloat32Array(count: number): Float32Array {\n        return this.readArray(4, count, Float32Array);\n    }\n\n    public readFloat64(): number {\n        var offset = this.move(8);\n        return this._view.getFloat64(offset, true);\n    }\n\n    public readFloat64Array(count: number): Float64Array {\n        return this.readArray(8, count, Float64Array);\n    }\n\n    //functions for a higher objects like points, colours and matrices\n    public readChar(count?: number) {\n        if (count == null) {\n            count = 1;\n        }\n        var bytes = this.readByteArray(count);\n        var result = new Array(count);\n        for (var i in bytes) {\n            result[i] = String.fromCharCode(bytes[i]);\n        }\n        return count === 1 ? result[0] : result;\n    }\n\n    public readPoint(count?: number) {\n        if (count == null) {\n            count = 1;\n        }\n        var coords = this.readFloat32Array(count * 3);\n        var result = new Array(count);\n        for (var i = 0; i < count; i++) {\n            var offset = i * 3 * 4;\n            //only create new view on the buffer so that no new memory is allocated\n            var point = new Float32Array(coords.buffer, offset, 3);\n            result[i] = point;\n        }\n        return count === 1 ? result[0] : result;\n    }\n\n    public readRgba(count?: number) {\n        if (count == null) {\n            count = 1;\n        }\n        var values = this.readByteArray(count * 4);\n        var result = new Array(count);\n        for (var i = 0; i < count; i++) {\n            var offset = i * 4;\n            var colour = new Uint8Array(values.buffer, offset, 4);\n            result[i] = colour;\n        }\n        return count === 1 ? result[0] : result;\n    }\n\n    public readPackedNormal(count?: number) {\n        if (count == null) {\n            count = 1;\n        }\n        var values = this.readUint8Array(count * 2);\n        var result = new Array(count);\n        for (var i = 0; i < count; i++) {\n            var uv = new Uint8Array(values.buffer, i * 2, 2);\n            result[i] = uv;\n        }\n        return count === 1 ? result[0] : result;\n    }\n\n    public readMatrix4x4(count?: number) {\n        if (count == null) {\n            count = 1;\n        }\n        var values = this.readFloat32Array(count * 16);\n        var result = new Array(count);\n        for (var i = 0; i < count; i++) {\n            var offset = i * 16 * 4;\n            var matrix = new Float32Array(values.buffer, offset, 16);\n            result[i] = matrix;\n        }\n        return count === 1 ? result[0] : result;\n    }\n\n    public readMatrix4x4_64(count?: number) {\n        if (count == null) {\n            count = 1;\n        }\n        var values = this.readFloat64Array(count * 16);\n        var result = new Array(count);\n        for (var i = 0; i < count; i++) {\n            var offset = i * 16 * 8;\n            var matrix = new Float64Array(values.buffer, offset, 16);\n            result[i] = matrix;\n        }\n        return count === 1 ? result[0] : result;\n    }\n\n    /**\n     * Reads slice of data from the underlying array buffer\n     * @param length Length of requested data. Start is at current position\n     */\n    public readData(length: number): ArrayBuffer {\n        let offset = this.move(length);\n        return this._buffer.slice(offset, offset + length);\n    }\n}\n","import { BinaryReader } from \"./binary-reader\";\nimport { TriangulatedShape } from \"./triangulated-shape\";\nimport { State, StatePriorities } from \"../common/state\";\nimport { ProductType } from \"../product-type\";\nimport { LoadingPhase, Message, MessageType } from \"../common/message\";\nimport { ProductMap } from \"../common/product-map\";\nimport { vec3 } from \"gl-matrix\";\n\n/**\n * @category Core\n */\nexport type ReaderOptions = {\n\n    /** Determines whether the viewer loaded will attempt to sort the geometry by size, during the load\n    *\n    * Size-sorted geometry provides a better experience when adaptive rendering is enabled,\n    * since the smaller items are dropped from rendering first.\n    *\n    * For performance reasons, it is preferable to sort the geometry during wexbim generation,\n    * but enabling this option will perform the sorting in the browser.\n    */\n    orderGeometryBySize?: boolean\n}\n\n\nexport class ModelGeometry {\n\n    private progress: (message: Message) => void;\n\n    //all this data is to be fed into GPU as attributes\n    public normals = new Uint8Array(0);\n    public indices = new Float32Array(0);\n    public products = new Float32Array(0);\n    public transformations = new Float32Array(0);\n    public styleIndices = new Uint16Array(0);\n    public states = new Uint8Array(0);\n    //this is the only array we need to keep alive on client side to be able to change appearance of the model\n\n    //these will be sent to GPU as the textures\n    public vertices = new Float32Array(0);\n    public matrices = new Float32Array(0);\n    public styles = new Uint8Array(0);\n\n    public meter = 1000;\n    public wcs = [0, 0, 0];\n\n\n    //this will be used to change appearance of the objects\n    //map objects have a format: \n    //map = {\n    //\tproductID: int,\n    //\ttype: int,\n    //\tbBox: Float32Array(6),\n    //\tspans: [Int32Array([int, int]),Int32Array([int, int]), ...] //spanning indexes defining shapes of product and it's state\n    //};\n\n    private _iVertex = 0;\n    private _iIndexForward = 0;\n    private _iIndexBackward = 0;\n    private _iTransform = 0;\n    private _iMatrix = 0;\n    private _maxVersionSupported = 4;\n\n    public productMaps: { [id: number]: ProductMap } = {};\n    public productIdLookup = [];\n    public regions: Region[];\n    public transparentIndex: number;\n\n    public breaks: { [percent: number]: number[] } = {\n        10: [],\n        20: [],\n        40: [],\n        30: [],\n        50: [],\n        60: [],\n        70: [],\n        80: [],\n        90: [],\n        100: [],\n    }\n\n    private _reader: BinaryReader;\n    private _styleMap = new StyleMap();\n\n    private parse(binReader: BinaryReader, options: Partial<ReaderOptions>) {\n        if (!binReader || binReader.isEOF()) {\n            // don't do anything if there is no data\n            return;\n        }\n        this._reader = binReader;\n\n        let br = binReader;\n        let magicNumber = br.readInt32();\n        if (magicNumber !== 94132117) {\n            throw new Error('Magic number mismatch. This is not a wexBIM file.');\n        }\n        let version = br.readByte();\n        if (version > this._maxVersionSupported) {\n            throw new Error(`Viewer doesn't support version ${version} of the wexBIM stream`);\n        }\n        let numShapes = br.readInt32();\n        let numVertices = br.readInt32();\n        let numTriangles = br.readInt32();\n        let numMatrices = br.readInt32();\n        let numProducts = br.readInt32();\n        let numStyles = br.readInt32();\n        this.meter = br.readFloat32();\n        if (version > 3) {\n            this.wcs = [br.readFloat64(), br.readFloat64(), br.readFloat64()];\n        }\n\n        let numRegions = br.readInt16();\n\n        //create target buffers of correct sizes (avoid reallocation of memory, work with native typed arrays)\n        this.vertices = new Float32Array(this.square(4, numVertices * 3));\n        this.normals = new Uint8Array(numTriangles * 6);\n        this.indices = new Float32Array(numTriangles * 3);\n        this.styleIndices = new Uint16Array(numTriangles * 3);\n        this.styles = new Uint8Array(this.square(1, (numStyles + 2) * 4)); //+2 is for a default style and spaces default style\n        this.products = new Float32Array(numTriangles * 3);\n        this.states = new Uint8Array(numTriangles * 3 * 2); //place for state and restyling\n        this.transformations = new Float32Array(numTriangles * 3);\n        this.matrices = new Float32Array(this.square(4, numMatrices * 16));\n        this.productMaps = {};\n        this.regions = new Array<Region>(numRegions);\n\n        //initial values for indices for iterations over data\n        this._iVertex = 0;\n        this._iIndexForward = 0;\n        this._iIndexBackward = numTriangles * 3;\n        this._iTransform = 0;\n        this._iMatrix = 0;\n\n        for (let i = 0; i < numRegions; i++) {\n            let region = new Region();\n            region.population = br.readInt32();\n            region.centre = br.readFloat32Array(3);\n            region.bbox = br.readFloat32Array(6);\n            this.regions[i] = region;\n        }\n\n        let iStyle = 0;\n        for (iStyle; iStyle < numStyles; iStyle++) {\n            let styleId = br.readInt32();\n            let R = br.readFloat32() * 255;\n            let G = br.readFloat32() * 255;\n            let B = br.readFloat32() * 255;\n            let A = br.readFloat32() * 255;\n            this.styles.set([R, G, B, A], iStyle * 4);\n            this._styleMap.Add({ id: styleId, index: iStyle, transparent: A < 254 });\n        }\n\n        // default style\n        this.styles.set([255, 255, 255, 255], iStyle * 4);\n        this._styleMap.Add({ id: -1, index: iStyle, transparent: false });\n\n        // default space and opening style\n        iStyle++;\n        this.styles.set([0, 255, 255, 100], iStyle * 4);\n        this._styleMap.Add({ id: -2, index: iStyle, transparent: false });\n\n        for (let i = 0; i < numProducts; i++) {\n            let productLabel = br.readInt32();\n            let prodType = br.readInt16();\n            let bBox = br.readFloat32Array(6);\n\n            let map = new ProductMap();\n            map.productID = productLabel;\n            map.renderId = i + 1;\n            map.type = prodType;\n            map.bBox = bBox;\n            map.spans = [];\n            this.productMaps[productLabel] = map;\n            this.productIdLookup[i + 1] = productLabel;\n\n            if (prodType === ProductType.IFCSPACE || prodType === ProductType.IFCOPENINGELEMENT) {\n                map.states.push(State.HIDDEN);\n            }\n        }\n\n        //version 3 puts geometry in regions properly so it is possible to use this information for rendering\n        if (version >= 3) {\n            for (let r = 0; r < numRegions; r++) {\n                let region = this.regions[r];\n                let geomCount = br.readInt32();\n\n                const data = new Array<{ shapes: ShapeRecord[], geometry: TriangulatedShape }>(geomCount);\n                for (let g = 0; g < geomCount; g++) {\n\n                    //read shape information\n                    const shapes = this.readShape(version);\n\n                    //read geometry\n                    let geomLength = br.readInt32();\n                    if (geomLength === 0) {\n                        // this should not happen but we had seen this before\n                        continue;\n                    }\n\n                    //read geometry data (make sure we don't overflow - use isolated subreader)\n                    let gbr = br.getSubReader(geomLength);\n                    let geometry = new TriangulatedShape();\n                    geometry.parse(gbr);\n                    //make sure that geometry is complete\n                    if (!gbr.isEOF()) {\n                        throw new Error(`Incomplete reading of geometry for shape instance ${shapes[0].iLabel}`);\n                    }\n\n                    data[g] = { shapes, geometry };\n\n\n                }\n\n                if (options.orderGeometryBySize) {\n                    // Sort to make performance optimization look better. Big things go in first (descending sorting).\n                    // Because of the performance impact of doing this each load it is preferable to pre-sort the geometry in wexbim\n                    data.sort((a, b) => {\n                        const labelA = a.shapes[0]?.pLabel;\n                        const labelB = b.shapes[0]?.pLabel;\n\n                        if (labelA == null || labelB == null){\n                            return 0\n                        }\n\n                        const mapA = this.productMaps[labelA];\n                        const mapB = this.productMaps[labelB];\n\n                        if (mapA == null)\n                            return 1;\n                        if (mapB == null)\n                            return -1;\n\n                        const volA = mapA.bBox[3] * mapA.bBox[4] * mapA.bBox[5];\n                        const volB = mapB.bBox[3] * mapA.bBox[4] * mapA.bBox[5];\n\n                        return volB - volA;\n\n                    });\n                }\n\n                for (let g = 0; g < geomCount; g++) {\n                    const d = data[g];\n                    //add data to arrays prepared for GPU\n                    this.feedDataArrays(d.shapes, d.geometry);\n                }\n            }\n        } else {\n            //older versions use less safety and just iterate over in a single loop\n            for (let iShape = 0; iShape < numShapes; iShape++) {\n\n                //reed shape representations\n                const shapes = this.readShape(version);\n\n                //read shape geometry\n                let geometry = new TriangulatedShape();\n                geometry.parse(br);\n\n                //feed data arays\n                this.feedDataArrays(shapes, geometry);\n            }\n        }\n\n        //binary reader should be at the end by now\n        if (!br.isEOF()) {\n            this.progress({\n                type: MessageType.FAILED,\n                message: \"Processed data\",\n                percent: 0,\n                phase: LoadingPhase.READING\n            });\n            throw new Error('Binary reader is not at the end of the file.');\n        } else {\n            this.progress({\n                type: MessageType.PROGRESS,\n                message: \"Processed data\",\n                percent: 100,\n                phase: LoadingPhase.READING\n            });\n        }\n\n        //set value of transparent index divider for two phase rendering (simplified ordering)\n        this.transparentIndex = this._iIndexForward;\n        this.breaks[100] = [this.transparentIndex - 1, this.transparentIndex];\n    }\n\n    /**\n     * Get size of arrays to be square (usable for texture data)\n     * @param arity\n     * @param count\n     */\n    private square(arity: number, count: number): number {\n        if (arity == null || count == null) {\n            throw new Error('Wrong arguments for \"square\" function.');\n        }\n        if (count === 0) {\n            return 0;\n        }\n        let byteLength = count * arity;\n        let imgSide = Math.ceil(Math.sqrt(byteLength / 4));\n        //clamp to parity\n        while ((imgSide * 4) % arity !== 0) {\n            imgSide++;\n        }\n        let result = imgSide * imgSide * 4 / arity;\n        return result;\n    }\n\n    private feedDataArrays(shapes: ShapeRecord[], geometry: TriangulatedShape) {\n        //copy shape data into inner array and set to null so it can be garbage collected\n        shapes.forEach((shape) => {\n            let iIndex = 0;\n            //set iIndex according to transparency either from beginning or at the end\n            if (shape.transparent) {\n                iIndex = this._iIndexBackward - geometry.indices.length;\n            } else {\n                iIndex = this._iIndexForward;\n            }\n\n            let begin = iIndex;\n            let map = this.productMaps[shape.pLabel];\n            if (typeof (map) === \"undefined\") {\n                map = new ProductMap();\n                map.productID = 0;\n                map.renderId = 0;\n                map.type = ProductType.IFCOPENINGELEMENT;\n                map.bBox = new Float32Array(6);\n                map.spans = [];\n                map.states.push(State.HIDDEN);\n                this.productMaps[shape.pLabel] = map;\n            }\n\n            this.normals.set(geometry.normals, iIndex * 2);\n\n            //switch spaces and openings off by default \n            let state = map.type === ProductType.IFCSPACE || map.type === ProductType.IFCOPENINGELEMENT\n                ? State.HIDDEN\n                : 0xFF; //0xFF is for the default state\n\n            //fix indices to right absolute position. It is relative to the shape.\n            geometry.indices.forEach(idx => {\n                this.indices[iIndex] = idx + this._iVertex / 3;\n                this.products[iIndex] = map.renderId;\n                this.styleIndices[iIndex] = shape.style;\n                this.transformations[iIndex] = shape.transform;\n                this.states[2 * iIndex] = state; //set state\n                this.states[2 * iIndex + 1] = 0xFF; //default style\n\n                iIndex++;\n            });\n\n            let end = iIndex;\n            map.spans.push(new Int32Array([begin, end]));\n\n            if (shape.transparent) {\n                this._iIndexBackward -= geometry.indices.length;\n            } else {\n                this._iIndexForward += geometry.indices.length;\n            }\n\n            // manage breakpoints\n            var percent = (this._iIndexForward + this.indices.length - this._iIndexBackward) / this.indices.length * 100;\n            Object.getOwnPropertyNames(this.breaks).forEach(bp => {\n                const breakPoint = +bp;\n                if (this.breaks[breakPoint].length === 0 && percent > breakPoint) {\n                    this.breaks[breakPoint] = [this._iIndexForward, this._iIndexBackward]\n                }\n            });\n        },\n            this);\n\n        //copy geometry and keep track of amount so that we can fix indices to right position\n        //this must be the last step to have correct iVertex number above\n        this.vertices.set(geometry.vertices, this._iVertex);\n        this._iVertex += geometry.vertices.length;\n    }\n\n    private readShape(version: number): ShapeRecord[] {\n        let br = this._reader;\n\n        let repetition = br.readInt32();\n        let shapeList = new Array<ShapeRecord>();\n        for (let iProduct = 0; iProduct < repetition; iProduct++) {\n            let prodLabel = br.readInt32();\n            let instanceTypeId = br.readInt16();\n            let instanceLabel = br.readInt32();\n            let styleId = br.readInt32();\n            let transformation: Float32Array | Float64Array = null;\n\n            if (repetition > 1) {\n                //version 1 had lower precission of transformation matrices\n                transformation = version === 1 ? br.readFloat32Array(16) : br.readFloat64Array(16);\n                this.matrices.set(transformation, this._iMatrix);\n                this._iMatrix += 16;\n            }\n\n            let styleItem = this._styleMap.GetStyle(styleId);\n            if (styleItem === null) {\n                styleItem = this._styleMap.GetStyle(-1); //default style\n            }\n\n            const type = this.productMaps[prodLabel] ? this.productMaps[prodLabel].type : ProductType.IFCPRODUCT;\n            if (type === ProductType.IFCSPACE || type === ProductType.IFCOPENINGELEMENT) {\n                styleItem = this._styleMap.GetStyle(-2); //fixed space and opening style (semitransparent blue)\n            }\n\n            shapeList.push({\n                pLabel: prodLabel,\n                iLabel: instanceLabel,\n                style: styleItem.index,\n                transparent: styleItem.transparent,\n                transform: transformation != null ? this._iTransform++ : -1\n            });\n        }\n        return shapeList;\n    }\n\n    //Source has to be either URL of wexBIM file or Blob representing wexBIM file\n    public load(source, headers: { [name: string]: string }, progress: (message: Message) => void, options: Partial<ReaderOptions> = {}) {\n        // tslint:disable-next-line: no-empty\n        this.progress = progress ? progress : (m) => { };\n        //binary reading\n        let br = new BinaryReader();\n        let self = this;\n        br.onloaded = () => {\n            self.parse(br, options);\n            if (self.onloaded) {\n                self.onloaded(this);\n            }\n        };\n        br.onerror = (msg) => {\n            if (self.onerror) {\n                self.onerror(msg);\n            }\n        };\n        br.load(source, headers, progress);\n    }\n\n    public onloaded: (geometry: ModelGeometry) => void;\n\n    public onerror: (message?: string) => void;\n}\n\n// tslint:disable: max-classes-per-file\nexport class Region {\n    public population: number = -1;\n    public centre: vec3 = null;\n    public bbox: Float32Array = null;\n\n    constructor(region?: Region) {\n        if (region) {\n            this.population = region.population;\n            if (region.centre) {\n                this.centre = new Float32Array(region.centre);\n            }\n            if (region.bbox) {\n                this.bbox = new Float32Array(region.bbox);\n            }\n        }\n    }\n\n    /**\n     * Returns clone of this region\n     */\n    public static clone(o: Region): Region {\n        let clone = new Region();\n\n        clone.population = o.population;\n        if (o.centre) {\n            clone.centre = new Float32Array(o.centre);\n        }\n        if (o.bbox) {\n            clone.bbox = new Float32Array(o.bbox);\n        }\n\n        return clone;\n    }\n\n    /**\n     * Returns new region which is a merge of this region and the argument\n     * @param region region to be merged\n     */\n    public merge(region: Region): Region {\n        //if this is a new empty region, return clone of the argument\n        if (this.population === -1 && this.centre === null && this.bbox === null) {\n            return new Region(region);\n        }\n\n        let out = new Region();\n        out.population = this.population + region.population;\n\n        if (this.bbox && region.bbox) {\n            let x = Math.min(this.bbox[0], region.bbox[0]);\n            let y = Math.min(this.bbox[1], region.bbox[1]);\n            let z = Math.min(this.bbox[2], region.bbox[2]);\n\n            let x2 = Math.max(this.bbox[0] + this.bbox[3], region.bbox[0] + region.bbox[3]);\n            let y2 = Math.max(this.bbox[1] + this.bbox[4], region.bbox[1] + region.bbox[4]);\n            let z2 = Math.max(this.bbox[2] + this.bbox[5], region.bbox[2] + region.bbox[5]);\n\n            let sx = x2 - x;\n            let sy = y2 - y;\n            let sz = z2 - z;\n\n            let cx = (x + x2) / 2.0;\n            let cy = (y + y2) / 2.0;\n            let cz = (z + z2) / 2.0;\n\n            out.bbox = new Float32Array([x, y, z, sx, sy, sz]);\n            out.centre = new Float32Array([cx, cy, cz]);\n        } else if (this.bbox) {\n            out.bbox = new Float32Array(this.bbox);\n            out.centre = new Float32Array(this.centre);\n        } else {\n            out.bbox = new Float32Array(region.bbox);\n            out.centre = new Float32Array(region.centre);\n        }\n\n        return out;\n    }\n}\n\nclass StyleMap {\n    private _internal: { [id: number]: StyleRecord } = {};\n\n    public Add(record: StyleRecord): void {\n        this._internal[record.id] = record;\n    }\n\n    public GetStyle(id: number): StyleRecord {\n        let item = this._internal[id];\n        if (item) {\n            return item;\n        }\n        return null;\n    }\n}\n\nclass StyleRecord {\n    public id: number;\n    public index: number;\n    public transparent: boolean;\n}\n\nclass ShapeRecord {\n    public pLabel: number;\n    public iLabel: number;\n    public style: number;\n    public transparent: boolean;\n    public transform: number;\n}\n","import { BinaryReader } from \"./binary-reader\";\n\nexport class TriangulatedShape {\n\n    //this will get xBinaryReader on the current position and will parse it's content to fill itself with vertices, normals and vertex indices\n    public parse(binReader: BinaryReader) {\n        var self = this;\n        var version = binReader.readByte();\n        var numVertices = binReader.readInt32();\n        var numOfTriangles = binReader.readInt32();\n        self.vertices = binReader.readFloat32Array(numVertices * 3);\n        //allocate memory of defined size (to avoid reallocation of memory)\n        self.indices = new Uint32Array(numOfTriangles * 3);\n        self.normals = new Uint8Array(numOfTriangles * 6);\n        //indices for incremental adding of indices and normals\n        var iIndex = 0;\n        var readIndex;\n        if (numVertices <= 0xFF) {\n            readIndex = (count: number) => binReader.readByteArray(count);\n        } else if (numVertices <= 0xFFFF) {\n            readIndex = (count: number) => binReader.readUint16Array(count);\n        } else {\n            readIndex = (count: number) => binReader.readInt32Array(count);\n        }\n\n        var numFaces = binReader.readInt32();\n\n        if (numVertices === 0 || numOfTriangles === 0) {\n            return;\n        }\n\n        for (var i = 0; i < numFaces; i++) {\n            var numTrianglesInFace = binReader.readInt32();\n            if (numTrianglesInFace == 0) {\n                continue;\n            }\n\n            var isPlanar = numTrianglesInFace > 0;\n            numTrianglesInFace = Math.abs(numTrianglesInFace);\n            if (isPlanar) {\n                var normal = binReader.readByteArray(2);\n                //read and set all indices\n                var planarIndices = readIndex(3 * numTrianglesInFace);\n                self.indices.set(planarIndices, iIndex);\n\n                for (var j = 0; j < numTrianglesInFace * 3; j++) {\n                    //add three identical normals because this is planar but needs to be expanded for WebGL\n                    self.normals[iIndex * 2] = normal[0];\n                    self.normals[iIndex * 2 + 1] = normal[1];\n                    iIndex++;\n                }\n            } else {\n                for (var j = 0; j < numTrianglesInFace; j++) {\n                    self.indices[iIndex] = readIndex(); //a\n                    self.normals.set(binReader.readByteArray(2), iIndex * 2);\n                    iIndex++;\n\n                    self.indices[iIndex] = readIndex(); //b\n                    self.normals.set(binReader.readByteArray(2), iIndex * 2);\n                    iIndex++;\n\n                    self.indices[iIndex] = readIndex(); //c\n                    self.normals.set(binReader.readByteArray(2), iIndex * 2);\n                    iIndex++;\n                }\n            }\n        }\n    }\n\n    //This would load only shape data from binary file\n    public load = (source) => {\n        //binary reading\n        var br = new BinaryReader();\n        var self = this;\n        br.onloaded = () => {\n            self.parse(br);\n            if (self.onloaded) {\n                self.onloaded(this);\n            }\n        };\n        br.load(source, null, null);\n    }\n\n\n    public vertices: Float32Array;\n    public indices: Uint32Array;\n    public normals: Uint8Array;\n\n    //this function will get called when loading is finished.\n    //This won't get called after parse which is supposed to happen in large operation.\n    public onloaded: (shape: TriangulatedShape) => void;\n}\n","import { vec3, mat4, mat3, quat } from \"gl-matrix\";\nimport { ClippingPlane } from \"./bcf\";\nimport { VectorUtils } from \"./common/vector-utils\";\n\n/**\n * @category Core\n */\nexport class SectionBox {\n    private _location: vec3;\n    private _lengthX: number;\n    private _lengthY: number;\n    private _lengthZ: number;\n    private _rotationX: number;\n    private _rotationY: number;\n    private _rotationZ: number;\n    private _onChange: () => void;\n\n    constructor(onChange: () => void) {\n        this.setToInfinity();\n        this._onChange = () => {\n            // clear any cached objects\n            this._lastWcs = null;\n            this._lastBBox = null;\n\n            if (onChange) {\n                onChange();\n            }\n        };\n    }\n\n    public get location(): vec3 { return this._location; }\n    public set location(value: vec3) { this._location = value; this._onChange(); }\n\n    public get rotationX(): number { return this._rotationX; }\n    public set rotationX(value: number) { this._rotationX = value; this._onChange(); }\n\n    public get rotationY(): number { return this._rotationY; }\n    public set rotationY(value: number) { this._rotationY = value; this._onChange(); }\n\n    public get rotationZ(): number { return this._rotationZ; }\n    public set rotationZ(value: number) { this._rotationZ = value; this._onChange(); }\n\n    public get lengthX(): number { return this._lengthX; }\n    public set lengthX(value: number) { this._lengthX = value; this._onChange(); }\n\n    public get lengthY(): number { return this._lengthY; }\n    public set lengthY(value: number) { this._lengthY = value; this._onChange(); }\n\n    public get lengthZ(): number { return this._lengthZ; }\n    public set lengthZ(value: number) { this._lengthZ = value; this._onChange(); }\n\n\n    /**\n     * Matrix representation of this box. Can be used for simple test of points.\n     */\n    public getMatrix(wcs: vec3): mat4 {\n        let trans = mat4.create();\n        trans = mat4.rotateX(mat4.create(), trans, - this.rotationX / 180.0 * Math.PI);\n        trans = mat4.rotateY(mat4.create(), trans, - this.rotationY / 180.0 * Math.PI);\n        trans = mat4.rotateZ(mat4.create(), trans, - this.rotationZ / 180.0 * Math.PI);\n\n        // move location to defined WCS (reduce)\n        const location = vec3.subtract(vec3.create(), this.location, wcs)\n\n        // translation is to be applied as the last transformation\n        var move = vec3.scale(vec3.create(), location, -1.0);\n        trans = mat4.translate(mat4.create(), trans, move);\n\n        var projection = mat4.ortho(mat4.create(),\n            - this.lengthX / 2, this.lengthX / 2,\n            - this.lengthY / 2, this.lengthY / 2,\n            - this.lengthZ / 2, this.lengthZ / 2\n        );\n\n        return mat4.multiply(mat4.create(), projection, trans);\n    }\n\n    /**\n     * True when section box is set, false otherwise\n     */\n    public get isSet(): boolean {\n        return Number.isFinite(this._lengthX);\n    }\n\n    /**\n     * Alias for setToInfinity(). Makes the section box infinitely large so it doesn't crop anything in the view\n     */\n    public clear(): void {\n        this.setToInfinity();\n    }\n\n    /**\n     * Sets frustum to maximum extens so that it shouldn't cut anything in the view.\n     */\n    public setToInfinity(): void {\n        this._location = vec3.fromValues(0, 0, 0);\n        this._rotationX = this._rotationY = this._rotationZ = 0.0;\n        this._lengthX = this._lengthY = this._lengthZ = Number.MAX_SAFE_INTEGER;\n\n        if (this._onChange)\n            this._onChange();\n    }\n\n    /**\n     * Sets all values for section box in one go as a copy from supplied box\n     * @param box Section box values to be used\n     */\n    public setToBox(box: SectionBox) {\n        this._location = vec3.clone(box.location);\n        this._lengthX = box._lengthX;\n        this._lengthY = box._lengthY;\n        this._lengthZ = box._lengthZ;\n        this._rotationX = box._rotationX;\n        this._rotationY = box._rotationY;\n        this._rotationZ = box._rotationZ;\n\n        if (this._onChange) this._onChange();\n    }\n\n    public setToBoundingBox(box: ArrayLike<number>) {\n        this._location = vec3.fromValues(box[0] + box[3] / 2.0, box[1] + box[4] / 2.0, box[2] + box[5] / 2.0);\n        this._lengthX = box[3];\n        this._lengthY = box[4];\n        this._lengthZ = box[5];\n        this._rotationX = 0;\n        this._rotationY = 0;\n        this._rotationZ = 0;\n\n        if (this._onChange) this._onChange();\n    }\n\n    /**\n     * Computes section box from 6 clipping planes if these form a box\n     * @param planes 6 clipping planes representing the box\n     * @returns {boolean} true if succeeded, false if planes don't form a box\n     */\n    public setToPlanes(planes: ClippingPlane[]): boolean {\n        if (planes == null || planes.length !== 6)\n            throw new Error('Invalid input: box has to be defined by 3 clipping planes');\n\n        var results: { plane: ClippingPlane, points: vec3[] }[] = [];\n        const points: vec3[] = [];\n\n        for (let i = 0; i < 6; i++) {\n            const planeA = planes[i];\n            for (let j = i + 1; j < 6; j++) {\n                const planeB = planes[j];\n                if (!this.areOrthogonal(planeA, planeB)) continue;\n                for (let k = j + 1; k < 6; k++) {\n                    const planeC = planes[k];\n                    if (!this.areOrthogonal(planeA, planeC)) continue;\n                    if (!this.areOrthogonal(planeB, planeC)) continue;\n\n                    // we have three perpendicular planes now which should have one common intersection point\n                    const nA = planeA.direction;\n                    const nB = planeB.direction;\n                    const nC = planeC.direction;\n\n                    const pA = planeA.location;\n                    const pB = planeB.location;\n                    const pC = planeC.location;\n\n                    const dA = this.getDparam(nA, pA);\n                    const dB = this.getDparam(nB, pB);\n                    const dC = this.getDparam(nC, pC);\n\n                    const D = vec3.fromValues(-dA, -dB, -dC);\n                    const A = mat3.fromValues(\n                        nA[0], nB[0], nC[0],\n                        nA[1], nB[1], nC[1],\n                        nA[2], nB[2], nC[2]);\n                    const det = mat3.determinant(A);\n                    if (Math.abs(det) < 1e-6) {\n                        console.warn('Singular system of linear equations. Intersection point for section box can\\'t be computed');\n                        continue;\n                    }\n                    const Ainv = mat3.invert(mat3.create(), A);\n                    const X = vec3.transformMat3(vec3.create(), D, Ainv);\n\n                    points.push(X);\n                    this.addPointToResults(results, planeA, X);\n                    this.addPointToResults(results, planeB, X);\n                    this.addPointToResults(results, planeC, X);\n                }\n            }\n        }\n\n        // we should have 8 points by now\n        if (points.length !== 8) {\n            console.warn('Section box based on clipping planes should have exactly 8 intersection points');\n            return false;\n        }\n\n        const location = this.getCentroid(points);\n        const sizeX = this.getSize(results[0].plane, planes);\n        const sizeY = this.getSize(results[1].plane, planes);\n        const sizeZ = this.getSize(results[2].plane, planes);\n\n        if (sizeX == null || sizeY == null || sizeZ == null) {\n            console.warn('Section box based on clipping planes should have always two planes pointing to opposite direction');\n            return false;\n        }\n\n        const Xdir = vec3.normalize(vec3.create(), VectorUtils.getVec3(results[0].plane.direction));\n        const Ydir = vec3.normalize(vec3.create(), VectorUtils.getVec3(results[1].plane.direction));\n        const Zdir = vec3.normalize(vec3.create(), VectorUtils.getVec3(results[2].plane.direction));\n        const rotation = quat.setAxes(quat.create(), vec3.negate(vec3.create(), Zdir), Xdir, Ydir);\n\n        // get roll (X), pitch (Y) and yaw (Z) euler angles\n        // https://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles\n        const angles = this.toEulerAngles(rotation);\n\n        // set values\n        this._location = location;\n        this._lengthX = sizeX;\n        this._lengthY = sizeY;\n        this._lengthZ = sizeZ;\n        this._rotationX = angles.roll * 180.0 / Math.PI;\n        this._rotationY = angles.pitch * 180.0 / Math.PI;\n        this._rotationZ = -angles.yaw * 180.0 / Math.PI;\n\n        // invoke change annotation\n        if (this._onChange) {\n            this._onChange();\n        }\n\n        // return true when clipping planes were interpreted as a section box\n        return true;\n    }\n\n    private getSize(plane: ClippingPlane, planes: ClippingPlane[]): number {\n        const opposite = planes.filter(p => this.isOpposite(VectorUtils.getVec3(plane.direction), VectorUtils.getVec3(p.direction))).pop();\n        if (opposite == null)\n            return null;\n\n        const a = opposite.direction[0];\n        const b = opposite.direction[1];\n        const c = opposite.direction[2];\n        const d = this.getDparam(opposite.direction, opposite.location);\n\n        const x = plane.location[0];\n        const y = plane.location[1];\n        const z = plane.location[2];\n\n        var distance = Math.abs(a * x + b * y + c * z + d) / vec3.length(VectorUtils.getVec3(opposite.direction));\n        return distance;\n    }\n\n    private toEulerAngles(q: quat): { roll: number, pitch: number, yaw: number } {\n        const qx = q[0];\n        const qy = q[1];\n        const qz = q[2];\n        const qw = q[3];\n\n        // roll (x-axis rotation)\n        const sinr_cosp = 2 * (qw * qx + qy * qz);\n        const cosr_cosp = 1 - 2 * (qx * qx + qy * qy);\n        const roll = Math.atan2(sinr_cosp, cosr_cosp);\n\n        // pitch (y-axis rotation)\n        const sinp = 2 * (qw * qy - qz * qx);\n        let pitch: number = null;\n        if (Math.abs(sinp) >= 1)\n            pitch = Math.PI / 2 * Math.sign(sinp); // use 90 degrees if out of range\n        else\n            pitch = Math.asin(sinp);\n\n        // yaw (z-axis rotation)\n        const siny_cosp = 2 * (qw * qz + qx * qy);\n        const cosy_cosp = 1 - 2 * (qy * qy + qz * qz);\n        const yaw = Math.atan2(siny_cosp, cosy_cosp);\n\n        return { roll, pitch, yaw };\n    }\n\n    private isOpposite(a: vec3, b: vec3) {\n        var angle = vec3.angle(a, b);\n        return Math.abs(angle - Math.PI) < 1e-2; //tolerance of approx. 0.6 degree\n    }\n\n    private getCentroid(points: vec3[]): vec3 {\n        const sum = points.reduce((previous, current) => vec3.add(vec3.create(), previous, current));\n        return vec3.scale(vec3.create(), sum, 1 / points.length);\n    }\n\n    private addPointToResults(results: { plane: ClippingPlane, points: vec3[] }[], plane: ClippingPlane, point: vec3): void {\n        var result = results.filter(r => r.plane === plane).pop();\n        if (result == null) {\n            result = {\n                plane: plane,\n                points: []\n            };\n            results.push(result);\n        }\n        result.points.push(point);\n    }\n\n    private getDparam(normal: ArrayLike<number>, point: ArrayLike<number>) {\n        return -normal[0] * point[0] - normal[1] * point[1] - normal[2] * point[2];\n    }\n\n    private areOrthogonal(a: ClippingPlane, b: ClippingPlane): boolean {\n        var angle = vec3.angle(VectorUtils.getVec3(a.direction), VectorUtils.getVec3(b.direction));\n        return Math.abs(angle - Math.PI / 2.0) < 1e-2; \n    }\n\n    private _lastWcs: vec3;\n    private _lastBBox: Float32Array;\n\n    /**\n     * Returns bounding box of the section box. This is usefull for\n     * zooming and similar operations\n     */\n    public getBoundingBox(wcs: vec3): Float32Array {\n        // return cached value if available and if WCS hasn't changed\n        if (this._lastBBox && this._lastWcs && vec3.distance(this._lastWcs, wcs) < 1e-6) {\n            return this._lastBBox;\n        }\n\n        const dx = this.lengthX / 2.0;\n        const dy = this.lengthY / 2.0;\n        const dz = this.lengthZ / 2.0;\n\n        //create box vertices in local coordinates\n        const local = [\n            [- dx, - dy, - dz],\n            [- dx, - dy, + dz],\n            [- dx, + dy, - dz],\n            [- dx, + dy, + dz],\n            [+ dx, - dy, - dz],\n            [+ dx, - dy, + dz],\n            [+ dx, + dy, - dz],\n            [+ dx, + dy, + dz]\n        ];\n\n        // reduce by wcs displacement\n        const loc = vec3.subtract(vec3.create(), this.location, wcs);\n\n        // create transformation from rotation and translation\n        let m = mat4.create();\n        m = mat4.rotateX(mat4.create(), m, this.rotationX * Math.PI / 180.0);\n        m = mat4.rotateY(mat4.create(), m, this.rotationY * Math.PI / 180.0);\n        m = mat4.rotateZ(mat4.create(), m, this.rotationZ * Math.PI / 180.0);\n        m = mat4.translate(mat4.create(), m, loc);\n\n        // transform section box vertices to real placement and rotation\n        const vertices = local.map(v => vec3.transformMat4(vec3.create(), VectorUtils.getVec3(v), m));\n\n        // get minimumm and maximum coordinates\n        const min = vertices.reduce((previous, current) =>\n            vec3.fromValues(\n                Math.min(previous[0], current[0]),\n                Math.min(previous[1], current[1]),\n                Math.min(previous[2], current[2])\n            ));\n        const max = vertices.reduce((previous, current) =>\n            vec3.fromValues(\n                Math.max(previous[0], current[0]),\n                Math.max(previous[1], current[1]),\n                Math.max(previous[2], current[2])\n            ));\n\n        // return axis aligned bounding box of the section box\n        this._lastWcs = wcs;\n        this._lastBBox = new Float32Array([min[0], min[1], min[2], max[0] - min[0], max[1] - min[1], max[2] - min[2]]);\n        return this._lastBBox;\n    }\n}","import { depth_fragment_shader } from \"./depth_fragment_shader\";\nimport { depth_vertex_shader } from \"./depth_vertex_shader\";\nimport { Framebuffer } from \"../framebuffer\";\n\nexport class DepthReader {\n\n    // pointers\n    private texUniform: WebGLUniformLocation;\n    private vertAttrs: number\n    \n    // resources\n    private program: WebGLProgram;\n    private vertBuffer: WebGLBuffer;\n    private fragmentShader: WebGLShader;\n    private vertexShader: WebGLShader;\n\n    // data\n    private vertices = new Float32Array([\n        0, 0,\n        0, 1,\n        1, 0,\n        1, 0,\n        0, 1,\n        1, 1,\n    ]);\n\n    /**\n     *\n     */\n    constructor(private gl: WebGLRenderingContext, private glVersion: number) {\n        const compile = (shader: WebGLShader, code: string): boolean => {\n            gl.shaderSource(shader, code);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                const err = gl.getShaderInfoLog(shader);\n                console.error(err);\n                return false;\n            }\n            return true;\n        }\n\n        //fragment shader\n        this.fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        let fsCompiled = compile(this.fragmentShader, depth_fragment_shader);\n        if (!fsCompiled) {\n            throw new Error(\"Failed to compile depth reading fragment shader\");\n        }\n\n        //vertex shader (the more complicated one)\n        this.vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        let vsCompiled = compile(this.vertexShader, depth_vertex_shader);\n        if (!vsCompiled) {\n            throw new Error(\"Failed to compile depth reading vertex shader\");\n        }\n\n        //link program\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, this.vertexShader);\n        gl.attachShader(this.program, this.fragmentShader);\n        gl.linkProgram(this.program);\n\n        if (gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            gl.useProgram(this.program);\n        } else {\n            console.error('Could not initialise shaders ');\n            return;\n        }\n\n        this.texUniform = gl.getUniformLocation(this.program, 'texture');\n        this.vertAttrs = gl.getAttribLocation(this.program, 'point');\n\n        // Create a buffer.\n        this.vertBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertBuffer);\n\n        // Put a unit quad in the buffer\n        gl.bufferData(gl.ARRAY_BUFFER, this.vertices, gl.STATIC_DRAW);\n    }\n\n    private draw(tex: WebGLTexture) {\n        const gl = this.gl;\n        gl.useProgram(this.program);\n\n        // Tell the shader to get the texture from texture unit 0\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, tex);\n        //gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8ClampedArray([0,0,255,255]) );\n        gl.uniform1i(this.texUniform, 0);\n\n        // Setup the attributes to pull data from our buffers\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertBuffer);\n        gl.enableVertexAttribArray(this.vertAttrs);\n        gl.vertexAttribPointer(this.vertAttrs, 2, gl.FLOAT, false, 0, 0);\n\n\n        gl.clearColor(0, 0, 0, 0); //zero colour for no-values\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        // draw the quad (2 triangles, 6 vertices)\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n    }\n\n    public getDepths( points: {x: number, y: number}[], tex: WebGLTexture, width: number, height: number): number[] {\n        const gl = this.gl;\n        gl.useProgram(this.program);\n\n        //create framebuffer for off-screen rendering\n        const fb = new Framebuffer(gl, width, height, false, this.glVersion);\n        gl.viewport(0, 0, width, height);\n\n        // draw and get results\n        this.draw(tex);\n\n        // all components should be the same (therefore just using [0])\n        var depths = points.map(p => fb.getPixel(p.x, p.y)[0]) ;\n\n        // free resources\n        fb.delete();\n        return depths;\n    }\n\n    public getDepth(x: number, y: number, tex: WebGLTexture, width: number, height: number): number {\n        const depths = this.getDepths([{x,y}], tex, width, height);\n        return depths[0];\n    }\n\n    /**\n     * Deletes all WebGL resources\n     */\n    public delete(): void {\n        const gl = this.gl;\n        gl.deleteBuffer(this.vertBuffer);\n        gl.deleteShader(this.fragmentShader);\n        gl.deleteShader(this.vertexShader);\n        gl.deleteProgram(this.program);\n    }\n}","export const depth_fragment_shader = \" precision mediump float;\\n \\n varying vec2 position;\\n \\n uniform sampler2D texture;\\n \\n void main() {\\n \\n float depth = texture2D(texture, position).x; \\n\\n \\n gl_FragColor = vec4(depth, depth, depth, 1.0);\\n }\"","export const depth_vertex_shader = \"attribute highp vec2 point;\\n\\nvarying vec2 position;\\n\\nvoid main(void) {\\n float x = (point.x * 2.0) - 1.0;\\n float y = (point.y * 2.0) - 1.0;\\n gl_Position = vec4(x, y, 0.0, 1.0);\\n position = point;\\n}\"","export const fragment_shader = \"precision highp float;\\n\\nuniform vec4 uClippingPlaneA;\\nuniform vec4 uClippingPlaneB;\\nuniform bool uClippingA;\\nuniform bool uClippingB;\\n\\n\\nuniform vec3 uGBC;\\n\\n\\nuniform vec3 uLight;\\n\\n\\nuniform mat4 uSectionBox;\\n\\nvarying vec4 vColor;\\n\\nvarying vec3 vPosition;\\n\\nvarying vec3 vNormal;\\n\\n\\nvarying float vDiscard;\\n\\nvoid main(void) {\\n \\n if ( vDiscard > 0.5) discard;\\n \\n \\n vec4 fp = uSectionBox * vec4(vPosition, 1);\\n if (\\n fp.x > 1.0 || fp.x < -1.0 || \\n fp.y > 1.0 || fp.y < -1.0 || \\n fp.z > 1.0 || fp.z < -1.0) \\n discard;\\n\\n \\n if (uClippingA)\\n {\\n \\n vec4 p = uClippingPlaneA;\\n vec3 x = vPosition;\\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\\n if (distance < 0.0){\\n discard;\\n return;\\n }\\n }\\n\\n \\n if (uClippingB)\\n {\\n \\n vec4 p = uClippingPlaneB;\\n vec3 x = vPosition;\\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\\n if (distance < 0.0) {\\n discard;\\n return;\\n }\\n }\\n \\n \\n if (length(vNormal) < 0.1) {\\n gl_FragColor = vColor;\\n return;\\n }\\n\\n \\n vec3 normalInterp = gl_FrontFacing ? vNormal : -vNormal;\\n\\n \\n float Ka = 1.0; \\n float Kd = 1.0; \\n float Ks = 0.2; \\n float shininessVal = 30.0; \\n\\n vec3 ambientColor = vColor.rgb * 0.2; \\n vec3 diffuseColor = vColor.rgb;\\n vec3 specularColor = vec3(1.0, 1.0, 1.0);\\n\\n vec3 N = normalize(normalInterp);\\n vec3 L = normalize(uLight - vPosition);\\n\\n \\n float lambertian = max(dot(N, L), 0.0);\\n\\n float specular = 0.0;\\n\\n if(lambertian > 0.0) {\\n vec3 R = reflect(-L, N); \\n \\n vec3 V = L; \\n\\n \\n float specAngle = max(dot(R, V), 0.0);\\n specular = pow(specAngle, shininessVal);\\n }\\n\\n vec4 fragColor = vec4(\\n Ka * ambientColor +\\n Kd * lambertian * diffuseColor +\\n Ks * specular * specularColor\\n , vColor.a\\n );\\n\\n \\n \\n fragColor.r = (pow(fragColor.r,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\\n fragColor.g = (pow(fragColor.g,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\\n fragColor.b = (pow(fragColor.b,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\\n\\n gl_FragColor = fragColor;\\n}\"","export const fragment_shader_300 = \"#version 300 es\\n\\n\\nprecision highp float;\\n\\nuniform vec4 uClippingPlaneA;\\nuniform vec4 uClippingPlaneB;\\nuniform bool uClippingA;\\nuniform bool uClippingB;\\n\\nuniform vec3 uGBC;\\n\\n\\nuniform vec3 uLight;\\n\\n\\nuniform mat4 uSectionBox;\\n\\nin vec4 vColor;\\n\\nin vec3 vPosition;\\n\\nin vec3 vNormal;\\n\\n\\nin float vDiscard;\\n\\n\\nout vec4 vFragColor;\\n\\nvoid main(void) {\\n \\n if ( vDiscard > 0.5) discard;\\n \\n \\n vec4 fp = uSectionBox * vec4(vPosition, 1);\\n if (\\n fp.x > 1.0 || fp.x < -1.0 || \\n fp.y > 1.0 || fp.y < -1.0 || \\n fp.z > 1.0 || fp.z < -1.0) \\n discard;\\n\\n \\n if (uClippingA)\\n {\\n \\n vec4 p = uClippingPlaneA;\\n vec3 x = vPosition;\\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\\n if (distance < 0.0){\\n discard;\\n return;\\n }\\n }\\n\\n \\n if (uClippingB)\\n {\\n \\n vec4 p = uClippingPlaneB;\\n vec3 x = vPosition;\\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\\n if (distance < 0.0) {\\n discard;\\n return;\\n }\\n\\n }\\n\\n \\n if (length(vNormal) < 0.1) {\\n vFragColor = vColor;\\n return;\\n }\\n\\n \\n vec3 normalInterp = gl_FrontFacing ? vNormal : -vNormal;\\n\\n \\n float Ka = 0.8; \\n float Kd = 1.0; \\n float Ks = 0.15; \\n float shininessVal = 30.0; \\n\\n vec3 ambientColor = vColor.rgb * 0.5; \\n vec3 diffuseColor = vColor.rgb;\\n vec3 specularColor = vec3(1.0, 1.0, 1.0);\\n\\n vec3 N = normalize(normalInterp);\\n vec3 L = normalize(uLight - vPosition);\\n\\n \\n \\n float lambertian = max(dot(N, L), 0.0);\\n\\n \\n float specular = 0.0;\\n\\n \\n if (lambertian > 0.0) {\\n vec3 R = reflect(-L, N); \\n vec3 V = L; \\n\\n \\n float specAngle = max(dot(R, V), 0.0);\\n specular = pow(specAngle, shininessVal);\\n }\\n\\nvec4 fragColor = vec4(\\n Ka * ambientColor +\\n Kd * lambertian * diffuseColor +\\n Ks * specular * specularColor\\n , vColor.a\\n );\\n\\n \\n \\n fragColor.r = (pow(fragColor.r,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\\n fragColor.g = (pow(fragColor.g,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\\n fragColor.b = (pow(fragColor.b,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\\n\\n vFragColor = fragColor;\\n}\"","export const vertex_shader = \"attribute highp float aVertexIndex;\\nattribute highp float aTransformationIndex;\\nattribute highp float aStyleIndex;\\nattribute highp float aProduct;\\nattribute highp vec2 aState;\\nattribute highp vec2 aNormal;\\n\\n\\nuniform mat4 uMVMatrix;\\nuniform mat4 uPMatrix;\\n\\n\\nuniform vec4 uHighlightColour;\\n\\n\\nuniform vec4 uHoverPickColour;\\n\\n\\nuniform vec4 uXRayColour;\\n\\n\\nuniform float uMeter;\\n\\n\\nuniform vec3 uWcs;\\n\\n\\n\\nuniform int uColorCoding;\\n\\n\\n\\n\\n\\n\\nuniform int uRenderingMode;\\n\\n\\nuniform highp sampler2D uVertexSampler;\\nuniform highp float uVertexTextureSize;\\n\\n\\nuniform highp sampler2D uMatrixSampler;\\nuniform highp float uMatrixTextureSize;\\n\\n\\nuniform highp sampler2D uStyleSampler;\\nuniform highp float uStyleTextureSize;\\n\\n\\nuniform highp sampler2D uStateStyleSampler;\\n\\n\\nvarying vec4 vColor;\\n\\nvarying vec3 vPosition;\\n\\nvarying vec3 vNormal;\\n\\nvarying mediump float vDiscard;\\n\\nconst float PI = 3.1415926535897932384626433832795;\\n\\nvec3 getNormal(mat4 transform) {\\n float U = aNormal[0];\\n float V = aNormal[1];\\n float lon = U / 252.0 * 2.0 * PI;\\n float lat = V / 252.0 * PI;\\n\\n float x = sin(lon) * sin(lat);\\n float z = cos(lon) * sin(lat);\\n float y = cos(lat);\\n\\n vec3 normal = vec3(x, y, z);\\n if (aTransformationIndex < -0.5) {\\n return normalize(normal);\\n }\\n\\n \\n \\n \\n \\n mat3 normTrans = mat3(transform);\\n\\n return normalize(vec3(normTrans * normal));\\n}\\n\\nvec4 getIdColor(float id) {\\n float B = floor(id / (256.0*256.0));\\n float G = floor((id - B * 256.0*256.0) / 256.0);\\n float R = mod(id, 256.0);\\n \\n \\n\\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\\n}\\n\\nvec2 getTextureCoordinates(float index, float size)\\n{\\n float x = floor(mod(index + 0.5, size)); \\n float y = floor((index + 0.5)/ size); \\n \\n return vec2((x + 0.5) / size, (y + 0.5) / size);\\n}\\n\\n\\nvec4 getColor() { \\n \\n float restyle = aState[1];\\n if (restyle > 224.5) {\\n vec2 coords = getTextureCoordinates(aStyleIndex, uStyleTextureSize);\\n vec4 col = texture2D(uStyleSampler, coords);\\n \\n \\n if (uRenderingMode == 1) {\\n float intensity = (col.r + col.g + col.b) / 3.0;\\n return vec4(intensity, intensity, intensity, col.a);\\n }\\n\\n \\n return col;\\n }\\n\\n \\n \\n vec2 coords = getTextureCoordinates(restyle, 15.0);\\n vec4 col2 = texture2D(uStateStyleSampler, coords);\\n\\n \\n if (uRenderingMode == 1) {\\n float intensity = (col2.r + col2.g + col2.b) / 3.0;\\n return vec4(intensity, intensity, intensity, col2.a);\\n }\\n\\n return col2;\\n}\\n\\nvec4 getVertexPosition(mat4 transform) {\\n vec2 coords = getTextureCoordinates(aVertexIndex, uVertexTextureSize);\\n vec3 point = vec3(texture2D(uVertexSampler, coords));\\n\\n if (aTransformationIndex < -0.5) {\\n return vec4(point, 1.0);\\n }\\n\\n return transform * vec4(point, 1.0);\\n}\\n\\nmat4 getTransform() {\\n if (aTransformationIndex < -0.5) {\\n return mat4(1.0);\\n }\\n\\n float tIndex = aTransformationIndex * 4.0;\\n\\n \\n vec2 c1 = getTextureCoordinates(tIndex, uMatrixTextureSize);\\n vec2 c2 = getTextureCoordinates(tIndex + 1.0, uMatrixTextureSize);\\n vec2 c3 = getTextureCoordinates(tIndex + 2.0, uMatrixTextureSize);\\n vec2 c4 = getTextureCoordinates(tIndex + 3.0, uMatrixTextureSize);\\n\\n \\n vec4 v1 = texture2D(uMatrixSampler, c1);\\n vec4 v2 = texture2D(uMatrixSampler, c2);\\n vec4 v3 = texture2D(uMatrixSampler, c3);\\n vec4 v4 = texture2D(uMatrixSampler, c4);\\n\\n \\n return mat4(v1, v2, v3, v4);\\n}\\n\\nvoid main(void) {\\n int state = int(floor(aState[0] + 0.5));\\n vDiscard = 0.0;\\n\\n if (state == 254 || \\n (uColorCoding == -1 && state == 251) || \\n (uColorCoding == -1 && (\\n (uRenderingMode == 2 && state != 253 && state != 252 && state != 250) || \\n (uRenderingMode == 3 && (state == 253 || state == 252 || state == 250))) \\n ))\\n {\\n vDiscard = 1.0;\\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\\n vNormal = vec3(0.0, 0.0, 0.0);\\n vPosition = vec3(0.0, 0.0, 0.0);\\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\\n return;\\n }\\n\\n \\n mat4 transform = getTransform();\\n \\n vPosition = vec3(getVertexPosition(transform)) + uWcs;\\n vNormal = getNormal(transform);\\n\\n \\n vec4 baseColor = getColor();\\n\\n \\n if (baseColor.a < 0.98)\\n {\\n float correction = -0.002;\\n if (uColorCoding == -2 || uColorCoding >= 0) {\\n correction = -0.02;\\n }\\n vec3 trans = correction * uMeter * normalize(vNormal);\\n vPosition = vPosition + trans;\\n }\\n\\n \\n if (uColorCoding == -2) {\\n \\n if ((uRenderingMode == 2 || uRenderingMode == 4) && state != 252 && state != 253)\\n {\\n vDiscard = 1.0;\\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\\n vNormal = vec3(0.0, 0.0, 0.0); \\n } \\n else\\n {\\n float id = floor(aProduct + 0.5);\\n vColor = getIdColor(id);\\n vNormal = vec3(0.0, 0.0, 0.0);\\n }\\n }\\n \\n else if (uColorCoding >= 0) {\\n \\n if ((uRenderingMode == 2 || uRenderingMode == 4) && state != 252 && state != 253)\\n {\\n vDiscard = 1.0;\\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\\n vNormal = vec3(0.0, 0.0, 0.0); \\n } \\n else\\n {\\n float id = float(uColorCoding);\\n vColor = getIdColor(id);\\n vNormal = vec3(0.0, 0.0, 0.0);\\n }\\n }\\n \\n else {\\n \\n \\n \\n if (state == 250) {\\n baseColor = uHoverPickColour;\\n }\\n else if (state == 253) {\\n baseColor = uHighlightColour;\\n }\\n \\n else if (uRenderingMode == 2 || uRenderingMode == 3) {\\n \\n if (state == 252) { \\n baseColor = getColor();\\n }\\n \\n else {\\n baseColor = vec4(0.0, 0.0, 0.3, 0.5); \\n }\\n }\\n\\n \\n vColor = baseColor;\\n }\\n\\n \\n gl_Position = uPMatrix * uMVMatrix * vec4(vPosition, 1.0);\\n}\"","export const vertex_shader_300 = \"#version 300 es\\nin highp float aVertexIndex;\\nin highp float aTransformationIndex;\\nin highp float aStyleIndex;\\nin highp float aProduct;\\nin highp vec2 aState;\\nin highp vec2 aNormal;\\n\\n\\nuniform mat4 uMVMatrix;\\nuniform mat4 uPMatrix;\\n\\n\\nuniform vec4 uHighlightColour;\\n\\n\\nuniform vec4 uHoverPickColour;\\n\\n\\nuniform vec4 uXRayColour;\\n\\n\\nuniform float uMeter;\\n\\n\\nuniform vec3 uWcs;\\n\\n\\n\\nuniform int uColorCoding;\\n\\n\\n\\n\\n\\n\\nuniform int uRenderingMode;\\n\\n\\nuniform highp sampler2D uVertexSampler;\\nuniform highp float uVertexTextureSize;\\n\\n\\nuniform highp sampler2D uMatrixSampler;\\nuniform highp float uMatrixTextureSize;\\n\\n\\nuniform highp sampler2D uStyleSampler;\\nuniform highp float uStyleTextureSize;\\n\\n\\nuniform highp sampler2D uStateStyleSampler;\\n\\n\\nout vec4 vColor;\\n\\nout vec3 vPosition;\\n\\nout vec3 vNormal;\\n\\nout mediump float vDiscard;\\n\\nconst float PI = 3.1415926535897932384626433832795;\\n\\nvec3 getNormal(mat4 transform) {\\n float U = aNormal[0];\\n float V = aNormal[1];\\n float lon = U / 252.0 * 2.0 * PI;\\n float lat = V / 252.0 * PI;\\n\\n float x = sin(lon) * sin(lat);\\n float z = cos(lon) * sin(lat);\\n float y = cos(lat);\\n\\n vec3 normal = vec3(x, y, z);\\n if (aTransformationIndex < -0.5) {\\n return normalize(normal);\\n }\\n\\n \\n \\n \\n \\n mat3 normTrans = mat3(transform);\\n\\n return normalize(vec3(normTrans * normal));\\n}\\n\\nvec4 getIdColor(float id) {\\n float B = floor(id / (256.0*256.0));\\n float G = floor((id - B * 256.0*256.0) / 256.0);\\n float R = mod(id, 256.0);\\n \\n \\n\\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\\n}\\n\\nvec2 getTextureCoordinates(float index, float size)\\n{\\n float x = floor(mod(index + 0.5, size)); \\n float y = floor((index + 0.5)/ size); \\n \\n return vec2((x + 0.5) / size, (y + 0.5) / size);\\n}\\n\\n\\nvec4 getColor() { \\n \\n float restyle = aState[1];\\n if (restyle > 224.5) {\\n vec2 coords = getTextureCoordinates(aStyleIndex, uStyleTextureSize);\\n vec4 col = texture(uStyleSampler, coords);\\n \\n \\n if (uRenderingMode == 1) {\\n float intensity = (col.r + col.g + col.b) / 3.0;\\n return vec4(intensity, intensity, intensity, col.a);\\n }\\n\\n \\n return col;\\n }\\n\\n \\n \\n vec2 coords = getTextureCoordinates(restyle, 15.0);\\n vec4 col2 = texture(uStateStyleSampler, coords);\\n\\n \\n if (uRenderingMode == 1) {\\n float intensity = (col2.r + col2.g + col2.b) / 3.0;\\n return vec4(intensity, intensity, intensity, col2.a);\\n }\\n\\n return col2;\\n}\\n\\nvec4 getVertexPosition(mat4 transform) {\\n vec2 coords = getTextureCoordinates(aVertexIndex, uVertexTextureSize);\\n vec3 point = vec3(texture(uVertexSampler, coords));\\n\\n if (aTransformationIndex < -0.5) {\\n return vec4 (point, 1.0);\\n }\\n\\n return transform * vec4(point, 1.0);\\n}\\n\\nmat4 getTransform() {\\n if (aTransformationIndex < -0.5) {\\n return mat4(1.0);\\n }\\n\\n float tIndex = aTransformationIndex * 4.0;\\n\\n \\n vec2 c1 = getTextureCoordinates(tIndex, uMatrixTextureSize);\\n vec2 c2 = getTextureCoordinates(tIndex + 1.0, uMatrixTextureSize);\\n vec2 c3 = getTextureCoordinates(tIndex + 2.0, uMatrixTextureSize);\\n vec2 c4 = getTextureCoordinates(tIndex + 3.0, uMatrixTextureSize);\\n\\n \\n vec4 v1 = texture(uMatrixSampler, c1);\\n vec4 v2 = texture(uMatrixSampler, c2);\\n vec4 v3 = texture(uMatrixSampler, c3);\\n vec4 v4 = texture(uMatrixSampler, c4);\\n\\n \\n return mat4(v1, v2, v3, v4);\\n}\\n\\nvoid main(void) {\\n int state = int(floor(aState[0] + 0.5));\\n vDiscard = 0.0;\\n\\n if (state == 254 || \\n (uColorCoding == -1 && state == 251) || \\n (uColorCoding == -1 && (\\n (uRenderingMode == 2 && state != 253 && state != 252 && state != 250) || \\n (uRenderingMode == 3 && (state == 253 || state == 252 || state == 250))) \\n ))\\n {\\n vDiscard = 1.0;\\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\\n vNormal = vec3(0.0, 0.0, 0.0);\\n vPosition = vec3(0.0, 0.0, 0.0);\\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\\n return;\\n }\\n\\n \\n mat4 transform = getTransform();\\n \\n vPosition = vec3(getVertexPosition(transform)) + uWcs;\\n vNormal = getNormal(transform);\\n\\n \\n vec4 baseColor = getColor();\\n\\n \\n if (baseColor.a < 0.98)\\n {\\n float correction = -0.002;\\n if (uColorCoding == -2 || uColorCoding >= 0) {\\n correction = -0.02;\\n }\\n vec3 trans = correction * uMeter * normalize(vNormal);\\n vPosition = vPosition + trans;\\n }\\n \\n \\n if (uColorCoding == -2) {\\n \\n if ((uRenderingMode == 2 || uRenderingMode == 4) && state != 252 && state != 253)\\n {\\n vDiscard = 1.0;\\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\\n vNormal = vec3(0.0, 0.0, 0.0); \\n } \\n else\\n {\\n float id = floor(aProduct + 0.5);\\n vColor = getIdColor(id);\\n vNormal = vec3(0.0, 0.0, 0.0);\\n }\\n }\\n \\n else if (uColorCoding >= 0) {\\n \\n if ((uRenderingMode == 2 || uRenderingMode == 4) && state != 252 && state != 253)\\n {\\n vDiscard = 1.0;\\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\\n vNormal = vec3(0.0, 0.0, 0.0); \\n } \\n else\\n {\\n float id = float(uColorCoding);\\n vColor = getIdColor(id);\\n vNormal = vec3(0.0, 0.0, 0.0);\\n }\\n }\\n \\n else {\\n \\n \\n \\n if (state == 250) {\\n baseColor = uHoverPickColour;\\n }\\n else if (state == 253) {\\n baseColor = uHighlightColour;\\n }\\n \\n else if (uRenderingMode == 2 || uRenderingMode == 3) {\\n \\n if (state == 252) { \\n baseColor = getColor();\\n }\\n \\n else {\\n baseColor = uXRayColour; \\n }\\n }\\n \\n vColor = baseColor;\\n }\\n\\n \\n gl_Position = uPMatrix * uMVMatrix * vec4(vPosition, 1.0);\\n}\"","import { State } from './common/state';\nimport { ModelGeometry, ReaderOptions, Region } from './reader/model-geometry';\nimport { ModelHandle, DrawMode } from './model-handle';\nimport { Framebuffer } from './framebuffer';\nimport { ModelPointers } from './model-pointers';\nimport { worker as LoaderWorker } from './workers/worker';\n\n// shaders GLSL 100 ES\nimport { fragment_shader } from './shaders/fragment_shader';\nimport { vertex_shader } from './shaders/vertex_shader';\n// shaders GLSL 300 ES\nimport { fragment_shader_300 } from './shaders/fragment_shader_300';\nimport { vertex_shader_300 } from './shaders/vertex_shader_300';\n\n//ported libraries\nimport { WebGLUtils } from './common/webgl-utils';\nimport { LoadingPhase, Message, MessageType } from './common/message';\nimport { IPlugin } from './plugins/plugin';\nimport { ViewerEventMap, ViewerInteractionEventMap } from './common/viewer-event-map';\nimport { MouseNavigation } from './navigation/mouse-navigation';\nimport { KeyboardNavigation } from './navigation/keyboard-navigation';\nimport { TouchNavigation } from './navigation/touch-navigation';\nimport { Abilities } from './common/abilities';\nimport { CheckResult, } from './common/checkResult';\nimport { Animations, EasingType } from './navigation/animations';\nimport { mat4, vec3, mat3, quat, vec4 } from 'gl-matrix';\nimport { PerformanceRating } from './performance-rating';\nimport { CameraProperties, CameraType } from './camera';\nimport { SectionBox } from './section-box';\nimport { BBox } from './common/bbox';\nimport { CameraAdjustment } from './navigation/camera-adjustment';\nimport { PreflightCheck } from './navigation/preflight-check';\nimport { ProductType } from './product-type';\nimport { ProductAnalyticalResult } from './common/product-analytical-result';\nimport { FpsWatch } from './common/fps-watch';\n\nexport type NavigationMode = 'pan' | 'zoom' | 'orbit' | 'fixed-orbit' | 'free-orbit' | 'none' | 'look-around' | 'walk' | 'look-at' | 'locked-orbit';\n\n/**\n * The xbim 3D viewer component enabling _*.wexbim_ files to be viewed with WebGL.\n * \n * * A minimal example of using the viewer would be\n * ```\n *   <canvas id=\"viewer\" width=\"500\" height=\"300\"></canvas>\n *   <script type=\"text/javascript\">\n *       var viewer = new Viewer('viewer');\n *       viewer.on('loaded', () => {\n *           viewer.show(ViewType.DEFAULT);\n *       });\n *       viewer.load('../data/SampleHouse.wexbim');\n *       viewer.start();\n *   </script>\n * ```\n * @category Core\n */\nexport class Viewer {\n\n    public gl: WebGLRenderingContext;\n    public glVersion: number;\n    public canvas: HTMLCanvasElement;\n\n    private changed: boolean = true;\n    private _navigationMode: NavigationMode = 'orbit';\n\n    /**\n     * Switch between different navigation modes for left mouse button. Allowed values: <strong> 'pan', 'zoom', 'orbit' (or 'fixed-orbit') , 'free-orbit' and 'none'</strong>. Default value is <strong>'orbit'</strong>;\n     * @member {String} Viewer#navigationMode\n     */\n    public get navigationMode(): NavigationMode { return this._navigationMode };\n    public set navigationMode(value: NavigationMode) {\n        this._navigationMode = value;\n        if (value === 'walk' || value === 'look-around' || value === 'look-at') {\n            this.adaptivePerformanceOn = false;\n        } else {\n            this.adaptivePerformanceOn = true;\n        }\n    }\n\n    public get cameraProperties(): CameraProperties { return this._camera; }\n\n    public get sectionBox(): SectionBox { return this._sectionBox; }\n\n    public get width(): number { return this._width; }\n    public set width(value: number) { this._width = value; this.changed = true; }\n\n    public get height(): number { return this._height; }\n    public set height(value: number) { this._height = value; this.changed = true; }\n\n    /**\n     * Type of camera to be used. Available values are <strong>'perspective'</strong> and <strong>'orthogonal'</strong> You can change this value at any time with instant effect.\n     * @member {string} Viewer#camera\n     */\n    public get camera(): CameraType { return this.cameraProperties.type; }\n    public set camera(value: CameraType) { this.cameraProperties.type = value; this.changed = true; }\n    /**\n     * Array of four integers between 0 and 255 representing RGBA colour components. This defines background colour of the viewer. You can change this value at any time with instant effect.\n     * @member {Number[]} Viewer#background\n     */\n    public get background(): number[] { return this._background; }\n    public set background(value: number[]) { this._background = value; this.changed = true; }\n    /**\n     * Array of four integers between 0 and 255 representing RGBA colour components. This defines colour for highlighted elements. You can change this value at any time with instant effect.\n     * @member {Number[]} Viewer#highlightingColour\n     */\n    public get highlightingColour(): number[] { return this._highlightingColour; }\n    public set highlightingColour(value: number[]) { this._highlightingColour = value; this.changed = true; }\n\n    /**\n     * Array of four integers between 0 and 255 representing RGBA colour components. This defines colour for elements when hovered over. You can change this value at any time with instant effect.\n     * @member {Number[]} Viewer#hoverPickColour\n     */\n    public get hoverPickColour(): number[] { return this._hoverPickColour; }\n    public set hoverPickColour(value: number[]) { this._hoverPickColour = value; this.changed = true; }\n\n    /**\n     * Array of four integers between 0 and 255 representing RGBA colour components. This defines colour for xray mode rendering. You can change this value at any time with instant effect.\n     * @member {Number[]} Viewer#xrayColour\n     */\n    public get xrayColour(): number[] { return this._xrayColour; }\n    public set xrayColour(value: number[]) { this._xrayColour = value; this.changed = true; }\n\n    /**\n     * World matrix\n     * @member {Number[]} Viewer#mvMatrix\n     */\n    public get mvMatrix(): mat4 { return this._mvMatrix; }\n    public set mvMatrix(value: mat4) { this._mvMatrix = value; this.changed = true; this._mvMatrixTimestamp = Date.now(); }\n\n    /**\n     * Camera matrix (perspective or orthogonal)\n     * @member {Number[]} Viewer#pMatrix\n     */\n    public get pMatrix(): mat4 { return this._pMatrix; }\n    public set pMatrix(value: mat4) { this._pMatrix = value; this.changed = true; }\n\n    /**\n     * Switch between different rendering modes.\n     * @member {String} Viewer#renderingMode\n     */\n    public get renderingMode(): RenderingMode { return this._renderingMode; }\n    public set renderingMode(value: RenderingMode) { this._renderingMode = value; this.changed = true; }\n\n    /**\n     * Allows to adjust gamma of the view\n     */\n    public get gamma(): number { return this._gamma; }\n    public set gamma(value: number) { this._gamma = value; this.changed = true; }\n\n    /**\n     * Allows to adjust contrast of the view\n     */\n    public get contrast(): number { return this._contrast; }\n    public set contrast(value: number) { this._contrast = value; this.changed = true; }\n\n    /**\n     * Allows to adjust brightness of the view\n     */\n    public get brightness(): number { return this._brightness; }\n    public set brightness(value: number) { this._brightness = value; this.changed = true; }\n\n    /**\n     * Returns number of milliseconds for which Model View Matris hasn't been changed.\n     * This can be used for optimisations and actions to happen after vertain amount of time\n     * after the last movement of the model.\n     */\n    public get mvMatrixAge(): number { return Date.now() - this._mvMatrixTimestamp; }\n\n    /**\n     * Current performance based on FPS. Updated approx. every 500 ms\n     */\n    public get performance(): PerformanceRating { return this._performance; }\n    public set performance(value: PerformanceRating) { this._performance = value; this.changed = true; }\n\n    /**\n     * The viewer is watching the performance based on the FPS. When performance drops down, it can reduce amount\n     * of geometry to be rendered. This is usefull for some navigation and animations but might not be convenient in all scenarios\n     * like in a wals mode. This property can be used to switch the addaptive performance on and off.\n     */\n    public get adaptivePerformanceOn(): boolean { return this._adaptivePerformanceOn; }\n    public set adaptivePerformanceOn(value: boolean) { this._adaptivePerformanceOn = value; }\n\n    /**\n     * Determines whether the viewer raised 'hoverpick' events when the mouse hovers over an element. \n     * When enabled the currently hovered item will be be highlighted. The 'hoverpicked' event can be\n     * used to provide tooltips/context menus etc.\n     */\n    public get hoverPickEnabled(): boolean { return this._hoverPickEnabled; }\n    public set hoverPickEnabled(value: boolean) { this._hoverPickEnabled = value; }\n\n\n    /**\n     * Returns readonly array of plugins\n     * @member {IPlugin[]} Viewer#plugins\n     */\n    public get plugins(): IPlugin[] { return this._plugins.slice(); }\n\n    /**\n     * Returns number of units in active model (1000 is model is in mm)\n     * @member {Number} Viewer#unitsInMeter\n     */\n    public get unitsInMeter(): number {\n        const info = this.activeHandles.map((h) => h.meter);\n        if (info.length === 0) {\n            return null;\n        }\n        return info[0];\n    }\n\n    /**\n     * This can be used to adjust ortgographic and perspective camera properties\n     * to be close. Particularly useful when restoring orthographic view with displaced camera.\n     */\n    public get adjustments(): CameraAdjustment { return this._cameraAdjustment; }\n\n    /**\n     * Number of milliseconds for animated zooming\n     */\n    public zoomDuration: number = 1000;\n\n    /**\n     * Animations functionality\n     */\n    public animations: Animations;\n\n\n    /**\n     * Returns a filtered array of currently active handles\n     */\n    public get activeHandles() { return this._handles.filter((h) => h != null && !h.stopped && !h.empty); }\n\n    private _camera = new CameraProperties(() => { this.changed = true; });\n    private _sectionBox = new SectionBox(() => {\n        const wcs = this.getCurrentWcs();\n        const region = this.getMergedRegion().bbox;\n        const section = this._sectionBox.getBoundingBox(wcs);\n        if (region != null && section != null && BBox.areDisjoint(region, section)) {\n            console.warn('Section box is disjoint with the current content');\n        }\n\n        this.changed = true;\n    });\n    private _width: number;\n    private _height: number;\n    private _background: number[] = [230, 230, 230, 255];\n    private _highlightingColour: number[] = [255, 173, 33, 255];\n    private _hoverPickColour: number[] = [0, 255, 0, 255];\n    private _xrayColour: number[] = [80, 80, 80, 150];\n    private _mvMatrix: mat4 = mat4.create();\n    private _pMatrix: mat4 = mat4.create();\n    private _renderingMode: RenderingMode = RenderingMode.NORMAL;\n    private _mvMatrixTimestamp: number = Date.now();\n    private _fpsWatch: FpsWatch;\n\n    private _isRunning: boolean = false;\n    private _stateStyles: Uint8Array;\n    private _stateStyleTexture: WebGLTexture;\n    private _plugins: IPlugin[] = [];\n    //Array of handles which can eventually contain handles to one or more models.\n    private _handles: ModelHandle[] = [];\n    //shader program used for rendering\n    private _shaderProgram: WebGLProgram = null;\n\n    private _mvMatrixUniformPointer: WebGLUniformLocation;\n    private _pMatrixUniformPointer: WebGLUniformLocation;\n    private _lightUniformPointer: WebGLUniformLocation;\n    private _colorCodingUniformPointer: WebGLUniformLocation;\n    private _renderingModeUniformPointer: WebGLUniformLocation;\n    private _highlightingColourUniformPointer: WebGLUniformLocation;\n    private _hoverPickColourUniformPointer: WebGLUniformLocation;\n    private _xrayColourUniformPointer: WebGLUniformLocation;\n    private _stateStyleSamplerUniform: WebGLUniformLocation;\n    private _gammaContrastBrightnessUniform: WebGLUniformLocation;\n    private _sectionBoxUniform: WebGLUniformLocation;\n\n    private _gamma: number = 1.0;\n    private _contrast: number = 1.0;\n    private _brightness: number = 0.0;\n\n    private _currentFps: number = 60.0;\n    private _performance: PerformanceRating = PerformanceRating.HIGH;\n    private _adaptivePerformanceOn: boolean = true;\n    private _hoverPickEnabled: boolean = false;\n\n    // dictionary of named events which can be registered and unregistered by using '.on('eventname', callback)'\n    // and '.off('eventname', callback)'. Registered call-backs are triggered by the viewer when important events occur.\n    private _events: { [entName: string]: ((args: { message: string } | { event: Event, id: number, model: number } | { model: number, tag: any } | number | { target: Element } | boolean) => void)[]; } = {};\n\n    private _canvasListeners: { [evtName: string]: (event: Event) => any } = {};\n\n    // pointers to WebGL shader attributes and uniforms\n    private _pointers: ModelPointers;\n\n    // cache of the request function. This should be kept from the constructor\n    // which should run outside of any Zone in case zoning is in use (like in Angular where init in NgZone causes complete refresh on every frame in efect)\n    private _requestAnimationFrame: (callback: FrameRequestCallback) => number;\n\n    /**\n     * Holds reference to Floating Point Texture extension needed for WebGL1 implementations\n     */\n    private _fptExtension: object;\n\n    private _cameraAdjustment: CameraAdjustment;\n\n    private _readerOptions: ReaderOptions = {\n        orderGeometryBySize: false\n    }\n\n    /**\n     * Options that can control the behaviour of the geometry loader\n     */\n    public get readerOptions(): ReaderOptions {\n        return this._readerOptions\n    };\n\n    /**\n     * Holds reference to Depth Texture extension needed for WebGL2 implementations to get 3D coordinate of\n     * user interactions (click, pick, touch etc.)\n     */\n    private _depthTextureExtension: object;\n\n    public get hasDepthSupport(): boolean {\n        if (this.glVersion > 1) {\n            return true;\n        }\n        return this._depthTextureExtension != null;\n    }\n\n    /**\n     * Indicates if the viewer is running the rendering loop\n     */\n    public get isRunning() { return this._isRunning; }\n\n    public lockedOrbitOrigin: vec3;\n\n    /**\n    * This is constructor of the xBIM Viewer. It gets HTMLCanvasElement or string ID as an argument. Viewer will than be initialized \n    * in the context of specified canvas. Any other argument will throw exception. \n    * \n    * If any Zone technology is in use, this constructor should run in the root zone without any additional load. It has global event\n    * handlers and hooks in document.mousemove, document.keyup, requestAnimationFrame and otherw which need to run fast and should not\n    * cause any additional sideeffects (like data binding refresh in Angular)\n    * @name Viewer\n    * @constructor\n    * @classdesc This is the main and the only class you need to load and render IFC models in wexBIM format. This viewer is part of\n    * xBIM toolkit which can be used to create wexBIM files from IFC, ifcZIP and ifcXML. WexBIM files are highly optimized for\n    * transmition over internet and rendering performance. Viewer uses WebGL technology for hardware accelerated 3D rendering and SVG for\n    * certain kinds of user interaction. This means that it won't work with obsolete and non-standard-compliant browsers like IE10 and less.\n    *\n    * @param {string | HTMLCanvasElement} canvas - string ID of the canvas or HTML canvas element.\n    * @param {({string})} errorHandler - an error handler\n    */\n    constructor(canvas: string | HTMLCanvasElement, errorHandler?: ({ message }) => void) {\n        if (canvas == null) {\n            throw new Error('Canvas has to be defined');\n        }\n\n        if (typeof (canvas['nodeName']) !== 'undefined' && canvas['nodeName'] === 'CANVAS') {\n            this.canvas = canvas as HTMLCanvasElement;\n        }\n        if (typeof (canvas) === 'string') {\n            this.canvas = document.getElementById(canvas) as HTMLCanvasElement;\n        }\n        if (this.canvas == null) {\n            throw new Error('You have to specify canvas either as an ID of HTML element or the element itself');\n        }\n\n        if (errorHandler != null) {\n            this.on('error', errorHandler);\n        }\n\n        this.cameraProperties.fov = 60;\n        this.cameraProperties.near = 1;\n        this.cameraProperties.far = 100;\n\n        //*************************** Do all the set up of WebGL **************************\n        WebGLUtils.setupWebGL(this.canvas, (ctx, version) => {\n            this.gl = ctx;\n            this.glVersion = version;\n        }, { preserveDrawingBuffer: true }, (err) => {\n            this.error(err);\n        });\n\n        //do not even initialize this object if WebGL is not supported\n        if (!this.gl) {\n            this.error(\"Unable to set up WebGL\");\n            return;\n        }\n\n\n        // keep reference to the function in case it gets into zone. For example Angular uses\n        // NgZone forked from the root Zone to refresh data content. But we make heavy use of this\n        // asynchronous call and it would cause Angular to refresh constantly. That would innecessary increase\n        // CPU load.\n        this._requestAnimationFrame = (window.requestAnimationFrame ||\n            window[\"webkitRequestAnimationFrame\"] ||\n            window[\"mozRequestAnimationFrame\"] ||\n            window[\"oRequestAnimationFrame\"] ||\n            window[\"msRequestAnimationFrame\"] ||\n            // tslint:disable-next-line: only-arrow-functions\n            function (/* function FrameRequestCallback */ callback: () => void) {\n                window.setTimeout(callback, 1000 / 60);\n            }).bind(window);\n\n        let gl = this.gl;\n\n        //detect floating point texture support\n        if (this.glVersion < 2) {\n            this._fptExtension = (\n                gl.getExtension('OES_texture_float') ||\n                gl.getExtension('MOZ_OES_texture_float') ||\n                gl.getExtension('WEBKIT_OES_texture_float')\n            );\n            if (!this._fptExtension) {\n                // this is critical\n                throw new Error(\"Floating point texture support required.\");\n            }\n            this._depthTextureExtension = (\n                gl.getExtension('WEBGL_depth_texture') ||\n                gl.getExtension('WEBKIT_WEBGL_depth_texture') ||\n                gl.getExtension('MOZ_WEBGL_depth_texture')\n            );\n            if (!this._depthTextureExtension) {\n                console.warn(\"WebGL 1.0 Depth texture extension not available. Interaction might be constrained as 3D of the event won't be calculated.\");\n            }\n        }\n\n        //set up DEPTH_TEST and BLEND so that transparent objects look right\n        //this is not 100% perfect as it would be necessary to sort all objects from back to\n        //front when rendering them. We have sacrificed this for the sake of performance.\n        //Objects with no transparency in their default style are drawn first and semi-transparent last.\n        //This gives 90% right when there is not too much of transparency. It may not look right if you\n        //have a look through two windows or if you have a look from inside of the building out.\n        //It is granted to be alright when looking from outside of the building inside through one\n        //semi-transparent object like curtain wall panel or window which is the case most of the time.\n        //This is known limitation but there is no plan to change this behaviour.\n        gl.enable(gl.DEPTH_TEST);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n\n        //cache canvas width and height and change it only when size change\n        // it is better to cache this value because it is used frequently and it takes a time to get a value from HTML\n        this.width = this.canvas.width = this.canvas.offsetWidth;\n        this.height = this.canvas.height = this.canvas.offsetHeight;\n\n        //********************** Run all the initialize functions *****************************\n        //compile shaders for use\n        this._initShaders();\n        //initialize vertex attribute and uniform pointers\n        this._initAttributesAndUniforms();\n        //initialize mouse events to capture user interaction\n        MouseNavigation.initMouseEvents(this);\n        //initialize keyboard events to capture user interaction\n        KeyboardNavigation.initKeyboardEvents(this);\n        //initialize touch events to capute user interaction on touch devices\n        TouchNavigation.initTouchNavigationEvents(this);\n        TouchNavigation.initTouchTapEvents(this);\n\n        // listen to all mouse and touch events of the canvas and enrich the information\n        // with product ID and model ID\n        //disable default context menu as it doesn't make much sense for the viewer\n        //it can be replaced by custom menu when listening to 'contextMenu' of the viewer\n        this._disableContextMenu();\n\n        //This array keeps data for overlay styles.\n        this._stateStyles = new Uint8Array(15 * 15 * 4);\n        this._stateStyleTexture = gl.createTexture();\n\n        //this texture has constant size and is bound at all times\n        gl.activeTexture(gl.TEXTURE4);\n        gl.bindTexture(gl.TEXTURE_2D, this._stateStyleTexture);\n        gl.uniform1i(this._stateStyleSamplerUniform, 4);\n\n        //this has a constant size 15 which is defined in vertex shader\n        ModelHandle.bufferTexture(gl, this._stateStyleTexture, this._stateStyles);\n\n        // watch resizing on every frame\n        let elementHeight = this.height;\n        let elementWidth = this.width;\n        const watchCanvasSize = () => {\n            if (this.canvas.offsetHeight !== elementHeight || this.canvas.offsetWidth !== elementWidth) {\n                elementHeight = this.height = this.canvas.height = this.canvas.offsetHeight;\n                elementWidth = this.width = this.canvas.width = this.canvas.offsetWidth;\n            }\n            this._requestAnimationFrame(watchCanvasSize);\n        };\n        watchCanvasSize();\n\n        // watch current depth of view in a grid 20 x 20 and adjust camera if needed\n        this._cameraAdjustment = new CameraAdjustment(this, this._requestAnimationFrame, 20);\n\n        this.animations = new Animations(this);\n\n        this._fpsWatch = new FpsWatch(this._requestAnimationFrame);\n        this.setupFpsReporting();\n        this._watchPerformance();\n    }\n\n    /**\n    * This is a static function which should always be called before Viewer is instantiated.\n    * It will check all prerequisites of the viewer and will report all issues. If CheckResult.errors contains\n    * any messages viewer won't work. If CheckResult.warnings contain any messages it will work but some\n    * functions may be restricted or may not work or it may have poor performance.\n    * @function Viewer.check\n    * @return {CheckResult}\n    */\n    public static check(): CheckResult {\n        return Abilities.check();\n    }\n\n    /**\n    * Adds plugin to the viewer. Plugins can implement certain methods which get called in certain moments in time like\n    * before draw, after draw etc. This makes it possible to implement functionality tightly integrated into Viewer like navigation cube or others. \n    * @function Viewer#addPlugin\n    * @param {IPlugin} plugin - plug-in object\n    */\n    public addPlugin(plugin: IPlugin) {\n        if (!plugin.init) {\n            return;\n        }\n\n        plugin.init(this);\n        this._plugins.push(plugin);\n        this.changed = true;\n    }\n\n    /**\n    * Removes plugin from the viewer. Plugins can implement certain methods which get called in certain moments in time like\n    * before draw, after draw etc. This makes it possible to implement functionality tightly integrated into Viewer like navigation cube or others. \n    * @function Viewer#removePlugin\n    * @param {object} plugin - plug-in object\n    */\n    public removePlugin(plugin: IPlugin) {\n        var index = this._plugins.indexOf(plugin, 0);\n        if (index < 0) {\n            return;\n        }\n        this._plugins.splice(index, 1);\n        this.changed = true;\n    }\n\n    /**\n    * Use this function to define up to 224 optional styles which you can use to change appearance of products and types if you pass the index specified in this function to {@link Viewer#setState setState()} function.\n    * @function Viewer#defineStyle\n    * @param {Number} index - Index of the style to be defined. This has to be in range 0 - 224. Index can than be passed to change appearance of the products in model\n    * @param {Number[]} colour - Array of four numbers in range 0 - 255 representing RGBA colour. If there are less or more numbers exception is thrown.\n    */\n    public defineStyle(index: number, colour: number[]) {\n        if (typeof (index) === 'undefined' || (index < 0 && index > 224)) {\n            throw new Error('Style index has to be defined as a number 0-224');\n        }\n        if (typeof (colour) === 'undefined' || !colour.length || colour.length !== 4) {\n            throw new Error('Colour must be defined as an array of 4 bytes');\n        }\n\n        //set style to style texture via model handle\n        var colData = new Uint8Array(colour);\n        this._stateStyles.set(colData, index * 4);\n\n        //reset data in GPU\n        let gl = this.setActive();\n\n        //update overlay styles\n        gl.activeTexture(gl.TEXTURE4);\n        gl.bindTexture(gl.TEXTURE_2D, this._stateStyleTexture);\n        ModelHandle.bufferTexture(gl, this._stateStyleTexture, this._stateStyles);\n\n        //set flag\n        this.changed = true;\n    }\n\n    /**\n    * You can use this function to change state of products in the model. State has to have one of values from {@link State State} enumeration. \n    * Target is either enumeration from {@link ProductType ProductType} or array of product IDs. If you specify type it will effect all elements of the type.\n    *\n    * @function Viewer#setState\n    * @param {State} state - One of {@link State State} enumeration values.\n    * @param {Number} [modelId] - Id of the model\n    * @param {Number[] | Number} target - Target of the change. It can either be array of product IDs or product type from {@link ProductType ProductType}.\n    */\n    public addState(state: State, target: number | number[], modelId?: number) {\n        if (typeof (state) === 'undefined' || !(state >= 225 && state <= 255)) {\n            throw new Error('State has to be defined as 225 - 255. Use State enum.');\n        }\n        if (typeof (target) === 'undefined' || target === null) {\n            throw new Error('Target must be defined either as type ID or as a list of product IDs');\n        }\n\n        this.forHandleOrAll((h: ModelHandle) => { h.addState(state, target); }, modelId);\n        this.changed = true;\n    }\n\n    public setState(state: State, target: number | number[], modelId?: number) {\n        if (typeof (state) === 'undefined' || !(state >= 225 && state <= 255)) {\n            throw new Error('State has to be defined as 225 - 255. Use State enum.');\n        }\n        if (typeof (target) === 'undefined' || target === null) {\n            throw new Error('Target must be defined either as type ID or as a list of product IDs');\n        }\n\n        this.forHandleOrAll((h: ModelHandle) => { h.setState(state, target); }, modelId);\n        this.changed = true;\n    }\n\n\n\n    public removeState(state: State, target: number | number[], modelId?: number) {\n        if (typeof (state) === 'undefined' || !(state >= 225 && state <= 255)) {\n            throw new Error('State has to be defined as 225 - 255. Use State enum.');\n        }\n        if (typeof (target) === 'undefined' || target === null) {\n            throw new Error('Target must be defined either as type ID or as a list of product IDs');\n        }\n\n        this.forHandleOrAll((h: ModelHandle) => { h.removeState(state, target); }, modelId);\n        this.changed = true;\n    }\n\n    /**\n     * Sets state of the given item to be hovered over, unsetting an previous \n     * item. Setting the id to undefined will clear the current.\n     * @param id The product Id\n     * @param model Id of the model\n     */\n    public setHoverPick(id: number, model: number) {\n        var current = this.getProductsWithState(State.HOVEROVER);\n        if (id) {\n            if (current.some(c => c.id === id && c.model === model)) {\n                // already hovered over\n                return;\n            }\n            const type = this.getProductType(id, model);\n            if (type !== ProductType.IFCSITE) {\n                // We don't hover-pick Site as it generally looks distracting due to size.\n                this.addState(State.HOVEROVER, [id], model);\n            }\n        }\n        // At most one item can be hovered at a time. Reset all others\n        current.forEach(o => {\n            if (id != o.id || model != o.model) {\n                this.removeState(State.HOVEROVER, [o.id], o.model);\n            }\n        });\n    }\n\n    public getProductsWithState(state: State): { id: number, model: number }[] {\n        let result: { id: number, model: number }[] = [];\n        const handles = this._handles.filter(h => !h.stopped && !h.empty);\n        handles.forEach(h => {\n            const products = h.getProductsWithState(state);\n            if (products != null && products.length > 0) {\n                result = result.concat(products);\n            }\n        });\n        return result;\n    }\n\n    /**\n   * Use this function to get state of the products in the model. You can compare result of this function \n   * with one of values from {@link State State} enumeration. 0xFF is the default value.\n   *\n   * @function Viewer#getState\n   * @param {Number} id - Id of the product. You would typically get the id from {@link ViewerEventMap#pick pick} event or similar event.\n   * @param {Number} [modelId] - Id of the model\n   */\n    public getState(id: number, modelId?: number): number {\n        return this.forHandleOrAll((h: ModelHandle) => {\n            return h.getState(id);\n        }, modelId);\n    }\n\n    /**\n    * Use this function to reset state of all products to 'UNDEFINED' which means visible and not highlighted. \n    * You can use optional hideSpaces parameter if you also want to show spaces. They will be hidden by default.\n    * \n    * @function Viewer#resetStates\n    * @param {Number[] | Number} target - Target of the change. It can either be array of product IDs or product type from {@link ProductType ProductType}.\n    * @param {Number} [modelId = null] - Optional Model ID. Id no ID is specified states are reset for all models.\n    */\n    public resetState(target: number | number[], modelId?: number) {\n        this.forHandleOrAll((h: ModelHandle) => {\n            h.resetState(target);\n        }, modelId);\n\n        this.changed = true;\n    }\n\n    /**\n     * Clears all highlighting in all visible models\n     */\n    public clearHighlighting(): void {\n        this._handles\n            .filter(h => !h.stopped && !h.empty)\n            .forEach(h => h.clearHighlighting());\n    }\n\n    /**\n     * Executes callback for one model if modelId is specified or for all handles.\n     * If no modelId is specified, last result will get returned, not an aggregation.\n     * @param callback Function to execute\n     * @param modelId ID of the model\n     */\n    private forHandleOrAll<T>(callback: (h: ModelHandle) => T, modelId?: number): T {\n        if (modelId != null) {\n            let handle = this.getHandle(modelId);\n            if (!handle) {\n                throw new Error(`Model with id '${modelId}' doesn't exist.`);\n            }\n            return callback(handle);\n        } else {\n            let result: T = null;\n            this._handles.forEach((handle) => {\n                if (handle) {\n                    let value = callback(handle);\n                    if (value != null) {\n                        result = value;\n                    }\n                }\n            });\n            return result;\n        }\n    }\n\n    private getHandle(id: number): ModelHandle {\n        return this._handles.filter((h) => h != null && h.id === id).pop();\n    }\n\n    public getCurrentImageHtml(width: number = this.width, height: number = this.height): HTMLImageElement {\n        var element = document.createElement(\"img\") as HTMLImageElement;\n        element.src = this.getCurrentImageDataUrl(width, height);\n        return element;\n    }\n\n    public getCurrentImageDataUrl(width: number = this.width, height: number = this.height, type: 'png' | 'jpeg' = 'png'): string {\n        if (width === 0 || height === 0)\n            return null;\n\n        //use background framebuffer\n        let frame = new Framebuffer(this.gl, width, height, false, this.glVersion);\n\n        //force draw into defined framebuffer\n        this.draw(frame);\n\n        let result = frame.getImageDataUrl(type);\n        //free resources\n        frame.delete();\n        return result;\n    }\n\n    public getCurrentImageDataArray(width: number = this.width, height: number = this.height): Uint8ClampedArray {\n        if (width === 0 || height === 0)\n            return null;\n\n        //use background framebuffer\n        let frame = new Framebuffer(this.gl, width, height, false, this.glVersion);\n\n        //force draw into defined framebuffer\n        this.draw(frame);\n\n        let result = frame.getImageDataArray();\n        //free resources\n        frame.delete();\n        return result;\n    }\n\n    public getCurrentImageBlob(callback: (blob: Blob) => void): void {\n        return this.canvas.toBlob(callback, 'image/png');\n    }\n\n\n    public getProductsStates(modelId: number): { id: number, states: State[] }[] {\n        var handle = this.getHandle(modelId);\n        if (handle == null) {\n            throw new Error(`Model '${modelId}' doesn't exist`);\n        }\n        return handle.getStates();\n    }\n\n    public restoreProductsStates(modelId: number, stateMap: { id: number, states: State[] }[]): void {\n        var handle = this.getHandle(modelId);\n        if (handle == null) {\n            throw new Error(`Model '${modelId}' doesn't exist`);\n        }\n\n        handle.resetState();\n        stateMap.forEach((sm) => {\n            sm.states.forEach((s) => {\n                handle.addState(s, [sm.id]);\n            });\n        });\n    }\n\n    /**\n     * Gets complete model state and style. Resulting object can be used to restore the state later on.\n     * \n     * @param {Number} modelId - Model ID which you can get from {@link ViewerEventMap#loaded loaded} event.\n     * @returns {Array} - Array representing model state in compact form suitable for serialization\n     */\n    public getModelState(modelId: number): number[][] {\n        var handle = this.getHandle(modelId);\n        if (handle == null) {\n            throw new Error(`Model '${modelId}' doesn't exist`);\n        }\n        return handle.getModelState();\n    }\n\n    /**\n     * Restores model state from the data previously captured with {@link Viewer#getModelState getModelState()} function\n     * @param {Number} modelId - ID of the model\n     * @param {Array} state - State of the model as obtained from {@link Viewer#getModelState getModelState()} function\n     */\n    public restoreModelState(modelId: number, state: number[][]) {\n        var handle = this.getHandle(modelId);\n        if (handle == null) {\n            throw new Error(`Model '${modelId}' doesn't exist`);\n        }\n\n        handle.restoreModelState(state);\n        this.changed = true;\n    }\n\n    /**\n    * Use this method for restyling of the model. This doesn't change the default appearance of the products so you can think about it as an overlay. You can \n    * remove the overlay if you set the style to {@link State#UNSTYLED State.UNSTYLED} value. You can combine restyling and hiding in this way. \n    * Use {@link Viewer#defineStyle defineStyle()} to define styling first. \n    * \n    * @function Viewer#setStyle\n    * @param style - style defined in {@link Viewer#defineStyle defineStyle()} method\n    * @param {Number[] | Number} target - Target of the change. It can either be array of product IDs or product type from {@link ProductType ProductType}.\n    * @param {Number} [modelId] - Optional ID of a specific model.\n    */\n    public setStyle(style: number, target: number | number[], modelId?: number) {\n        if (typeof (style) === 'undefined' || !(style >= 0 && style <= 225)\n        ) {\n            throw new Error('Style has to be defined as 0 - 225 where 225 is for default style.');\n        }\n        var c = [\n            this._stateStyles[style * 4],\n            this._stateStyles[style * 4 + 1],\n            this._stateStyles[style * 4 + 2],\n            this._stateStyles[style * 4 + 3]\n        ];\n        if (c[0] === 0 && c[1] === 0 && c[2] === 0 && c[3] === 0) {\n            console.warn('You have used undefined colour for restyling. Elements with this style will have transparent black colour and hence will be invisible.');\n        }\n\n        this.forHandleOrAll((handle: ModelHandle) => {\n            handle.setStyle(style, target);\n        }, modelId);\n\n        this.changed = true;\n    }\n\n    /**\n    * Use this function to get overriding colour style of the products in the model. The number you get is the index of \n    * your custom colour which you have defined in {@link Viewer#defineStyle defineStyle()} function. 0xFF is the default value.\n    *\n    * @function Viewer#getStyle\n    * @param {Number} id - Id of the product. You would typically get the id from {@link ViewerEventMap#pick pick event} or similar event.\n    * @param {Number} [modelId] - Optional Model ID. If not defined first style available for a product with certain ID will be returned. This might be ambiguous.\n    * @returns {Number} Returns style index or 255 (State.UNDEFINED) if there is no overriding style defined for the product. Use `viewer.defineStyle()` to define overriding style and `viewer.setStyle()` to set it for a product.\n    */\n    public getStyle(id: number, modelId?: number) {\n        let result: number = null;\n        this.forHandleOrAll((handle: ModelHandle) => {\n            result = handle.getStyle(id);\n        }, modelId);\n        return result;\n    }\n\n    /**\n    * Use this function to reset appearance of all products to their default styles.\n    *\n    * @function Viewer#resetStyles \n    * @param {Number} [modelId] - Optional ID of a specific model.\n    */\n    public resetStyles(modelId?: number): void {\n        this.forHandleOrAll((handle: ModelHandle) => {\n            handle.resetStyles();\n        }, modelId);\n\n        this.changed = true;\n    }\n\n    /**\n    * \n    * @function Viewer#getProductType\n    * @param {Number} prodID - Product ID. You can get this value either from semantic structure of the model or by listening to {@link ViewerEventMap#pick pick} event.\n    * @param {Number} [modelId] - Optional Model ID. If not defined first type of a product with certain ID will be returned. This might be ambiguous.\n    * @return {Number} Product type ID. This is either null if no type is identified or one of {@link ProductType type ids}.\n    */\n    public getProductType(prodId: number, modelId?: number): number {\n        return this.forHandleOrAll((handle: ModelHandle) => {\n            let map = handle.getProductMap(prodId);\n            if (map) {\n                return map.type;\n            }\n        }, modelId);\n    }\n\n    /**\n    * \n    * @function Viewer#getProductBoundingBox\n    * @param {Number} prodID - Product ID. You can get this value either from semantic structure of the model or by listening to {@link ViewerEventMap#pick pick} event.\n    * @param {Number} [modelId] - Optional Model ID. If not defined first type of a product with certain ID will be returned. This might be ambiguous.\n    * @return {Float32Array} Bounding box of the product in model coordinates (not reduced by current WCS)\n    */\n    public getProductBoundingBox(prodId: number, modelId?: number): Float32Array {\n        return this.forHandleOrAll((handle: ModelHandle) => {\n            const wcs = this.getCurrentWcs();\n            let map = handle.getProductMap(prodId, wcs);\n            if (map) {\n                const bb = map.bBox;\n                // add current WCS displacement\n                return new Float32Array([bb[0] + wcs[0], bb[1] + wcs[1], bb[2] + wcs[2], bb[3], bb[4], bb[5]]);\n            }\n        }, modelId);\n    }\n\n    //helper function for setting of the distance based on camera field of view and size of the product's bounding box\n    public getDistanceAndHeight(bBox: number[] | Float32Array, viewDirection: vec3, upDirection: vec3): { distance: number, height: number } {\n        const sizes = BBox.getSizeInView(bBox, viewDirection, upDirection);\n        const subjectRatio = sizes.width / sizes.height;\n\n        //set ratio to 1 if the viewer has no size (for example if canvas is not added to DOM yet)\n        const viewRatio = (this.width > 0 && this.height > 0) ?\n            this.width / this.height :\n            1;\n\n        let width = sizes.width;\n        let height = sizes.height;\n        // subject proportions wouldn't fit into view proportions\n        if (subjectRatio > viewRatio) {\n            height = width / viewRatio;\n        } else if (subjectRatio < viewRatio) {\n            width = height * viewRatio;\n        }\n\n        const minDistance = this.cameraProperties.near + sizes.depth / 2.0;\n        const optimalDistance = height / (Math.tan(this.cameraProperties.fov * Math.PI / 180.0 / 2.0) * 2.0) + sizes.depth / 2.0;\n\n        return {\n            distance: Math.max(optimalDistance, minDistance) * 1.2,\n            // distance: optimalDistance * 1.5,\n            height: height * 1.2 // make it little bit more far away so there is some space around the model\n        };\n    };\n\n    /**\n    * This method returns specified product's bounding box or bbox of the current acite models if no product ID is specified.\n    * @function Viewer#setCameraTarget\n    * @param {Number} prodId [optional] Product ID. You can get ID either from semantic structure of the model or from {@link ViewerEventMap#pick pick event}.\n    * @param {Number} [modelId] - Optional ID of a specific model.\n    * @return {number[]} Returns bounding box of the target, null if not found\n    */\n    public getTargetBoundingBox(prodId?: number, modelId?: number): number[] | Float32Array {\n        //set navigation origin and default distance to the product BBox\n        const wcs = this.getCurrentWcs();\n        if (prodId != null) {\n            //get product BBox and set it's centre as a navigation origin\n            let bbox = this.forHandleOrAll((handle: ModelHandle) => {\n                let map = handle.getProductMap(prodId, wcs);\n                if (map) {\n                    return map.bBox;\n                }\n            }, modelId);\n            if (bbox) {\n                return bbox;\n            } else {\n                return null;\n            }\n        }\n\n        //set navigation origin and default distance to the merged region composed \n        //from all models which are not stopped at the moment\n        let region = this.getMergedRegion();\n        if (region && region.population > 0) {\n            let bbox = region.bbox;\n            return bbox;\n        }\n\n        return null;\n    }\n\n    public getTargetsBoundingBox(targets: { id: number, model: number }[]): number[] | Float32Array {\n        const wcs = this.getCurrentWcs();\n        return targets.reduce((a, b) => {\n            const bbox = this.forHandleOrAll((handle: ModelHandle) => {\n                let map = handle.getProductMap(b.id, wcs);\n                if (map) {\n                    return map.bBox;\n                }\n            }, b.model);\n            return BBox.union(bbox, a);\n        }, <number[]>null);\n    }\n\n    public getMergedRegion(): Region {\n        let region = new Region();\n        const wcs = this.getCurrentWcs();\n        this.activeHandles\n            .forEach((h) => {\n                const r = h.getRegion(wcs);\n                if (r != null) {\n                    region = region.merge(r);\n                }\n            });\n\n        let bbox: number[] | Float32Array = region.bbox;\n        if (this.sectionBox.isSet) {\n            // if section box is set, return intersection of the section box and region bounding box\n            bbox = BBox.intersection(region.bbox, this.sectionBox.getBoundingBox(wcs));\n            if (bbox == null) {\n                console.debug('View will be empty because section box and actual content region are disjoint');\n            } else {\n                region.bbox = new Float32Array(bbox);\n                region.centre = new Float32Array(BBox.centre(bbox));\n            }\n        }\n\n        return region;\n    }\n\n    public getMergedRegionWcs(): Region {\n        let region = new Region();\n        const noWcs = vec3.create();\n        this.activeHandles\n            .forEach((h) => {\n                const r = h.getRegion(noWcs);\n                if (r != null) {\n                    region = region.merge(r);\n                }\n            });\n\n        return region;\n    }\n\n    /**\n    * This method can be used for batch setting of viewer members. It doesn't check validity of the input.\n    * @function Viewer#set\n    * @param {Object} settings - Object containing key - value pairs\n    */\n    public set(settings: Partial<Viewer>): void {\n        Object.getOwnPropertyNames(settings).forEach((key) => {\n            this[key] = settings[key];\n        });\n    }\n\n    /**\n    * This method uses WebWorker if available to load the model into this viewer.\n    * Model has to be either URL to wexBIM file or Blob or File representing wexBIM file binary data. Any other type of argument will throw an exception.\n    * You can load more than one model if they occupy the same space, use the same scale and have unique product IDs. Duplicated IDs won't affect \n    * visualization itself but would cause unexpected user interaction (picking, zooming, ...).\n    * @function Viewer#load\n    * @param {String | Blob | File} model - Model has to be either URL to wexBIM file or Blob or File representing wexBIM file binary data.\n    * @param {Any} tag [optional] - Tag to be used to identify the model in {@link ViewerEventMap#loaded loaded} event.\n    * @param {Object} headers [optional] - Headers to be used for request. This can be used for authorized access for example.\n    * @fires Viewer#loaded\n    */\n    public loadAsync(model: string | Blob | File, tag?: any, headers?: { [name: string]: string }, progress?: (message: Message) => void): void {\n        if (typeof (model) === 'undefined') {\n            throw new Error('You have to specify model to load.');\n        }\n        if (typeof (model) !== 'string' && !(model instanceof Blob)) {\n            throw new Error('Model has to be specified either as a URL to wexBIM file or Blob object representing the wexBIM file.');\n        }\n        const self = this;\n        const progressProxy = progress ? (m: Message) => {\n            if (m.type === MessageType.COMPLETED) {\n                // change all completer to progress so there is only one completed event in the end.\n                m.type = MessageType.PROGRESS;\n            }\n            progress(m);\n            // tslint:disable-next-line: no-empty\n        } : (m: Message) => { };\n\n        //fall back to synchronous loading if worker is not available\n        if (typeof (Worker) === 'undefined') {\n            this.load(model, tag, headers, progress);\n            console.warn('Asynchronous model loading requires Web Worker support in the browser. Falling back to synchronous loading.')\n            return;\n        }\n\n        const blob = new Blob([LoaderWorker], { type: 'application/javascript' });\n        const worker = new Worker(URL.createObjectURL(blob));\n        worker.onmessage = (evt) => {\n            const msg = evt.data as Message;\n\n            if (msg.type === MessageType.COMPLETED) {\n                var geometry = msg.result as ModelGeometry;\n\n                // remove result from message before we pass it out\n                msg.result = null;\n                progressProxy(msg);\n\n                // add handle and report progress of GPU feeding\n                const wexBimId = self.addHandle(geometry, tag, progressProxy);\n                // report completed\n                if (progress) {\n                    progress({\n                        message: 'Model load complete',\n                        type: MessageType.COMPLETED,\n                        percent: 100,\n                        wexbimId: wexBimId,\n                        phase: LoadingPhase.LOADING\n                    });\n                }\n            } else {\n                // pass the message from worker out\n                progressProxy(msg);\n            }\n        };\n        worker.onerror = (e) => {\n            self.error(e.message);\n        };\n\n        // make sure it is an absolute path\n        // make it absolute path for the case when used in an inline Webworker\n        if (typeof (model) === 'string' && model.indexOf('http') !== 0) {\n            const a = document.createElement('a');\n            a.href = model;\n            model = a.href;\n        }\n        worker.postMessage({ model: model, headers: headers, options: this.readerOptions });\n        return;\n    }\n\n    /**\n    * This method is used to load model data into viewer. Model has to be either URL to wexBIM file or Blob or File representing wexBIM file binary data. Any other type of argument will throw an exception.\n    * Region extend is determined based on the region of the model\n    * Default view if 'front'. If you want to define different view you have to set it up in handler of {@link ViewerEventMap#loaded loaded} event. <br>\n    * You can load more than one model if they occupy the same space, use the same scale and have unique product IDs. Duplicated IDs won't affect \n    * visualization itself but would cause unexpected user interaction (picking, zooming, ...)\n    * @function Viewer#load\n    * @param {String | Blob | File} model - Model has to be either URL to wexBIM file or Blob or File representing wexBIM file binary data.\n    * @param {Any} tag [optional] - Tag to be used to identify the model in {@link ViewerEventMap#loaded loaded} event.\n    * @param {Object} headers [optional] - Headers to be used for request. This can be used for authorized access for example.\n    * @param {Function} progress [optional] - Progress reporting delegate\n    * @fires Viewer#loaded\n    */\n    public load(model: string | Blob | File, tag?: any, headers?: { [name: string]: string }, progress?: (message: Message) => void) {\n        if (model == null) {\n            throw new Error('You have to specify model to load.');\n        }\n        if (typeof (model) !== 'string' && !(model instanceof Blob)) {\n            throw new Error('Model has to be specified either as a URL to wexBIM file or Blob object representing the wexBIM file.');\n        }\n        var viewer = this;\n\n        var geometry = new ModelGeometry();\n        geometry.onloaded = () => {\n            viewer.addHandle(geometry, tag, progress);\n        };\n        geometry.onerror = (msg) => {\n            viewer.error(msg);\n        };\n        try {\n            geometry.load(model, headers, progress, this.readerOptions);\n        } catch (err) {\n            viewer.error(err)\n        }\n    }\n\n    //this is a private function used to add loaded geometry as a new handle and to set up camera and \n    //default view if this is the first geometry loaded\n    private addHandle(geometry: ModelGeometry, tag: any, progress: (message: Message) => void): number {\n        var gl = this.setActive();\n        var handle = new ModelHandle(gl, geometry, progress);\n\n        //assign handle used to identify the model\n        handle.tag = tag;\n        this._handles.push(handle);\n\n        //set perspective camera near and far based on 1 meter dimension and size of the model\n        this.setNearAndFarFromCurrentModels();\n\n        //only set camera parameters and the view if this is the first model\n        // if (this.activeHandles.length === 1) {\n        //     //set default view\n        //     this.show(ViewType.DEFAULT, null, null, false);\n        // }\n\n        // force redraw so when 'loaded' is called listeners can operate with current canvas.\n        this.changed = true;\n\n\n        /**\n         * Occurs when geometry model is loaded into the viewer. This event returns object containing ID of the model.\n         * This ID can later be used to unload or temporarily stop the model.\n         * \n         * @event Viewer#loaded\n         * @type {object}\n         * @param {Number} id - model ID assigned by the viewer\n         * @param {Any} tag - tag which was passed to 'Viewer.load()' function\n         * \n        */\n        this.fire('loaded', { model: handle.id, tag: tag });\n\n        return handle.id;\n    }\n\n    /**\n     * Sets camera parameters (near and far clipping planes) from current active models.\n     * This should be called whenever active models are very different (size, units)\n     */\n    public setNearAndFarFromCurrentModels() {\n        if (this.activeHandles.length === 0) {\n            return;\n        }\n\n        const region = this.getMergedRegion();\n        if (!region || !region.bbox || region.bbox.length === 0) {\n            return;\n        }\n\n        const meter = this.activeHandles[0].meter;\n        var maxSize = BBox.getDiagonalSize(region.bbox);\n        this.cameraProperties.far = maxSize * 10;\n        this.cameraProperties.near = meter / 4;\n    }\n\n    /**\n     * Unloads model from the GPU. This action is not reversible.\n     * \n     * @param {Number} modelId - ID of the model which you can get from {@link ViewerEventMap#loaded loaded} event.\n     */\n    public unload(modelId: number) {\n        var handle = this.getHandle(modelId);\n        if (handle == null) {\n            throw new Error('Model with id: ' + modelId + \" doesn't exist or was unloaded already.\");\n        }\n\n        //stop for start so it doesn't interfere with the rendering loop\n        handle.stopped = true;\n\n        //remove from the array\n        var index = this._handles.indexOf(handle);\n        this._handles.splice(index, 1);\n        this.changed = true;\n\n        //unload and delete\n        handle.unload();\n\n        /**\n         * Occurs when model is unloaded.\n         *\n         * @event Viewer#unloaded\n         * @type {object}\n         * @param {any} tag - Tag passed to the viewer when model was loaded\n         * @param {Number} model - Model ID\n         */\n        this.fire('unloaded', { tag: handle.tag, model: handle.id });\n    }\n\n    //this function should be only called once during initialization\n    //or when shader set-up changes\n    private _initShaders(): boolean {\n        const gl = this.gl;\n        const compile = (shader: WebGLShader, code: string): boolean => {\n            gl.shaderSource(shader, code);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                const err = gl.getShaderInfoLog(shader);\n                this.error(err);\n                console.error(err);\n                return false;\n            }\n            return true;\n        };\n\n        //fragment shader\n        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        let fsCompiled = false;\n        if (this.glVersion === 1) {\n            fsCompiled = compile(fragmentShader, fragment_shader);\n        } else {\n            fsCompiled = compile(fragmentShader, fragment_shader_300);\n        }\n        if (!fsCompiled) {\n            return false;\n        }\n\n        //vertex shader (the more complicated one)\n        const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        let vsCompiled = false;\n        if (this.glVersion === 1) {\n            vsCompiled = compile(vertexShader, vertex_shader);\n        } else {\n            vsCompiled = compile(vertexShader, vertex_shader_300);\n        }\n        if (!vsCompiled) {\n            return false;\n        }\n\n        //link program\n        this._shaderProgram = gl.createProgram();\n        gl.attachShader(this._shaderProgram, vertexShader);\n        gl.attachShader(this._shaderProgram, fragmentShader);\n        gl.linkProgram(this._shaderProgram);\n\n        if (gl.getProgramParameter(this._shaderProgram, gl.LINK_STATUS)) {\n            gl.useProgram(this._shaderProgram);\n        } else {\n            this.error('Could not initialise shaders ');\n            console.error('Could not initialise shaders ');\n        }\n    }\n\n    private setActive(): WebGLRenderingContext {\n        var gl = this.gl;\n\n        //set own shader in case other shader program was used before\n        gl.useProgram(this._shaderProgram);\n\n        return gl;\n    }\n\n    private _initAttributesAndUniforms(): void {\n        var gl = this.setActive();\n\n        //create pointers to uniform variables for transformations\n        this._pMatrixUniformPointer = gl.getUniformLocation(this._shaderProgram, 'uPMatrix');\n        this._mvMatrixUniformPointer = gl.getUniformLocation(this._shaderProgram, 'uMVMatrix');\n        this._lightUniformPointer = gl.getUniformLocation(this._shaderProgram, 'uLight');\n        this._colorCodingUniformPointer = gl.getUniformLocation(this._shaderProgram, 'uColorCoding');\n        this._renderingModeUniformPointer = gl.getUniformLocation(this._shaderProgram, 'uRenderingMode');\n        this._highlightingColourUniformPointer = gl.getUniformLocation(this._shaderProgram, 'uHighlightColour');\n        this._hoverPickColourUniformPointer = gl.getUniformLocation(this._shaderProgram, 'uHoverPickColour');\n        this._xrayColourUniformPointer = gl.getUniformLocation(this._shaderProgram, 'uXRayColour');\n        this._stateStyleSamplerUniform = gl.getUniformLocation(this._shaderProgram, 'uStateStyleSampler');\n        this._gammaContrastBrightnessUniform = gl.getUniformLocation(this._shaderProgram, 'uGBC');\n        this._sectionBoxUniform = gl.getUniformLocation(this._shaderProgram, 'uSectionBox');\n\n        this._pointers = new ModelPointers(gl, this._shaderProgram);\n\n\n    }\n\n    private _disableContextMenu() {\n        // bind to canvas events\n        this.canvas.addEventListener('contextmenu', (event) => {\n            event.preventDefault();\n            return event.type !== 'contextmenu';\n        });\n    }\n\n    private get meter(): number {\n        const handle = this._handles.find((h) => !h.stopped && !h.empty);\n        if (!handle) {\n            return 1.0;\n        }\n\n        return handle.meter;\n    }\n\n    public navigate(type: NavigationMode, deltaX: number, deltaY: number, origin: vec3) {\n\n        // don't to anything if there is nothing to render\n        if (this.activeHandles.length === 0) {\n            return;\n        }\n\n        if (type === 'locked-orbit')\n            origin = this.lockedOrbitOrigin || origin;\n\n        //translation in WCS is position from [0, 0, 0]\n        const camera = this.getCameraPosition();\n        const distance = vec3.distance(camera, origin);\n\n        if (type === 'look-around') {\n            origin = camera;\n            deltaX = -deltaX;\n            deltaY = -deltaY;\n        }\n\n        // look-at and look-around are inverted\n        if (type === 'look-at') {\n            origin = camera;\n        }\n\n        //get origin coordinates in view space\n        const mvOrigin = vec3.transformMat4(vec3.create(), origin, this.mvMatrix);\n\n        //move to the navigation origin in view space\n        let transform = mat4.translate(mat4.create(), mat4.create(), mvOrigin);\n\n        //function for conversion from degrees to radians\n        const degToRad = (deg: number) => {\n            return deg * Math.PI / 180.0;\n        };\n\n        switch (type) {\n            case 'free-orbit':\n                transform = mat4.rotate(mat4.create(), transform, degToRad(deltaY / 4), [1, 0, 0]);\n                transform = mat4.rotate(mat4.create(), transform, degToRad(deltaX / 4), [0, 1, 0]);\n                break;\n\n            case 'locked-orbit':\n            case 'fixed-orbit':\n            case 'look-around':\n            case 'look-at':\n            case 'orbit':\n                mat4.rotate(transform, transform, degToRad(deltaY / 4), [1, 0, 0]);\n\n                //z rotation around model z axis\n                let mvZ = vec3.transformMat3(vec3.create(),\n                    [0, 0, 1],\n                    mat3.fromMat4(mat3.create(), this.mvMatrix));\n                mvZ = vec3.normalize(vec3.create(), mvZ);\n                transform = mat4.rotate(mat4.create(), transform, degToRad(deltaX / 4), mvZ);\n                break;\n\n            case 'pan':\n                let c = 0;\n                if (this.camera === CameraType.ORTHOGONAL) {\n                    c = this.cameraProperties.height / this.height;\n                } else {\n                    const fov = this.cameraProperties.fov * Math.PI / 180;\n                    const h = 2 * distance * Math.tan(fov / 2.0);\n                    c = h / this.height;\n                }\n                transform = mat4.translate(mat4.create(), transform, [c * deltaX, -c * deltaY, 0]);\n                break;\n\n            case 'walk':\n                // Walking is at constant pace\n                const walk = deltaY * this.meter * 0.5 / 20;\n                this.animations.addZoom(walk, 0);\n                return;\n            case 'zoom':\n                const direction = vec3.subtract(vec3.create(), origin, camera);\n                // smooth zooming animation\n                const move = deltaY * Math.max(distance, this.meter * 2) / 20;\n                this.animations.addZoom(move, 0, direction);\n                return;\n            default:\n                break;\n        }\n\n        //reverse the translation in view space and leave only navigation changes\n        var translation = vec3.negate(vec3.create(), mvOrigin);\n        transform = mat4.translate(mat4.create(), transform, translation);\n\n        //apply transformation in right order\n        this.mvMatrix = mat4.multiply(mat4.create(), transform, this.mvMatrix);\n    }\n\n    // cache as this is used frequently\n    private _lastWcs: ModelHandle;\n\n    /**\n     * Gets current WCS displacement used for visualisation\n     */\n    public getCurrentWcs(): vec3 {\n        const condition = (h: ModelHandle) => { return !h.empty && !h.stopped };\n        if (this._lastWcs != null && condition(this._lastWcs) === true)\n            return this._lastWcs.wcs;\n\n        let first = this._handles.filter(condition)[0];\n        if (first != null) {\n            this._lastWcs = first;\n            return this._lastWcs.wcs;\n        }\n        return vec3.create();\n    }\n    /**\n    * This is the main draw method. You can use it if you just want to render model once with no navigation and interaction.\n    * If you want interactive model, call {@link Viewer#start start()} method. \n    * @function Viewer#draw\n    * @fires Viewer#frame\n    */\n    public draw(framebuffer?: Framebuffer, disablePlugins = false) {\n\n        let wcs = this.getCurrentWcs();\n        let gl = this.gl;\n\n        // set background colour\n        gl.clearColor(this.background[0] / 255,\n            this.background[1] / 255,\n            this.background[2] / 255,\n            this.background[3] / 255);\n\n        // clear previous data in buffers\n        // tslint:disable-next-line: no-bitwise\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n        let width = framebuffer ? framebuffer.width : this.width;\n        let height = framebuffer ? framebuffer.height : this.height;\n\n        // set right size of viewport\n        gl.viewport(0, 0, width, height);\n        this.updatePMatrix(width, height);\n\n        // set blending function\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n        if (!disablePlugins) {\n            //call all before-draw plugins\n            this._plugins.forEach((plugin) => {\n                if (!plugin.onBeforeDraw) {\n                    return;\n                }\n                plugin.onBeforeDraw(width, height);\n            });\n        }\n\n        gl = this.setActive();\n\n        // set styling texture\n        gl.activeTexture(gl.TEXTURE4);\n        gl.bindTexture(gl.TEXTURE_2D, this._stateStyleTexture);\n        gl.uniform1i(this._stateStyleSamplerUniform, 4);\n\n\n        //set uniforms (these may quickly change between calls to draw)\n\n        gl.uniformMatrix4fv(this._pMatrixUniformPointer, false, this.pMatrix);\n        gl.uniformMatrix4fv(this._mvMatrixUniformPointer, false, this.mvMatrix);\n\n        // set light source as a head light with some offset (one meter top and right from camera)\n        var light = this.getLightPosition(this.meter * 1.0, this.meter * 1.0);\n        gl.uniform3fv(this._lightUniformPointer, light);\n\n        // gamma, contrast and brightness are passed through in a single vector\n        gl.uniform3fv(this._gammaContrastBrightnessUniform, new Float32Array([this.gamma, this.contrast, this.brightness]));\n\n        // set section box matrix to be used to clip the model by the box\n\n        gl.uniformMatrix4fv(this._sectionBoxUniform, false, this.sectionBox.getMatrix(wcs));\n\n        //use normal colour representation (1 would cause shader to use colour coding of IDs)\n        gl.uniform1i(this._colorCodingUniformPointer, ColourCoding.NONE);\n\n        //update highlighting colour\n        gl.uniform4fv(this._highlightingColourUniformPointer,\n            new Float32Array(\n                [\n                    this.highlightingColour[0] / 255.0,\n                    this.highlightingColour[1] / 255.0,\n                    this.highlightingColour[2] / 255.0,\n                    this.highlightingColour[3] / 255.0\n                ]));\n\n        //update hoverpick colour\n        gl.uniform4fv(this._hoverPickColourUniformPointer,\n            new Float32Array(\n                [\n                    this.hoverPickColour[0] / 255.0,\n                    this.hoverPickColour[1] / 255.0,\n                    this.hoverPickColour[2] / 255.0,\n                    this.hoverPickColour[3] / 255.0\n                ]));\n\n        //update xray colour\n        gl.uniform4fv(this._xrayColourUniformPointer,\n            new Float32Array(\n                [\n                    this.xrayColour[0] / 255.0,\n                    this.xrayColour[1] / 255.0,\n                    this.xrayColour[2] / 255.0,\n                    this.xrayColour[3] / 255.0\n                ]));\n\n        // bind buffer if defined\n        if (framebuffer) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer.framebuffer);\n        } else {\n            //set framebuffer to render into canvas (in case it was set for rendering to different framebuffer)\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n\n        gl.uniform1i(this._renderingModeUniformPointer, this.renderingMode);\n        // check for x-ray mode. XRAY mode uses 2 phase rendering to\n        // sort out all transparency issues so that all selected objects are\n        // properly visible\n        if (this.renderingMode === RenderingMode.XRAY || this.renderingMode === RenderingMode.XRAY_ULTRA) {\n            this.drawXRAY(gl);\n        } else {\n            gl.disable(gl.CULL_FACE);\n            gl.enable(gl.DEPTH_TEST);\n\n            // optimising performance\n            let percent = 100;\n            switch (this.performance) {\n                case PerformanceRating.VERY_LOW:\n                    percent = 10;\n                    break;\n                case PerformanceRating.LOW:\n                    percent = 30;\n                    break;\n                case PerformanceRating.MEDIUM:\n                    percent = 50;\n                    break;\n                case PerformanceRating.HIGH:\n                    percent = 100;\n                    break;\n                default:\n                    percent = 100;\n                    break;\n            }\n\n            //two runs, first for solids from all models, second for transparent objects from all models\n            //this makes sure that transparent objects are always rendered at the end.\n            this._handles.forEach((handle) => {\n                if (!handle.stopped) {\n                    handle.setActive(this._pointers, wcs);\n                    handle.draw(DrawMode.SOLID, handle.pinned ? 100 : percent);\n                }\n            });\n\n            if (this.performance > PerformanceRating.LOW) {\n                // Draw the transparent items, but only if performance is Medium or above\n                this._handles.forEach((handle) => {\n                    if (!handle.stopped) {\n                        handle.setActive(this._pointers, wcs);\n                        handle.draw(DrawMode.TRANSPARENT, handle.pinned ? 100 : percent);\n                    }\n                });\n            }\n        }\n\n        if (!disablePlugins) {\n            //call all after-draw plugins\n            this._plugins.forEach((plugin) => {\n                if (!plugin.onAfterDraw) {\n                    return;\n                }\n                plugin.onAfterDraw(width, height);\n            });\n        }\n    }\n\n    private getLightPosition(verticalOffset: number, horizontalOffset: number): vec3 {\n        const transform = mat4.getRotation(quat.create(), this.mvMatrix);\n        const inverse = quat.invert(quat.create(), transform);\n        const upDir = vec3.transformQuat(vec3.create(), [0, 1, 0], inverse);\n        const rightDir = vec3.transformQuat(vec3.create(), [1, 0, 0], inverse);\n\n        const vertical = vec3.scale(vec3.create(), upDir, verticalOffset);\n        const horizontal = vec3.scale(vec3.create(), rightDir, horizontalOffset);\n        const move = vec3.add(vec3.create(), vertical, horizontal);\n\n        const camera = this.getCameraPosition();\n        return vec3.add(vec3.create(), camera, move);\n    }\n\n    private drawXRAY(gl: WebGLRenderingContext) {\n        const mode = this.renderingMode;\n        const wcs = this.getCurrentWcs();\n\n        const transparentPass = () => {\n            gl.enable(gl.CULL_FACE);\n            // the rest as semitransparent overlay\n            gl.uniform1i(this._renderingModeUniformPointer, 3);\n            // disable writing to depth buffer. This will respect depth buffer\n            // from first pass but will render everything from this pass as\n            // semitransparent without depth testing\n            gl.depthMask(false);\n            this._handles.forEach((handle) => {\n                if (!handle.stopped) {\n                    handle.setActive(this._pointers, wcs);\n                    handle.draw();\n                }\n            });\n            gl.depthMask(true);\n        };\n\n        const highlightedPass = () => {\n            gl.disable(gl.CULL_FACE);\n            // only highlighted and x-ray visible\n            gl.uniform1i(this._renderingModeUniformPointer, RenderingMode.XRAY);\n            gl.enable(gl.DEPTH_TEST);\n            this._handles.forEach((handle) => {\n                if (!handle.stopped) {\n                    handle.setActive(this._pointers, wcs);\n                    handle.draw();\n                }\n            });\n        };\n\n        // transparent objects are drawn on top of highlighted\n        // content but it never hides it. Transparent layer\n        // doesn't write into depth buffer but only uses highlighted\n        // elements depth buffer so it doesn't hide anything but makes\n        // colour overlay on top of highlighted elements which may make them less \n        // visible\n        if (mode === RenderingMode.XRAY) {\n            highlightedPass();\n            transparentPass();\n        }\n\n        // this will make highlighted elements overriding\n        // all transparent objects to it will be always clearly\n        // visible. But it might not look right.\n        if (mode === RenderingMode.XRAY_ULTRA) {\n            transparentPass();\n            highlightedPass();\n        }\n    }\n\n    private updatePMatrix(width: number, height: number) {\n        this.pMatrix = this.cameraProperties.getProjectionMatrix(width, height);\n    }\n\n    private getCameraDistanceFromRegion(): { near: number, far: number, size: number } {\n        let region = this.getMergedRegion();\n\n        if (!region.bbox || region.bbox.length === 0) {\n            return { near: 0, far: 0, size: 0 };\n        }\n\n        let camera = this.getCameraPosition();\n        let viewDir = vec3.normalize(vec3.create(), this.getCameraDirection());\n        let size = BBox.getDiagonalSize(region.bbox);\n\n        let regionVec = vec3.subtract(vec3.create(), region.centre, camera);\n        let regionDir = vec3.normalize(vec3.create(), regionVec);\n        let regionDist = vec3.length(regionVec);\n\n        let nearVec = vec3.scale(vec3.create(), regionDir, regionDist - size);\n        let farVec = vec3.scale(vec3.create(), regionDir, regionDist + size);\n\n        let near = vec3.dot(viewDir, nearVec);\n        let far = vec3.dot(viewDir, farVec);\n\n        return { near, far, size };\n    }\n\n\n    /**\n    * Use this method to get actual camera position.\n    * @function Viewer#getCameraPosition\n    */\n    public getCameraPosition(): vec3 {\n        const inv = mat4.invert(mat4.create(), this.mvMatrix);\n        if (inv == null) {\n            return vec3.create();\n        }\n        const eye = vec3.transformMat4(vec3.create(), vec3.create(), inv);\n\n        return eye;\n    }\n\n    /**\n     * Use this method to get camera position in the WCS coordinates. Useful for persistance\n     * accross executions.\n     */\n    public getCameraPositionWcs(): vec3 {\n        const position = this.getCameraPosition();\n        const wcs = this.getCurrentWcs();\n        return vec3.add(vec3.create(), position, wcs);\n    }\n\n    /**\n     * Use this method to get camera direction\n    * @function Viewer#getCameraDirection\n     */\n    public getCameraDirection(): vec3 {\n        const inv = mat4.invert(mat4.create(), this.mvMatrix);\n        const rotation = mat4.getRotation(quat.create(), inv);\n\n        return vec3.transformQuat(vec3.create(), vec3.fromValues(0, 0, -1), rotation);\n    }\n\n    /**\n     * Use this method to get camera direction\n    * @function Viewer#getCameraHeading\n     */\n    public getCameraHeading(): vec3 {\n        const inv = mat4.invert(mat4.create(), this.mvMatrix);\n        const rotation = mat4.getRotation(quat.create(), inv);\n\n        return vec3.transformQuat(vec3.create(), vec3.fromValues(0, 1, 0), rotation);\n    }\n\n    /**\n    * Use this method to zoom to specified element. If you don't specify a product ID it will zoom to full extent. If you specify list of products,\n    * this function will zoom to grouped bounding box. You should use this only for elements which are close to each other (like aggregations)\n    * @function Viewer#zoomTo\n    * @param {Number | Array<{id: number, model: number}>} [target] Optional product ID or a list of products in models\n    * @param {Number} [model] Optional model ID\n    * @param {boolean} withAnimation - Optional parameter, default is 'true'. When true, transition to the view is animated. When false, view is changed imediately.\n    * @param {boolean} checkVisibility - Optional parameter, default is 'true'. When true, viewer attempts to fing the best view angle where the target is best visible. This is an expensive operation.\n    * @return {boolean} True if target exists and zoom was successful, False otherwise\n    */\n    public zoomTo(target?: number | { id: number, model: number }[], model?: number, withAnimation: boolean = true, checkVisibility: boolean = true): Promise<void> {\n        const duration = withAnimation ? this.zoomDuration : 0;\n        let bBox: number[] | Float32Array = null;\n        if (target == null || typeof (target) === 'number') {\n            // full extent or single product\n            bBox = this.getTargetBoundingBox(target as number, model);\n            if (checkVisibility === true && typeof (target) === 'number') {\n                const view = PreflightCheck.findView(this, [{ id: target, model: model || 1 }], 10);\n                if (view != null)\n                    return this.animations.viewTo(view, duration);\n            }\n        } else {\n            if (checkVisibility === true && target.length > 0) {\n                const view = PreflightCheck.findView(this, target as { id: number, model: number }[], 10);\n                if (view != null)\n                    return this.animations.viewTo(view, duration);\n            }\n            if (target.length > 0)\n                bBox = this.getTargetsBoundingBox(target as { id: number, model: number }[]);\n            else\n                bBox = this.getTargetBoundingBox();\n        }\n\n        if (bBox == null) {\n            // Ignore zooming to invalid items. This is often when element is in another model.\n            return new Promise<void>((a, r) => a());\n        }\n\n        const origin = vec3.fromValues(bBox[0] + bBox[3] / 2.0, bBox[1] + bBox[4] / 2.0, bBox[2] + bBox[5] / 2.0);\n        const eye = this.getCameraPosition();\n        let dir = vec3.subtract(vec3.create(), eye, origin);\n        dir = vec3.normalize(vec3.create(), dir);\n\n        const angle = vec3.angle(dir, [0, 0, 1]);\n        let heading = vec3.fromValues(0, 0, 1);\n        if (Math.abs(angle) < 1e-6 || Math.abs(angle - Math.PI) < 1e-6) {\n            heading = this.getCameraHeading();\n        }\n\n        const distAndWidth = this.getDistanceAndHeight(bBox, dir, heading);\n\n        var translation = vec3.create();\n        vec3.scale(translation, dir, distAndWidth.distance);\n        vec3.add(eye, translation, origin);\n\n        var mv = mat4.lookAt(mat4.create(), eye, origin, heading);\n        return this.animations.viewTo({ mv: mv, height: distAndWidth.height }, duration);\n    }\n\n    /**\n    * Use this function to show default views.\n    *\n    * @function Viewer#show\n    * @param {ViewType} type - Type of view. Allowed values are <strong>'top', 'bottom', 'front', 'back', 'left', 'right'</strong>. \n    * Directions of this views are defined by the coordinate system. The camera target and distance is determined by 'id' param, if present, or the full model extent when omitted\n    * @param {number} id - Optional parameter indicating the product ID to target the camera at\n    * @param {number} model - Optional parameter indicating the model ID the product is in\n    * @param {boolean} withAnimation - Optional parameter, default is 'true'. When true, transition to the view is animated. When false, view is changed imediately.\n    */\n    public show(type: ViewType, id?: number, model?: number, withAnimation: boolean = true): Promise<void> {\n        var bBox = this.getTargetBoundingBox(id, model);\n        if (bBox == null) {\n            return new Promise<void>((a, r) => r());\n        }\n\n        let duration = withAnimation ? this.zoomDuration : 0;\n        const origin = vec3.fromValues(bBox[0] + bBox[3] / 2.0, bBox[1] + bBox[4] / 2.0, bBox[2] + bBox[5] / 2.0);\n\n        let viewDirection: vec3 = null;\n        let heading: vec3 = vec3.fromValues(0, 0, 1);\n        switch (type) {\n            //top and bottom are different because these are singular points for look-at function if heading is [0,0,1]\n            case ViewType.TOP:\n                viewDirection = vec3.fromValues(0, 0, -1);\n                heading = vec3.fromValues(0, 1, 0);\n                break;\n            case ViewType.BOTTOM:\n                viewDirection = vec3.fromValues(0, 0, 1);\n                heading = vec3.fromValues(0, -1, 0);\n                break;\n            case ViewType.FRONT:\n                viewDirection = vec3.fromValues(0, 1, 0);\n                break;\n            case ViewType.BACK:\n                viewDirection = vec3.fromValues(0, -1, 0);\n                break;\n            case ViewType.LEFT:\n                viewDirection = vec3.fromValues(1, 0, 0);\n                break;\n            case ViewType.RIGHT:\n                viewDirection = vec3.fromValues(-1, 0, 0);\n                break;\n            case ViewType.DEFAULT:\n                viewDirection = vec3.normalize(vec3.create(), [1, 1, -1]);\n                break;\n            default:\n                break;\n        }\n\n        const distAndWidth = this.getDistanceAndHeight(bBox, viewDirection, heading);\n        const moveDir = vec3.negate(vec3.create(), viewDirection);\n        const move = vec3.scale(vec3.create(), moveDir, distAndWidth.distance);\n        const camera = vec3.add(vec3.create(), origin, move);\n\n        // use look-at function to set up camera and target\n        const mv = mat4.lookAt(mat4.create(), camera, origin, heading);\n        return this.animations.viewTo({ mv: mv, height: distAndWidth.height }, duration);\n    }\n\n    /**\n     * Starts rotation around to present the model\n     */\n    public startRotation() {\n        this.animations.startRotation();\n    }\n    /**\n     * Stops rotation of the model\n     */\n    public stopRotation(): void {\n        this.animations.stopRotation();\n    }\n\n\n    /**\n     * \n     * @param msg Fires error event. This might be used by plugins.\n     */\n    public error(msg) {\n        /**\n        * Occurs when viewer encounters error. You should listen to this because it might also report asynchronous errors which you would miss otherwise.\n        *\n        * @event Viewer#error\n        * @type {object}\n        * @param {string} message - Error message\n        */\n        this.fire('error', { message: msg });\n\n        if (typeof (console) !== 'undefined' && console.error != null) {\n            console.error(msg);\n        }\n    }\n\n    public getInteractionOrigin(event: MouseEvent | Touch): vec3 {\n        //this is for picking\n        const data = this.getEventDataFromEvent(event);\n        if (data == null || data.id == null || data.model == null) {\n            return null;\n        }\n\n        if (data.xyz != null) {\n            return data.xyz;\n        }\n\n        const bb = this.getTargetBoundingBox(data.id, data.model);\n        return vec3.fromValues(bb[0] + bb[3] / 2.0, bb[1] + bb[4] / 2.0, bb[2] + bb[5] / 2.0);\n    }\n\n    public getEventDataFromEvent(event: MouseEvent | Touch, raw: boolean = false): { id: number, model: number, xyz: vec3 } {\n        let x = event.clientX;\n        let y = event.clientY;\n\n        //get coordinates within canvas (with the right orientation)\n        let r = this.canvas.getBoundingClientRect();\n        let viewX = x - r.left;\n        let viewY = this.height - (y - r.top);\n\n        //get product id and model id\n        if (!raw) {\n            return this.getEventData(viewX, viewY);\n        }\n\n        const result = this.getEventDataRaw(viewX, viewY);\n        if (result == null) {\n            return { id: null, model: null, xyz: null };\n        }\n\n        // return raw data (might be for plugin purposes for example)\n        return { id: result.renderId, model: result.modelId, xyz: result.location };\n    }\n\n    private static noData = { id: null, model: null, xyz: null };\n    public getEventData(x: number, y: number): { id: number, model: number, xyz: vec3 } {\n        const eventData = this.getEventDataRaw(x, y);\n        if (eventData == null) {\n            return Viewer.noData;\n        }\n        const renderId = eventData.renderId;\n        const modelId = eventData.modelId;\n        const handle = this.getHandle(modelId);\n\n        if (handle != null) {\n            const productId = handle.getProductId(renderId);\n            return { id: productId, model: modelId, xyz: eventData.location };\n        }\n\n        // most possibly plugin object\n        return Viewer.noData;\n    }\n\n    private _eventFB: Framebuffer;\n\n    /**\n     * This renders the colour coded model into the memory buffer\n     * not to the canvas and use it to identify ID, model id and 3D location at canvas location [x,y]\n     * \n     * @param {number} x - X coordinate on the canvas\n     * @param {number} y - Y coordinate on the canvas\n     */\n    public getEventDataRaw(x: number, y: number): { renderId: number, modelId: number, location: vec3 } {\n\n        if (this.width === 0 || this.height === 0 || this.activeHandles.length === 0)\n            return null;\n\n        // it is not necessary to render the image in full resolution so this factor is used for less resolution. \n        const factor = 4;\n        const gl = this.setActive();\n        const width = Math.floor(this.width / factor);\n        const height = Math.floor(this.height / factor);\n        const wcs = this.getCurrentWcs();\n        const near = this.cameraProperties.near;\n        const far = this.cameraProperties.far;\n        const running = this._isRunning;\n\n        // normalise by factor\n        x = Math.floor(x / factor);\n        y = Math.floor(y / factor);\n\n        // stop rendering loop temporarily\n        this._isRunning = false;\n\n        // reuse framebuffer if possible (same size)\n        if (this._eventFB == null)\n            this._eventFB = new Framebuffer(gl, width, height, this.hasDepthSupport, this.glVersion);\n        if (Math.abs(width - this._eventFB.width) > 1 || Math.abs(height - this._eventFB.height) > 1) {\n            this._eventFB.delete();\n            this._eventFB = new Framebuffer(gl, width, height, this.hasDepthSupport, this.glVersion);\n        }\n        const fb = this._eventFB;\n        fb.bind();\n\n        try {\n            // set viewport and generall settings\n            this.setActive();\n            gl.viewport(0, 0, width, height);\n            gl.enable(gl.DEPTH_TEST); //we don't use any kind of blending or transparency\n            gl.disable(gl.BLEND);\n\n            gl.enable(gl.SCISSOR_TEST);\n            gl.scissor(x, y, 1, 1);\n\n            // ------ draw colour coded product ids ----------\n            // clear all\n            gl.clearColor(0, 0, 0, 0); //zero colour for no-values\n            // tslint:disable-next-line: no-bitwise\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            //call all before-drawId plugins\n            this._plugins.forEach((plugin) => {\n                if (!plugin.onBeforeDrawId) {\n                    return;\n                }\n                plugin.onBeforeDrawId();\n            });\n\n            //set uniform for colour coding\n            this.setActive();\n            gl.uniform1i(this._colorCodingUniformPointer, ColourCoding.PRODUCTS);\n\n            gl.uniform1i(this._renderingModeUniformPointer, this.renderingMode);\n\n\n            //render colour coded image using latest buffered data\n            this._handles.forEach((handle) => {\n                if (!handle.stopped && handle.pickable) {\n                    handle.setActive(this._pointers, wcs);\n                    handle.draw();\n                }\n            });\n\n            //call all after-drawId plugins\n            this._plugins.forEach((plugin) => {\n                if (!plugin.onAfterDrawId) {\n                    return;\n                }\n                plugin.onAfterDrawId();\n            });\n\n            //get colour in of the pixel [r,g,b,a]\n            const productId = fb.getId(x, y);\n            if (productId == null) {\n                return null;\n            }\n\n            // adjust near and far clipping planes\n            const locationRange = fb.getXYZRange(x, y);\n            if (locationRange != null) {\n\n                const invPmat = mat4.invert(mat4.create(), this.pMatrix);\n                const nearPoint = vec3.transformMat4(vec3.create(), locationRange.near, invPmat);\n                const farPoint = vec3.transformMat4(vec3.create(), locationRange.far, invPmat);\n                const tempNear = nearPoint[2] * -1.0;\n                const tempFar = farPoint[2] * -1.0;\n                this.cameraProperties.near = tempNear;\n                this.cameraProperties.far = tempFar;\n            }\n\n\n            //  --------------- render model ids ---------------------\n            this.setActive();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, fb.framebuffer);\n            this.updatePMatrix(width, height);\n            gl.uniformMatrix4fv(this._pMatrixUniformPointer, false, this.pMatrix);\n\n            // clear\n            gl.clearColor(0, 0, 0, 0); //zero colour for no-values\n            // tslint:disable-next-line: no-bitwise\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n\n            //render colour coded image using latest buffered data\n            this._handles.forEach((handle) => {\n                if (!handle.stopped && handle.pickable) {\n                    gl.uniform1i(this._colorCodingUniformPointer, handle.id);\n                    handle.setActive(this._pointers, wcs);\n                    handle.draw();\n                }\n            });\n\n            //call all after-drawId plugins\n            this._plugins.forEach((plugin) => {\n                if (!plugin.onAfterDrawModelId) {\n                    return;\n                }\n                plugin.onAfterDrawModelId();\n            });\n\n            const modelId = fb.getId(x, y);\n\n            // get xyz in optimised clip space\n            const xyz = fb.getXYZ(x, y);\n            let eventLocation: vec3 = null;\n            if (xyz != null) { // not an infinity\n                const transform = mat4.multiply(mat4.create(), this.pMatrix, this.mvMatrix);\n                const inv = mat4.invert(mat4.create(), transform);\n                // actual location in real coordinates\n                eventLocation = vec3.transformMat4(vec3.create(), xyz, inv);\n            }\n\n            // return complete result\n            return {\n                location: eventLocation,\n                modelId: modelId,\n                renderId: productId\n            };\n        } catch (e) {\n            this.error(e);\n        } finally {\n            this.setActive();\n\n            //reset framebuffer to render into canvas again\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n            //set back blending\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n            gl.enable(gl.BLEND);\n            gl.disable(gl.SCISSOR_TEST);\n\n            // reset near and far clipping planes in case we optimised them for depth reading\n            this.cameraProperties.near = near;\n            this.cameraProperties.far = far;\n            this.updatePMatrix(width, height);\n            gl.uniformMatrix4fv(this._pMatrixUniformPointer, false, this.pMatrix);\n            this._isRunning = running;\n        }\n    }\n\n    /**\n     * This renders the colour coded model into the memory buffer\n     * not to the canvas and use it to identify ID, model id and 3D location at canvas location [x,y]\n     * \n     * @param {number} x - X coordinate on the canvas\n     * @param {number} y - Y coordinate on the canvas\n     */\n    public getData(points: { x: number, y: number }[]): { id: number, model: number }[] {\n\n        if (this.width === 0 || this.height === 0 || this.activeHandles.length === 0)\n            return null;\n\n        // it is not necessary to render the image in full resolution so this factor is used for less resolution. \n        const factor = 4;\n        const gl = this.setActive();\n        const width = Math.floor(this.width / factor);\n        const height = Math.floor(this.height / factor);\n        const wcs = this.getCurrentWcs();\n        const running = this._isRunning;\n\n        // normalise by factor\n        points = points.map(p => ({ x: Math.floor(p.x / factor), y: Math.floor(p.y / factor) }));\n\n        // stop rendering loop temporarily\n        this._isRunning = false;\n\n        const fb = new Framebuffer(gl, width, height, false, this.glVersion);\n        fb.bind();\n\n        try {\n            // set viewport and generall settings\n            this.setActive();\n            gl.viewport(0, 0, width, height);\n            gl.enable(gl.DEPTH_TEST); //we don't use any kind of blending or transparency\n            gl.disable(gl.BLEND);\n\n            // ------ draw colour coded product ids ----------\n            // clear all\n            gl.clearColor(0, 0, 0, 0); //zero colour for no-values\n            // tslint:disable-next-line: no-bitwise\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            //set uniform for colour coding\n            this.setActive();\n            gl.uniform1i(this._colorCodingUniformPointer, ColourCoding.PRODUCTS);\n\n            // set current camera and transformation\n            this.updatePMatrix(width, height);\n            gl.uniformMatrix4fv(this._pMatrixUniformPointer, false, this.pMatrix);\n            gl.uniformMatrix4fv(this._mvMatrixUniformPointer, false, this.mvMatrix);\n\n            //render colour coded image using latest buffered data\n            this._handles.forEach((handle) => {\n                if (!handle.stopped) {\n                    handle.setActive(this._pointers, wcs);\n                    handle.draw();\n                }\n            });\n\n            //get colour in of the pixel [r,g,b,a]\n            const renderIds = fb.getIds(points);\n\n            //  --------------- render model ids ---------------------\n            this.setActive();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, fb.framebuffer);\n\n            // clear\n            gl.clearColor(0, 0, 0, 0); //zero colour for no-values\n            // tslint:disable-next-line: no-bitwise\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n            //render colour coded image using latest buffered data\n            this._handles.forEach((handle) => {\n                if (!handle.stopped) {\n                    gl.uniform1i(this._colorCodingUniformPointer, handle.id);\n                    handle.setActive(this._pointers, wcs);\n                    handle.draw();\n                }\n            });\n\n            const modelIds = fb.getIds(points);\n\n            // return complete result\n            return renderIds.map((renderId, idx) => {\n                if (renderId == null)\n                    return null;\n                const model = modelIds[idx];\n                if (model == null)\n                    return null;\n\n                const handle = this.getHandle(model);\n                if (handle == null)\n                    return null;\n\n                const productId = handle.getProductId(renderId);\n                return { id: productId, model };\n            });\n        } catch (e) {\n            this.error(e);\n        } finally {\n            this.setActive();\n\n            //reset framebuffer to render into canvas again\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n            //set back blending\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n            gl.enable(gl.BLEND);\n\n            this._isRunning = running;\n        }\n    }\n\n    /**\n     * Stops all models and only shows a single product\n     * @param {Number[]} productId Product IDs\n     * @param {Number} modelId Model ID\n     */\n    public isolate(productIds: number[], modelId: number) {\n        if (modelId == null) {\n            this._handles.forEach(h => {\n                h.isolatedProducts = productIds;\n            })\n        } else {\n            const handle = this.getHandle(modelId);\n            if (!handle) {\n                throw new Error(`Model with id ${modelId} doesn't exist.`);\n            }\n            handle.isolatedProducts = productIds;\n        }\n    }\n\n    /**\n     * Gets list of isolated product IDs\n     * @param modelId\n     */\n    public getIsolated(modelId: number): number[] {\n        const handle = this.getHandle(modelId);\n        if (!handle) {\n            throw new Error(`Model with id ${modelId} doesn't exist.`);\n        }\n        return handle.isolatedProducts;\n    }\n\n    /**\n     * Starts the loop watching animation frames and keeping record of the\n     * Frames per Second (FPS) rate. This should only be called once in the constructor.\n     */\n    private setupFpsReporting() {\n        const tick = () => {\n            const fps = this._fpsWatch.fps;\n            // only report change if there is any difference\n            if (Math.abs(this._currentFps - fps) >= 1.0) {\n                this._currentFps = fps;\n                /**\n                * Occurs after every 30th frame in animation. Use this event if you want \n                * to report FPS to the user. It might also be an interesting performance measure.\n                *\n                * @event Viewer#fps \n                * @type {Number}\n                */\n                this.fire('fps', Math.floor(fps));\n            }\n            this._requestAnimationFrame(tick);\n        };\n        tick();\n    }\n\n    /**\n     * This starts watching age of MV matrix and FPS and is setting\n     * rating to decide if complete model should be drawn or only a part.\n     */\n    private _watchPerformance() {\n        const noMove = 2000; // number of milliseconds when we consider MV matrix to be stable\n        let isMoving = false;\n        const tick = () => {\n            // don't do anything if performance is not to be watched\n            if (!this._adaptivePerformanceOn) {\n                this.performance = PerformanceRating.HIGH;\n                this._requestAnimationFrame(tick);\n                return;\n            }\n\n            // number of milliseconds since last MV matrix change\n            const age = this.mvMatrixAge;\n            // framerate updated approx. every 0.5 second\n            const fps = this._fpsWatch.fps;\n\n            // no movement and already fired event\n            if (age > noMove && !isMoving) {\n                this._requestAnimationFrame(tick);\n                return;\n            }\n\n            // no movement so render complete image\n            if (age > noMove) {\n                isMoving = false;\n                this.performance = PerformanceRating.HIGH;\n                this.fire('navigationEnd', true);\n                // navigation ended and there is something to draw, so draw it\n                if (this.activeHandles.length > 0) {\n\n                    // this will minimize z-fighting when zoomed far away from the model with thin layers\n                    var { near, far, size } = this.getCameraDistanceFromRegion();\n                    if (near > 0 && far > 0) {\n                        this.cameraProperties.near = near;\n                        this.cameraProperties.far = far;\n                    } \n                    this.draw();\n                }\n                this._requestAnimationFrame(tick);\n                return;\n            }\n\n            // we are on the move. Set the performance indicator based on the current FPS\n            if (isMoving === false)\n            {\n                isMoving = true;\n                var { near, far, size } = this.getCameraDistanceFromRegion();\n                this.cameraProperties.near = this.meter * 0.2;\n                this.cameraProperties.far = size * 5;\n                this.fire('navigationStart', true);\n            }\n            if (fps < 10 && this.performance > PerformanceRating.VERY_LOW) {\n                this.performance = PerformanceRating.VERY_LOW;\n            } else if (fps < 20 && this.performance > PerformanceRating.LOW) {\n                this.performance = PerformanceRating.LOW;\n            } else if (fps < 30 && this.performance > PerformanceRating.MEDIUM) {\n                this.performance = PerformanceRating.MEDIUM;\n            } else if (fps >= 30 && this.performance <= PerformanceRating.MEDIUM) {\n                this.performance = PerformanceRating.HIGH;\n            }\n\n            // monitor per-frame when navigation is in progress\n            this._requestAnimationFrame(tick);\n        };\n\n        // start\n        tick();\n    }\n\n    /**\n     * Use this function to start animation of the model. If you start animation before geometry is loaded it will wait for content to render it.\n     * This function is bound to browser framerate of the screen so it will stop consuming any resources if you switch to another tab.\n     *\n     * @function Viewer#start\n     * @param {Number} modelId [optional] - Optional ID of the model to be stopped. You can get this ID from {@link ViewerEventMap#loaded loaded} event.\n     * @param {Number} productId [optional] - Optional ID of the product. If specified, only this product will be presented.\n     *                                        This is highly optimal because it doesn't even touch other data in the model\n     */\n    public start(modelId?: number) {\n        if (modelId != null) {\n            var handle = this.getHandle(modelId);\n            if (typeof (handle) === 'undefined') {\n                throw new Error(\"Model doesn't exist.\");\n            }\n\n            handle.stopped = false;\n            //set perspective camera near and far based on 1 meter dimension and size of the model\n            if (!handle.empty) {\n                this.setNearAndFarFromCurrentModels();\n            }\n\n            // if the viewer is running already we can return from here\n            if (this._isRunning) {\n                return;\n            }\n        }\n\n        this.changed = true;\n        //set perspective camera near and far based on 1 meter dimension and size of the model\n        this.setNearAndFarFromCurrentModels();\n\n        if (this._isRunning) {\n            return;\n        }\n\n        // unblock and start the rendering loop\n        this._isRunning = true;\n\n        const tick = () => {\n            if (!this._isRunning) {\n                return;\n            }\n\n            if (this._handles.length !== 0 && (this.changed || this.activeHandles.filter((h) => h.changed).length !== 0)) {\n\n                this.draw();\n                this.changed = false;\n            }\n            this._requestAnimationFrame(tick);\n        };\n        tick();\n    }\n\n    /**\n    * Use this function to stop animation of the model. User will still be able to see the latest state of the model. You can \n    * switch animation of the model on again by calling {@link Viewer#start start()}.\n    *\n    * @function Viewer#stop\n    * @param {Number} id [optional] - Optional ID of the model to be stopped. You can get this ID from {@link ViewerEventMap#loaded loaded} event.\n    */\n    public stop(id?: number) {\n        if (id == null) {\n            this._isRunning = false;\n            return;\n        }\n\n        var model = this.getHandle(id);\n        if (model == null) {\n            throw new Error(\"Model doesn't exist.\");\n        }\n\n        model.stopped = true;\n        this.changed = true;\n        //set perspective camera near and far based on 1 meter dimension and size of the model\n        this.setNearAndFarFromCurrentModels();\n    }\n\n    /**\n    * Use this function to stop all models. You can \n    * switch animation of the model on again by calling {@link Viewer#start start()}.\n    *\n    * @function Viewer#stopAll\n    */\n    public stopAll() {\n\n        this._handles.forEach((model) => {\n            model.stopped = true;\n            this.changed = true;\n        });\n\n        // we can stop the loop when there isn't anything to draw\n        this._isRunning = false;\n    }\n\n    /**\n     * Checks if the model with defined ID is currently loaded and running\n     *\n     * @param {number} id - Model ID\n     * @returns {boolean} True if model is loaded and running, false otherwise\n     */\n    public isModelOn(id: number): boolean {\n        var model = this.getHandle(id);\n        if (!model) {\n            return false;\n        }\n        return !model.stopped;\n    }\n\n    /**\n     * Checks if product with this ID exists in the model\n     * @param productId\n     * @param modelId\n     */\n    public isProductInModel(productId: number, modelId: number): boolean {\n        var model = this.getHandle(modelId);\n        if (!model) {\n            return false;\n        }\n        return model.getState(productId) != null;\n    }\n\n    /**\n     * Checks if the model with defined ID is currently loaded in the viewer.\n     *\n     * @param {number} id - Model ID\n     * @returns {boolean} True if model is loaded, false otherwise\n     */\n    public isModelLoaded(id: number): boolean {\n        var model = this.getHandle(id);\n        if (!model) {\n            return false;\n        }\n        return true;\n    }\n\n\n    /**\n    * Use this function to start all models. You can \n    * switch animation of the model off by calling {@link Viewer#stop stop()}.\n    *\n    * @function Viewer#startAll\n    */\n    public startAll() {\n\n        this._handles.forEach((model) => {\n            model.stopped = false;\n            this.changed = true;\n        });\n        // make sure the viewer is running\n        this._isRunning = true;\n    }\n\n    /**\n    * Use this function to stop picking of the objects in the specified model. It will behave as if not present for all picking operations.\n    * All models are pickable by default when loaded.\n    *\n    * @function Viewer#stopPicking\n    * @param {Number} id - ID of the model to be stopped. You can get this ID from {@link ViewerEventMap#loaded loaded} event.\n    */\n    public stopPicking(id: number) {\n        var model = this.getHandle(id);\n        if (model == null) {\n            throw new Error(\"Model doesn't exist.\");\n        }\n\n        model.pickable = false;\n    }\n\n    /**\n    * Use this function to enable picking of the objects in the specified model. \n    * All models are pickable by default when loaded. You can stop the model from being pickable using {@link Viewer#stopPicking} function.\n    *\n    * @function Viewer#startPicking\n    * @param {Number} id - ID of the model to be stopped. You can get this ID from {@link ViewerEventMap#loaded loaded} event.\n    */\n    public startPicking(id: number) {\n        var model = this.getHandle(id);\n        if (typeof (model) === 'undefined') {\n            throw new Error('Model doesn\\'t exist.');\n        }\n\n        model.pickable = true;\n    }\n\n    /**\n     * Returns true if model participates in picking, false otherwise\n     * @param {number} modelId ID of the model\n     */\n    public isPickable(modelId: number) {\n        var model = this.getHandle(modelId);\n        return model.pickable;\n    }\n\n    /**\n     * Use this method to register to events of the viewer like {@link ViewerEventMap#pick:pick}, {@link ViewerInteractionEventMap#mousedown}, \n     * {@link ViewerInteractionEventMap:loaded} and others. You can define arbitrary number\n     * of event handlers for any event. You can remove handler by calling {@link Viewer#off off()} method.\n     *\n     * @function Viewer#on\n     * @param {String} eventName - Name of the event you would like to listen to.\n     * @param {Object} handler - Callback handler of the event which will consume arguments and perform any custom action.\n    */\n    public on<K extends keyof ViewerEventMap>(eventName: K, handler: (args: ViewerEventMap[K]) => void) {\n        var events = this._events;\n        if (!events[eventName]) {\n            events[eventName] = [];\n        }\n        events[eventName].push(handler);\n\n        // check if this should be a proxy for the canvas event (or document event for pointerlocks)\n        const domEvtName = `on${eventName}`;\n        if ((typeof (this.canvas[domEvtName]) === 'undefined') && (typeof (document[domEvtName]) === 'undefined')) {\n            return;\n        }\n\n        // we should only have one listener for any type of event to proxy the events\n        const hasListener = this._canvasListeners[eventName] != null;\n        if (hasListener) {\n            return;\n        }\n        // bind to canvas events as a proxy dispatcher\n        const listener = (event: Event) => {\n            if (event.type === 'pointerlockchange') {\n                this.fire('pointerlockchange', { target: document.pointerLockElement });\n                return;\n            }\n\n            const eName = eventName as keyof ViewerInteractionEventMap;\n            // only forward mouse and touch events where we can enrich the event\n            // with product and model ID from the model\n            if (event instanceof MouseEvent) {\n                let data = this.getEventDataFromEvent(event as MouseEvent);\n                if (data != null) {\n                    this.fire(eName, { event: event, id: data.id, model: data.model, xyz: data.xyz });\n                }\n                return;\n            }\n            if (event instanceof TouchEvent) {\n                // get ID from the last touch\n                let data = this.getEventDataFromEvent(event.touches[event.touches.length - 1]);\n                if (data != null) {\n                    this.fire(eName, { event: event, id: data.id, model: data.model, xyz: data.xyz });\n                }\n                return;\n            }\n        };\n        // add a proxy listener\n        if (eventName === 'pointerlockchange' || eventName === 'pointerlockerror') {\n            document.addEventListener(eventName, listener, false);\n        } else {\n            this.canvas.addEventListener(eventName, listener);\n        }\n        // keep the reference to the listener so we can remove it when not needed any more\n        this._canvasListeners[eventName] = listener;\n    }\n\n    /**\n    * Use this method to unregister handlers from events. You can add event handlers by calling the {@link Viewer#on on()} method.\n    *\n    * @function Viewer#off\n    * @param {String} eventName - Name of the event\n    * @param {Object} callback - Handler to be removed\n    */\n    public off(eventName: string, callback) {\n        var events = this._events;\n        var callbacks = events[eventName];\n        if (!callbacks) {\n            return;\n        }\n        var index = callbacks.indexOf(callback);\n        if (index >= 0) {\n            callbacks.splice(index, 1);\n            const listener = this._canvasListeners[eventName];\n            // detach canvas listener if it is not needed anymore\n            if (callbacks.length === 0 && listener !== null) {\n                if (eventName === 'pointerlockchange' || eventName === 'pointerlockerror') {\n                    document.removeEventListener(eventName, listener);\n                } else {\n                    this.canvas.removeEventListener(eventName, listener);\n                }\n                this._canvasListeners[eventName] = null;\n\n            }\n        }\n    }\n\n    //executes all handlers bound to event name\n    public fire<K extends keyof ViewerEventMap>(eventName: K, args: ViewerEventMap[K]) {\n        var handlers = this._events[eventName];\n        if (!handlers) {\n            return;\n        }\n        //call the callbacks\n        handlers.slice().forEach((handler) => {\n            try {\n                handler(args);\n            } catch (e) {\n                console.error(e);\n            }\n        });\n    }\n\n    public disableTextSelection() {\n        //disable text selection\n        document.documentElement.style['-webkit-touch-callout'] = 'none';\n        document.documentElement.style['-webkit-user-select'] = 'none';\n        document.documentElement.style['-khtml-user-select'] = 'none';\n        document.documentElement.style['-moz-user-select'] = 'none';\n        document.documentElement.style['-ms-user-select'] = 'none';\n        document.documentElement.style['user-select'] = 'none';\n    }\n\n    public enableTextSelection() {\n        //enable text selection again\n        document.documentElement.style['-webkit-touch-callout'] = 'text';\n        document.documentElement.style['-webkit-user-select'] = 'text';\n        document.documentElement.style['-khtml-user-select'] = 'text';\n        document.documentElement.style['-moz-user-select'] = 'text';\n        document.documentElement.style['-ms-user-select'] = 'text';\n        document.documentElement.style['user-select'] = 'text';\n    }\n\n    /**\n   * Use this method to clip the model with A plane. Use {@link Viewer#unclip unclip()} method to \n   * unset clipping plane.\n   *\n   * @function Viewer#clip\n   * @param {Number[]} point - point in clipping plane\n   * @param {Number[]} normal - normal pointing to the half space which will be hidden\n   * @param {Number} [modelId] - Optional ID of the model to be clipped. All models are clipped otherwise.\n   */\n    public clip(point: number[], normal: number[]) {\n        if (point == null || normal == null) {\n            throw new Error('Cutting plane not well defined');\n        }\n        //compute normal equation of the plane\n        var d = 0.0 - normal[0] * point[0] - normal[1] * point[1] - normal[2] * point[2];\n\n        //set clipping plane A for all models\n        this._handles.forEach((h) => {\n            h.clippingPlaneA = [normal[0], normal[1], normal[2], d];\n            h.clippingPlaneB = null;\n        });\n    }\n\n    /**\n   * Use this method to clip the model with A plane. Use {@link Viewer#unclip unclip()} method to \n   * unset clipping plane.\n   *\n   * @function Viewer#setClippingPlaneA\n   * @param {Number[]} plane - normal equation of the plane\n   * @param {Number} [modelId] - Optional ID of the model to be clipped. All models are clipped otherwise.\n   */\n    public setClippingPlaneA(plane: number[], modelId?: number) {\n\n        if (modelId != null) {\n            var handle = this.getHandle(modelId);\n            if (handle) {\n                handle.clippingPlaneA = plane;\n            }\n        } else {\n            //set clipping plane for all models\n            this._handles.forEach((h) => {\n                h.clippingPlaneA = plane;\n            });\n        }\n    }\n\n    /**\n   * Use this method to clip the model with B plane. Use {@link Viewer#unclip unclip()} method to \n   * unset clipping plane.\n   *\n   * @function Viewer#setClippingPlaneB\n   * @param {Number[]} plane - normal equation of the plane\n   * @param {Number} [modelId] - Optional ID of the model to be clipped. All models are clipped otherwise.\n   */\n    public setClippingPlaneB(plane: number[], modelId?: number) {\n\n        if (modelId != null) {\n            var handle = this.getHandle(modelId);\n            if (handle) {\n                handle.clippingPlaneB = plane;\n            }\n        } else {\n            //set clipping plane for all models\n            this._handles.forEach((h) => {\n                h.clippingPlaneB = plane;\n            });\n        }\n    }\n\n    /**\n    * This method will cancel any clipping plane if it is defined. Use {@link Viewer#clip clip()} \n    * method to define clipping by point and normal of the plane.\n    * @function Viewer#unclip\n    * @param {Number} [modelId] - Optional ID of the model to be unclipped. All models are unclipped otherwise.\n    */\n    public unclip(modelId?: number): void {\n        if (modelId != null) {\n            var handle = this.getHandle(modelId);\n            if (handle) {\n                handle.clippingPlaneA = null;\n                handle.clippingPlaneB = null;\n            }\n        } else {\n            this._handles.forEach((h) => {\n                h.clippingPlaneA = null;\n                h.clippingPlaneB = null;\n            });\n        }\n    }\n\n    /**\n     * Gets clipping plane of the defined model or of the first clipping plane curently visible.\n     * Bare in mind that every model might have different clipping plane\n     * @param modelId Optional ID of the model which clipping plane we want to obtain\n     */\n    public getClip(modelId?: number): { PlaneA: number[], PlaneB: number[] } {\n        let handle: ModelHandle = null;\n        if (modelId == null) {\n            handle = this._handles.filter(h => h.clippable && !h.stopped && (h.clippingPlaneA != null || h.clippingPlaneB != null)).pop();\n        } else {\n            handle = this.getHandle(modelId);\n        }\n\n        if (handle) {\n            return {\n                PlaneA: handle.clippingPlaneA,\n                PlaneB: handle.clippingPlaneB\n            };\n        }\n        return null;\n    }\n\n    /**\n     * Counts number of triangles for every product. This is usefull to understand \n     * performance of certain models. The default sort order is by number of triangles,\n     * but density of triangles (number of triangles per a volume unit) might also be a good measure\n     * to find the most expensive products to draw.\n     * @param orderBy Measure to use for the default ascending sort order. Default value: 'triangles'\n     * @returns List of product analytical results sorted in descendent order by number of triangles or density (number of triangles per volumetric unit of the product bounding box)\n     */\n    public getProductAnalysis(orderBy: 'triangles' | 'density' = 'triangles'): ProductAnalyticalResult[] {\n        const getMeasure = orderBy === 'triangles' ?\n            (r: ProductAnalyticalResult) => { return r.numberOfTriangles } :\n            (r: ProductAnalyticalResult) => { return r.density }\n        const initial: ProductAnalyticalResult[] = [];\n        const result = this.activeHandles.reduce((p, c) => {\n            return c.getProductAnalysis(p);\n        }, initial)\n        return result.sort((a, b) => getMeasure(b) - getMeasure(a));\n    }\n\n    /**\n     * Isolates products which have most geometry (number of triangles).\n     * This function is meant for data debugging, identifying products which are likely to be over-detailed or poorly modeled.\n     * \n     * Use {@link Viewer#isolate isolate()} to cancel this operation\n     * @param measure Measure to use for sorting and selection. Defaul value: 'triangles'\n     * @param ratio Top ratio to isolate. Should be a number between 0.0 - 1.0. Default value is 0.2 which means top 20% of the geometry\n     * @returns The set of product analytical results isolated, sorted in descendent order by number of triangles or density (number of triangles per volumetric unit of the product bounding box)\n     */\n    public isolateHeavyProducts(measure: 'triangles' | 'density' = 'triangles', ratio: number = 0.2): ProductAnalyticalResult[] {\n        const getMeasure = measure === 'triangles' ?\n            (r: ProductAnalyticalResult) => { return r.numberOfTriangles } :\n            (r: ProductAnalyticalResult) => { return r.density }\n\n        const products = this.getProductAnalysis(measure);\n        const complete = products.reduce((p, c) => { return p + getMeasure(c) }, 0);\n        const stop = complete * ratio;\n        let current = 0;\n        const toIsolate: ProductAnalyticalResult[] = [];\n        for (let i = 0; current < stop; i++) {\n            const product = products[i];\n            current += getMeasure(product);\n            toIsolate.push(product);\n        }\n\n        const modelGroups: { [id: number]: number[] } = {};\n        toIsolate.reduce((g, c) => {\n            let group = g[c.modelId];\n            if (group == null) {\n                group = [];\n                g[c.modelId] = group;\n            }\n            group.push(c.productId);\n            return g;\n        }, modelGroups)\n\n        // Some models may not have products above the threshold so we never call isolate on them. \n        // Hide everything in all models by setting an invalid product before we isolate the products that are to be shown\n        this.activeHandles\n            .forEach((h) => {\n                this.isolate([0], h.id);\n            });\n\n        Object.getOwnPropertyNames(modelGroups).forEach(idStr => {\n            const productIds = modelGroups[idStr];\n            const modelId: number = +idStr;\n            this.isolate(productIds, modelId);\n        });\n        return toIsolate;\n    }\n\n    /**\n     * This function can be used to place HTML markup relative to the centroid of a product\n     * @param productId ID of the product\n     * @param modelId ID of the model\n     * @returns HTML coordinates of the centroid of the product bounding box\n     */\n    public getHTMLPositionOfProductCentroid(productId: number, modelId: number): number[] {\n        const map = this.getHandle(modelId).getProductMap(productId, this.getCurrentWcs());\n        const bbox = map.bBox;\n        const position = vec3.fromValues(bbox[0] + bbox[3] / 2, bbox[1] + bbox[4] / 2, bbox[2] + bbox[5] / 2);\n        return this.getHtmlCoordinatesOfVector(position);\n    }\n\n    /**\n     * This function can be used to identify the XY location on the canvas for a given\n     * 3D WCS vector. \n     * For example this can be used to identity the XY location of a pick event in 3D space. \n     * @param position a vec3 - see https://glmatrix.net/docs/module-vec3.html\n     * @returns HTML coordinates of the provided WCS vector\n     */\n    public getHtmlCoordinatesOfVector(position: vec3): number[] {\n        if (!position) return [];\n\n        const transform = mat4.multiply(mat4.create(), this.pMatrix, this.mvMatrix);\n        const glPosition = vec3.transformMat4(vec3.create(), position, transform);\n\n        const glX = glPosition[0];\n        const glY = glPosition[1];\n\n        const htmlX = (glX + 1) / 2.0 * this.width;\n        const htmlY = this.height - (glY + 1) / 2.0 * this.height;\n\n        return [htmlX, htmlY]\n    }\n\n    /**\n     * Sets the provided product as the center of rotation\n     * @param productId ID of the product\n     * @param modelId ID of the model\n     */\n    public setLockedOrbitOrigin(productId: number, modelId: number) {\n        const handle = this.getHandle(modelId);\n        if (handle == null) throw new Error('Invalid model ID');\n\n        const map = handle.getProductMap(productId, this.getCurrentWcs());\n        const bb = map.bBox;\n\n        this.lockedOrbitOrigin = vec3.fromValues(bb[0] + bb[3] / 2.0, bb[1] + bb[4] / 2.0, bb[2] + bb[5] / 2.0)\n    }\n\n}\n\nenum ColourCoding {\n    NONE = -1,\n    PRODUCTS = -2\n}\n\nexport enum RenderingMode {\n    NORMAL = 0,\n    GRAYSCALE = 1,\n    XRAY = 2,\n    // _XRAY2 = 3, // used internally in the shader\n    XRAY_ULTRA = 4,\n}\n\n/**\n * * @category Core\n */\nexport enum ViewType {\n    TOP,\n    BOTTOM,\n    FRONT,\n    BACK,\n    LEFT,\n    RIGHT,\n    DEFAULT\n}\n\n\n","export const worker = \"(()=>{\\\"use strict\\\";var e={6:(e,r)=>{Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.LoadingPhase=r.MessageType=r.MessageProgress=r.Message=void 0;var t,I;r.Message=function(){},r.MessageProgress=function(e){var r=100/3;return r*e.phase+r*e.percent/100},(I=r.MessageType||(r.MessageType={}))[I.PROGRESS=0]=\\\"PROGRESS\\\",I[I.COMPLETED=1]=\\\"COMPLETED\\\",I[I.FAILED=2]=\\\"FAILED\\\",(t=r.LoadingPhase||(r.LoadingPhase={}))[t.DOWNLOADING=0]=\\\"DOWNLOADING\\\",t[t.READING=1]=\\\"READING\\\",t[t.LOADING=2]=\\\"LOADING\\\"},425:(e,r,t)=>{Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.ProductMap=void 0;var I=t(524),a=function(){function e(){this.states=[]}return e.clone=function(r){var t=new e;return t.productID=r.productID,t.renderId=r.renderId,t.type=r.type,t.bBox=new Float32Array(r.bBox),t.spans=r.spans,t.states=r.states.slice(0),t},e.addState=function(e,r){null==e.states.find((function(e){return e===r}))&&e.states.push(r)},e.removeState=function(e,r){var t=e.states.indexOf(r);t<0||e.states.splice(t,1)},e.getState=function(e){return null==e.states||0===e.states.length?I.State.UNDEFINED:I.StatePriorities.getHighestPriority(e.states)},e}();r.ProductMap=a},524:(e,r)=>{var t;Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.StatePriorities=r.State=void 0,function(e){e[e.UNDEFINED=255]=\\\"UNDEFINED\\\",e[e.HIDDEN=254]=\\\"HIDDEN\\\",e[e.HIGHLIGHTED=253]=\\\"HIGHLIGHTED\\\",e[e.XRAYVISIBLE=252]=\\\"XRAYVISIBLE\\\",e[e.PICKING_ONLY=251]=\\\"PICKING_ONLY\\\",e[e.HOVEROVER=250]=\\\"HOVEROVER\\\",e[e.UNSTYLED=225]=\\\"UNSTYLED\\\"}(t=r.State||(r.State={}));var I=function(){function e(){}return e.getPriority=function(e){switch(e){case t.HIGHLIGHTED:return 1;case t.PICKING_ONLY:return 2;case t.HIDDEN:return 3;case t.XRAYVISIBLE:return 4;default:return 100}},e.getHighestPriority=function(e){var r=this;if(null==e||0===e.length)return null;if(1===e.length)return e[0];var I=e.map((function(e){return{state:e,priority:r.getPriority(e)}}));I.sort((function(e,r){return e.priority-r.priority}));var a=I[0];return a.priority>50?t.UNDEFINED:a.state},e}();r.StatePriorities=I},393:(e,r)=>{var t;Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.ProductType=void 0,(t=r.ProductType||(r.ProductType={}))[t.IFCPRODUCT=20]=\\\"IFCPRODUCT\\\",t[t.IFCELEMENT=19]=\\\"IFCELEMENT\\\",t[t.IFCBUILDINGELEMENT=26]=\\\"IFCBUILDINGELEMENT\\\",t[t.IFCFOOTING=120]=\\\"IFCFOOTING\\\",t[t.IFCPILE=572]=\\\"IFCPILE\\\",t[t.IFCBEAM=171]=\\\"IFCBEAM\\\",t[t.IFCBEAMSTANDARDCASE=1104]=\\\"IFCBEAMSTANDARDCASE\\\",t[t.IFCBUILDINGELEMENTPROXY=560]=\\\"IFCBUILDINGELEMENTPROXY\\\",t[t.IFCCHIMNEY=1120]=\\\"IFCCHIMNEY\\\",t[t.IFCCOLUMN=383]=\\\"IFCCOLUMN\\\",t[t.IFCCOLUMNSTANDARDCASE=1126]=\\\"IFCCOLUMNSTANDARDCASE\\\",t[t.IFCCOVERING=382]=\\\"IFCCOVERING\\\",t[t.IFCCURTAINWALL=456]=\\\"IFCCURTAINWALL\\\",t[t.IFCDOOR=213]=\\\"IFCDOOR\\\",t[t.IFCDOORSTANDARDCASE=1151]=\\\"IFCDOORSTANDARDCASE\\\",t[t.IFCMEMBER=310]=\\\"IFCMEMBER\\\",t[t.IFCMEMBERSTANDARDCASE=1214]=\\\"IFCMEMBERSTANDARDCASE\\\",t[t.IFCPLATE=351]=\\\"IFCPLATE\\\",t[t.IFCPLATESTANDARDCASE=1224]=\\\"IFCPLATESTANDARDCASE\\\",t[t.IFCRAILING=350]=\\\"IFCRAILING\\\",t[t.IFCRAMP=414]=\\\"IFCRAMP\\\",t[t.IFCRAMPFLIGHT=348]=\\\"IFCRAMPFLIGHT\\\",t[t.IFCROOF=347]=\\\"IFCROOF\\\",t[t.IFCSHADINGDEVICE=1265]=\\\"IFCSHADINGDEVICE\\\",t[t.IFCSLAB=99]=\\\"IFCSLAB\\\",t[t.IFCSLABELEMENTEDCASE=1268]=\\\"IFCSLABELEMENTEDCASE\\\",t[t.IFCSLABSTANDARDCASE=1269]=\\\"IFCSLABSTANDARDCASE\\\",t[t.IFCSTAIR=346]=\\\"IFCSTAIR\\\",t[t.IFCSTAIRFLIGHT=25]=\\\"IFCSTAIRFLIGHT\\\",t[t.IFCWALL=452]=\\\"IFCWALL\\\",t[t.IFCWALLELEMENTEDCASE=1314]=\\\"IFCWALLELEMENTEDCASE\\\",t[t.IFCWALLSTANDARDCASE=453]=\\\"IFCWALLSTANDARDCASE\\\",t[t.IFCWINDOW=667]=\\\"IFCWINDOW\\\",t[t.IFCWINDOWSTANDARDCASE=1316]=\\\"IFCWINDOWSTANDARDCASE\\\",t[t.IFCELEMENTCOMPONENT=424]=\\\"IFCELEMENTCOMPONENT\\\",t[t.IFCREINFORCINGELEMENT=262]=\\\"IFCREINFORCINGELEMENT\\\",t[t.IFCREINFORCINGBAR=571]=\\\"IFCREINFORCINGBAR\\\",t[t.IFCREINFORCINGMESH=531]=\\\"IFCREINFORCINGMESH\\\",t[t.IFCTENDON=261]=\\\"IFCTENDON\\\",t[t.IFCTENDONANCHOR=675]=\\\"IFCTENDONANCHOR\\\",t[t.IFCBUILDINGELEMENTPART=220]=\\\"IFCBUILDINGELEMENTPART\\\",t[t.IFCDISCRETEACCESSORY=423]=\\\"IFCDISCRETEACCESSORY\\\",t[t.IFCFASTENER=535]=\\\"IFCFASTENER\\\",t[t.IFCMECHANICALFASTENER=536]=\\\"IFCMECHANICALFASTENER\\\",t[t.IFCVIBRATIONISOLATOR=1312]=\\\"IFCVIBRATIONISOLATOR\\\",t[t.IFCFEATUREELEMENT=386]=\\\"IFCFEATUREELEMENT\\\",t[t.IFCSURFACEFEATURE=1287]=\\\"IFCSURFACEFEATURE\\\",t[t.IFCFEATUREELEMENTSUBTRACTION=499]=\\\"IFCFEATUREELEMENTSUBTRACTION\\\",t[t.IFCVOIDINGFEATURE=1313]=\\\"IFCVOIDINGFEATURE\\\",t[t.IFCOPENINGELEMENT=498]=\\\"IFCOPENINGELEMENT\\\",t[t.IFCOPENINGSTANDARDCASE=1217]=\\\"IFCOPENINGSTANDARDCASE\\\",t[t.IFCFEATUREELEMENTADDITION=385]=\\\"IFCFEATUREELEMENTADDITION\\\",t[t.IFCPROJECTIONELEMENT=384]=\\\"IFCPROJECTIONELEMENT\\\",t[t.IFCFURNISHINGELEMENT=253]=\\\"IFCFURNISHINGELEMENT\\\",t[t.IFCFURNITURE=1184]=\\\"IFCFURNITURE\\\",t[t.IFCSYSTEMFURNITUREELEMENT=1291]=\\\"IFCSYSTEMFURNITUREELEMENT\\\",t[t.IFCDISTRIBUTIONELEMENT=44]=\\\"IFCDISTRIBUTIONELEMENT\\\",t[t.IFCDISTRIBUTIONFLOWELEMENT=45]=\\\"IFCDISTRIBUTIONFLOWELEMENT\\\",t[t.IFCDISTRIBUTIONCHAMBERELEMENT=180]=\\\"IFCDISTRIBUTIONCHAMBERELEMENT\\\",t[t.IFCENERGYCONVERSIONDEVICE=175]=\\\"IFCENERGYCONVERSIONDEVICE\\\",t[t.IFCAIRTOAIRHEATRECOVERY=1097]=\\\"IFCAIRTOAIRHEATRECOVERY\\\",t[t.IFCBOILER=1105]=\\\"IFCBOILER\\\",t[t.IFCBURNER=1109]=\\\"IFCBURNER\\\",t[t.IFCCHILLER=1119]=\\\"IFCCHILLER\\\",t[t.IFCCOIL=1124]=\\\"IFCCOIL\\\",t[t.IFCCONDENSER=1132]=\\\"IFCCONDENSER\\\",t[t.IFCCOOLEDBEAM=1141]=\\\"IFCCOOLEDBEAM\\\",t[t.IFCCOOLINGTOWER=1142]=\\\"IFCCOOLINGTOWER\\\",t[t.IFCENGINE=1164]=\\\"IFCENGINE\\\",t[t.IFCEVAPORATIVECOOLER=1166]=\\\"IFCEVAPORATIVECOOLER\\\",t[t.IFCEVAPORATOR=1167]=\\\"IFCEVAPORATOR\\\",t[t.IFCHEATEXCHANGER=1187]=\\\"IFCHEATEXCHANGER\\\",t[t.IFCHUMIDIFIER=1188]=\\\"IFCHUMIDIFIER\\\",t[t.IFCTUBEBUNDLE=1305]=\\\"IFCTUBEBUNDLE\\\",t[t.IFCUNITARYEQUIPMENT=1310]=\\\"IFCUNITARYEQUIPMENT\\\",t[t.IFCELECTRICGENERATOR=1160]=\\\"IFCELECTRICGENERATOR\\\",t[t.IFCELECTRICMOTOR=1161]=\\\"IFCELECTRICMOTOR\\\",t[t.IFCMOTORCONNECTION=1216]=\\\"IFCMOTORCONNECTION\\\",t[t.IFCSOLARDEVICE=1270]=\\\"IFCSOLARDEVICE\\\",t[t.IFCTRANSFORMER=1303]=\\\"IFCTRANSFORMER\\\",t[t.IFCFLOWCONTROLLER=121]=\\\"IFCFLOWCONTROLLER\\\",t[t.IFCAIRTERMINALBOX=1096]=\\\"IFCAIRTERMINALBOX\\\",t[t.IFCDAMPER=1148]=\\\"IFCDAMPER\\\",t[t.IFCFLOWMETER=1182]=\\\"IFCFLOWMETER\\\",t[t.IFCVALVE=1311]=\\\"IFCVALVE\\\",t[t.IFCELECTRICDISTRIBUTIONBOARD=1157]=\\\"IFCELECTRICDISTRIBUTIONBOARD\\\",t[t.IFCELECTRICTIMECONTROL=1162]=\\\"IFCELECTRICTIMECONTROL\\\",t[t.IFCPROTECTIVEDEVICE=1235]=\\\"IFCPROTECTIVEDEVICE\\\",t[t.IFCSWITCHINGDEVICE=1290]=\\\"IFCSWITCHINGDEVICE\\\",t[t.IFCFLOWFITTING=467]=\\\"IFCFLOWFITTING\\\",t[t.IFCDUCTFITTING=1153]=\\\"IFCDUCTFITTING\\\",t[t.IFCPIPEFITTING=1222]=\\\"IFCPIPEFITTING\\\",t[t.IFCCABLECARRIERFITTING=1111]=\\\"IFCCABLECARRIERFITTING\\\",t[t.IFCCABLEFITTING=1113]=\\\"IFCCABLEFITTING\\\",t[t.IFCJUNCTIONBOX=1195]=\\\"IFCJUNCTIONBOX\\\",t[t.IFCFLOWMOVINGDEVICE=502]=\\\"IFCFLOWMOVINGDEVICE\\\",t[t.IFCCOMPRESSOR=1131]=\\\"IFCCOMPRESSOR\\\",t[t.IFCFAN=1177]=\\\"IFCFAN\\\",t[t.IFCPUMP=1238]=\\\"IFCPUMP\\\",t[t.IFCFLOWSEGMENT=574]=\\\"IFCFLOWSEGMENT\\\",t[t.IFCDUCTSEGMENT=1154]=\\\"IFCDUCTSEGMENT\\\",t[t.IFCPIPESEGMENT=1223]=\\\"IFCPIPESEGMENT\\\",t[t.IFCCABLECARRIERSEGMENT=1112]=\\\"IFCCABLECARRIERSEGMENT\\\",t[t.IFCCABLESEGMENT=1115]=\\\"IFCCABLESEGMENT\\\",t[t.IFCFLOWSTORAGEDEVICE=371]=\\\"IFCFLOWSTORAGEDEVICE\\\",t[t.IFCTANK=1293]=\\\"IFCTANK\\\",t[t.IFCELECTRICFLOWSTORAGEDEVICE=1159]=\\\"IFCELECTRICFLOWSTORAGEDEVICE\\\",t[t.IFCFLOWTERMINAL=46]=\\\"IFCFLOWTERMINAL\\\",t[t.IFCFIRESUPPRESSIONTERMINAL=1179]=\\\"IFCFIRESUPPRESSIONTERMINAL\\\",t[t.IFCSANITARYTERMINAL=1262]=\\\"IFCSANITARYTERMINAL\\\",t[t.IFCSTACKTERMINAL=1277]=\\\"IFCSTACKTERMINAL\\\",t[t.IFCWASTETERMINAL=1315]=\\\"IFCWASTETERMINAL\\\",t[t.IFCAIRTERMINAL=1095]=\\\"IFCAIRTERMINAL\\\",t[t.IFCMEDICALDEVICE=1212]=\\\"IFCMEDICALDEVICE\\\",t[t.IFCSPACEHEATER=1272]=\\\"IFCSPACEHEATER\\\",t[t.IFCAUDIOVISUALAPPLIANCE=1099]=\\\"IFCAUDIOVISUALAPPLIANCE\\\",t[t.IFCCOMMUNICATIONSAPPLIANCE=1127]=\\\"IFCCOMMUNICATIONSAPPLIANCE\\\",t[t.IFCELECTRICAPPLIANCE=1156]=\\\"IFCELECTRICAPPLIANCE\\\",t[t.IFCLAMP=1198]=\\\"IFCLAMP\\\",t[t.IFCLIGHTFIXTURE=1199]=\\\"IFCLIGHTFIXTURE\\\",t[t.IFCOUTLET=1219]=\\\"IFCOUTLET\\\",t[t.IFCFLOWTREATMENTDEVICE=425]=\\\"IFCFLOWTREATMENTDEVICE\\\",t[t.IFCINTERCEPTOR=1193]=\\\"IFCINTERCEPTOR\\\",t[t.IFCDUCTSILENCER=1155]=\\\"IFCDUCTSILENCER\\\",t[t.IFCFILTER=1178]=\\\"IFCFILTER\\\",t[t.IFCDISTRIBUTIONCONTROLELEMENT=468]=\\\"IFCDISTRIBUTIONCONTROLELEMENT\\\",t[t.IFCPROTECTIVEDEVICETRIPPINGUNIT=1236]=\\\"IFCPROTECTIVEDEVICETRIPPINGUNIT\\\",t[t.IFCACTUATOR=1091]=\\\"IFCACTUATOR\\\",t[t.IFCALARM=1098]=\\\"IFCALARM\\\",t[t.IFCCONTROLLER=1139]=\\\"IFCCONTROLLER\\\",t[t.IFCFLOWINSTRUMENT=1181]=\\\"IFCFLOWINSTRUMENT\\\",t[t.IFCSENSOR=1264]=\\\"IFCSENSOR\\\",t[t.IFCUNITARYCONTROLELEMENT=1308]=\\\"IFCUNITARYCONTROLELEMENT\\\",t[t.IFCCIVILELEMENT=1122]=\\\"IFCCIVILELEMENT\\\",t[t.IFCELEMENTASSEMBLY=18]=\\\"IFCELEMENTASSEMBLY\\\",t[t.IFCGEOGRAPHICELEMENT=1185]=\\\"IFCGEOGRAPHICELEMENT\\\",t[t.IFCTRANSPORTELEMENT=416]=\\\"IFCTRANSPORTELEMENT\\\",t[t.IFCVIRTUALELEMENT=168]=\\\"IFCVIRTUALELEMENT\\\",t[t.IFCSTRUCTURALACTIVITY=41]=\\\"IFCSTRUCTURALACTIVITY\\\",t[t.IFCSTRUCTURALACTION=40]=\\\"IFCSTRUCTURALACTION\\\",t[t.IFCSTRUCTURALCURVEACTION=1279]=\\\"IFCSTRUCTURALCURVEACTION\\\",t[t.IFCSTRUCTURALLINEARACTION=463]=\\\"IFCSTRUCTURALLINEARACTION\\\",t[t.IFCSTRUCTURALSURFACEACTION=1284]=\\\"IFCSTRUCTURALSURFACEACTION\\\",t[t.IFCSTRUCTURALPLANARACTION=39]=\\\"IFCSTRUCTURALPLANARACTION\\\",t[t.IFCSTRUCTURALPOINTACTION=356]=\\\"IFCSTRUCTURALPOINTACTION\\\",t[t.IFCSTRUCTURALREACTION=355]=\\\"IFCSTRUCTURALREACTION\\\",t[t.IFCSTRUCTURALCURVEREACTION=1280]=\\\"IFCSTRUCTURALCURVEREACTION\\\",t[t.IFCSTRUCTURALPOINTREACTION=354]=\\\"IFCSTRUCTURALPOINTREACTION\\\",t[t.IFCSTRUCTURALSURFACEREACTION=1285]=\\\"IFCSTRUCTURALSURFACEREACTION\\\",t[t.IFCSTRUCTURALITEM=226]=\\\"IFCSTRUCTURALITEM\\\",t[t.IFCSTRUCTURALCONNECTION=265]=\\\"IFCSTRUCTURALCONNECTION\\\",t[t.IFCSTRUCTURALCURVECONNECTION=534]=\\\"IFCSTRUCTURALCURVECONNECTION\\\",t[t.IFCSTRUCTURALPOINTCONNECTION=533]=\\\"IFCSTRUCTURALPOINTCONNECTION\\\",t[t.IFCSTRUCTURALSURFACECONNECTION=264]=\\\"IFCSTRUCTURALSURFACECONNECTION\\\",t[t.IFCSTRUCTURALMEMBER=225]=\\\"IFCSTRUCTURALMEMBER\\\",t[t.IFCSTRUCTURALCURVEMEMBER=224]=\\\"IFCSTRUCTURALCURVEMEMBER\\\",t[t.IFCSTRUCTURALCURVEMEMBERVARYING=227]=\\\"IFCSTRUCTURALCURVEMEMBERVARYING\\\",t[t.IFCSTRUCTURALSURFACEMEMBER=420]=\\\"IFCSTRUCTURALSURFACEMEMBER\\\",t[t.IFCSTRUCTURALSURFACEMEMBERVARYING=421]=\\\"IFCSTRUCTURALSURFACEMEMBERVARYING\\\",t[t.IFCPORT=179]=\\\"IFCPORT\\\",t[t.IFCDISTRIBUTIONPORT=178]=\\\"IFCDISTRIBUTIONPORT\\\",t[t.IFCANNOTATION=634]=\\\"IFCANNOTATION\\\",t[t.IFCSPATIALELEMENT=1273]=\\\"IFCSPATIALELEMENT\\\",t[t.IFCSPATIALSTRUCTUREELEMENT=170]=\\\"IFCSPATIALSTRUCTUREELEMENT\\\",t[t.IFCBUILDING=169]=\\\"IFCBUILDING\\\",t[t.IFCBUILDINGSTOREY=459]=\\\"IFCBUILDINGSTOREY\\\",t[t.IFCSITE=349]=\\\"IFCSITE\\\",t[t.IFCSPACE=454]=\\\"IFCSPACE\\\",t[t.IFCEXTERNALSPATIALSTRUCTUREELEMENT=1175]=\\\"IFCEXTERNALSPATIALSTRUCTUREELEMENT\\\",t[t.IFCEXTERNALSPATIALELEMENT=1174]=\\\"IFCEXTERNALSPATIALELEMENT\\\",t[t.IFCSPATIALZONE=1275]=\\\"IFCSPATIALZONE\\\",t[t.IFCGRID=564]=\\\"IFCGRID\\\",t[t.IFCPROXY=447]=\\\"IFCPROXY\\\"},596:(e,r,t)=>{Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.BinaryReader=void 0;var I=t(6),a=function(){function e(){this._buffer=null,this._view=null,this._position=0,this._progress=function(e){},this._lastProgress=0}return Object.defineProperty(e.prototype,\\\"Position\\\",{get:function(){return this._position},enumerable:!1,configurable:!0}),e.prototype.getSubReader=function(r){var t=new e,I=this._buffer.slice(this._position,this._position+r);return t.load(I,null,null),this._position+=r,t},e.prototype.load=function(e,r,t){this._position=0;var a=this;if(t=t||function(e){},this._progress=t,void 0===e||null==e)throw\\\"Source must be defined\\\";if(\\\"string\\\"==typeof e){var n=new XMLHttpRequest;n.open(\\\"GET\\\",e,!0),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=new FileReader;e.onloadend=function(){e.result&&\\\"string\\\"!=typeof e.result&&(a._buffer=e.result,a._view=new DataView(a._buffer),a.onloaded&&a.onloaded(a))},e.onprogress=function(e){t({message:\\\"Downloading geometry\\\",percent:Math.floor(e.loaded/e.total*100),type:I.MessageType.PROGRESS,phase:I.LoadingPhase.DOWNLOADING})},e.readAsArrayBuffer(n.response)}if(4==n.readyState&&200!=n.status){var r=\\\"Failed to fetch binary data from server. Server code: \\\"+n.status+\\\". This might be due to CORS policy of your browser if you run this as a local file.\\\";throw t({message:\\\"Downloading geometry\\\",percent:0,type:I.MessageType.FAILED,phase:I.LoadingPhase.DOWNLOADING}),a.onerror&&a.onerror(r),r}},n.responseType=\\\"blob\\\",null!=r&&Object.keys(r).forEach((function(e){var t=r[e];n.setRequestHeader(e,t)})),n.send()}else if(e instanceof Blob||\\\"undefined\\\"!=typeof File&&e instanceof File){var E=new FileReader;E.onloadend=function(){E.result&&\\\"string\\\"!=typeof E.result&&(a._buffer=E.result,a._view=new DataView(a._buffer),a.onloaded&&a.onloaded(a))},E.onprogress=function(e){t({message:\\\"Loading binary data\\\",percent:Math.floor(e.loaded/e.total*100),type:I.MessageType.PROGRESS,phase:I.LoadingPhase.DOWNLOADING})},E.readAsArrayBuffer(e)}else e instanceof ArrayBuffer&&(this._buffer=e,this._view=new DataView(a._buffer),a.onloaded&&a.onloaded(a))},e.prototype.seek=function(e){if(e<0||e>this._buffer.byteLength)throw\\\"Position out of range.\\\";this._position=e},e.prototype.isEOF=function(){if(null==this._position)throw\\\"Position is not defined\\\";return this._position==this._buffer.byteLength},e.prototype.readArray=function(e,r,t){null==r&&(r=1);var I=e*r,a=this._position;return this._position+=I,this.reportProgress(),1===r?new t(this._buffer.slice(a,a+I))[0]:new t(this._buffer.slice(a,a+I))},e.prototype.move=function(e){var r=this._position;return this._position+=e,this.reportProgress(),r},e.prototype.reportProgress=function(){null!=this._progress&&this._position-this._lastProgress>5e5&&(this._lastProgress=this._position,this._progress({type:I.MessageType.PROGRESS,message:\\\"Reading data\\\",percent:Math.floor(100*this._position/this._buffer.byteLength),phase:I.LoadingPhase.READING}))},e.prototype.readByte=function(){return this.readUint8()},e.prototype.readByteArray=function(e){return this.readUint8Array(e)},e.prototype.readUint8=function(){var e=this.move(1);return this._view.getUint8(e)},e.prototype.readUint8Array=function(e){return this.readArray(1,e,Uint8Array)},e.prototype.readInt16=function(){var e=this.move(2);return this._view.getInt16(e,!0)},e.prototype.readInt16Array=function(e){return this.readArray(2,e,Int16Array)},e.prototype.readUInt16=function(){var e=this.move(2);return this._view.getUint16(e,!0)},e.prototype.readUint16Array=function(e){return this.readArray(2,e,Uint16Array)},e.prototype.readInt32=function(){var e=this.move(4);return this._view.getInt32(e,!0)},e.prototype.readInt32Array=function(e){return this.readArray(4,e,Int32Array)},e.prototype.readUint32=function(){var e=this.move(4);return this._view.getUint32(e,!0)},e.prototype.readUint32Array=function(e){return this.readArray(4,e,Uint32Array)},e.prototype.readFloat32=function(){var e=this.move(4);return this._view.getFloat32(e,!0)},e.prototype.readFloat32Array=function(e){return this.readArray(4,e,Float32Array)},e.prototype.readFloat64=function(){var e=this.move(8);return this._view.getFloat64(e,!0)},e.prototype.readFloat64Array=function(e){return this.readArray(8,e,Float64Array)},e.prototype.readChar=function(e){null==e&&(e=1);var r=this.readByteArray(e),t=new Array(e);for(var I in r)t[I]=String.fromCharCode(r[I]);return 1===e?t[0]:t},e.prototype.readPoint=function(e){null==e&&(e=1);for(var r=this.readFloat32Array(3*e),t=new Array(e),I=0;I<e;I++){var a=3*I*4,n=new Float32Array(r.buffer,a,3);t[I]=n}return 1===e?t[0]:t},e.prototype.readRgba=function(e){null==e&&(e=1);for(var r=this.readByteArray(4*e),t=new Array(e),I=0;I<e;I++){var a=4*I,n=new Uint8Array(r.buffer,a,4);t[I]=n}return 1===e?t[0]:t},e.prototype.readPackedNormal=function(e){null==e&&(e=1);for(var r=this.readUint8Array(2*e),t=new Array(e),I=0;I<e;I++){var a=new Uint8Array(r.buffer,2*I,2);t[I]=a}return 1===e?t[0]:t},e.prototype.readMatrix4x4=function(e){null==e&&(e=1);for(var r=this.readFloat32Array(16*e),t=new Array(e),I=0;I<e;I++){var a=16*I*4,n=new Float32Array(r.buffer,a,16);t[I]=n}return 1===e?t[0]:t},e.prototype.readMatrix4x4_64=function(e){null==e&&(e=1);for(var r=this.readFloat64Array(16*e),t=new Array(e),I=0;I<e;I++){var a=16*I*8,n=new Float64Array(r.buffer,a,16);t[I]=n}return 1===e?t[0]:t},e.prototype.readData=function(e){var r=this.move(e);return this._buffer.slice(r,r+e)},e}();r.BinaryReader=a},795:(e,r,t)=>{Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.Region=r.ModelGeometry=void 0;var I=t(596),a=t(321),n=t(524),E=t(393),o=t(6),C=t(425),i=function(){function e(){this.normals=new Uint8Array(0),this.indices=new Float32Array(0),this.products=new Float32Array(0),this.transformations=new Float32Array(0),this.styleIndices=new Uint16Array(0),this.states=new Uint8Array(0),this.vertices=new Float32Array(0),this.matrices=new Float32Array(0),this.styles=new Uint8Array(0),this.meter=1e3,this.wcs=[0,0,0],this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=0,this._iTransform=0,this._iMatrix=0,this._maxVersionSupported=4,this.productMaps={},this.productIdLookup=[],this.breaks={10:[],20:[],40:[],30:[],50:[],60:[],70:[],80:[],90:[],100:[]},this._styleMap=new T}return e.prototype.parse=function(e,r){var t=this;if(e&&!e.isEOF()){this._reader=e;var I=e;if(94132117!==I.readInt32())throw new Error(\\\"Magic number mismatch. This is not a wexBIM file.\\\");var i=I.readByte();if(i>this._maxVersionSupported)throw new Error(\\\"Viewer doesn't support version \\\".concat(i,\\\" of the wexBIM stream\\\"));var T=I.readInt32(),F=I.readInt32(),A=I.readInt32(),R=I.readInt32(),N=I.readInt32(),d=I.readInt32();this.meter=I.readFloat32(),i>3&&(this.wcs=[I.readFloat64(),I.readFloat64(),I.readFloat64()]);var L=I.readInt16();this.vertices=new Float32Array(this.square(4,3*F)),this.normals=new Uint8Array(6*A),this.indices=new Float32Array(3*A),this.styleIndices=new Uint16Array(3*A),this.styles=new Uint8Array(this.square(1,4*(d+2))),this.products=new Float32Array(3*A),this.states=new Uint8Array(3*A*2),this.transformations=new Float32Array(3*A),this.matrices=new Float32Array(this.square(4,16*R)),this.productMaps={},this.regions=new Array(L),this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=3*A,this._iTransform=0,this._iMatrix=0;for(var u=0;u<L;u++)(P=new s).population=I.readInt32(),P.centre=I.readFloat32Array(3),P.bbox=I.readFloat32Array(6),this.regions[u]=P;for(var O=0;O<d;O++){var p=I.readInt32(),l=255*I.readFloat32(),h=255*I.readFloat32(),S=255*I.readFloat32(),y=255*I.readFloat32();this.styles.set([l,h,S,y],4*O),this._styleMap.Add({id:p,index:O,transparent:y<254})}for(this.styles.set([255,255,255,255],4*O),this._styleMap.Add({id:-1,index:O,transparent:!1}),O++,this.styles.set([0,255,255,100],4*O),this._styleMap.Add({id:-2,index:O,transparent:!1}),u=0;u<N;u++){var M=I.readInt32(),f=I.readInt16(),c=I.readFloat32Array(6),U=new C.ProductMap;U.productID=M,U.renderId=u+1,U.type=f,U.bBox=c,U.spans=[],this.productMaps[M]=U,this.productIdLookup[u+1]=M,f!==E.ProductType.IFCSPACE&&f!==E.ProductType.IFCOPENINGELEMENT||U.states.push(n.State.HIDDEN)}if(i>=3)for(var D=0;D<L;D++){for(var P=this.regions[D],v=I.readInt32(),b=new Array(v),G=0;G<v;G++){var g=this.readShape(i),w=I.readInt32();if(0!==w){var B=I.getSubReader(w);if((V=new a.TriangulatedShape).parse(B),!B.isEOF())throw new Error(\\\"Incomplete reading of geometry for shape instance \\\".concat(g[0].iLabel));b[G]={shapes:g,geometry:V}}}for(r.orderGeometryBySize&&b.sort((function(e,r){var I,a,n=null===(I=e.shapes[0])||void 0===I?void 0:I.pLabel,E=null===(a=r.shapes[0])||void 0===a?void 0:a.pLabel;if(null==n||null==E)return 0;var o=t.productMaps[n],C=t.productMaps[E];if(null==o)return 1;if(null==C)return-1;var i=o.bBox[3]*o.bBox[4]*o.bBox[5];return C.bBox[3]*o.bBox[4]*o.bBox[5]-i})),G=0;G<v;G++){var _=b[G];this.feedDataArrays(_.shapes,_.geometry)}}else for(var x=0;x<T;x++){var V;g=this.readShape(i),(V=new a.TriangulatedShape).parse(I),this.feedDataArrays(g,V)}if(!I.isEOF())throw this.progress({type:o.MessageType.FAILED,message:\\\"Processed data\\\",percent:0,phase:o.LoadingPhase.READING}),new Error(\\\"Binary reader is not at the end of the file.\\\");this.progress({type:o.MessageType.PROGRESS,message:\\\"Processed data\\\",percent:100,phase:o.LoadingPhase.READING}),this.transparentIndex=this._iIndexForward,this.breaks[100]=[this.transparentIndex-1,this.transparentIndex]}},e.prototype.square=function(e,r){if(null==e||null==r)throw new Error('Wrong arguments for \\\"square\\\" function.');if(0===r)return 0;for(var t=r*e,I=Math.ceil(Math.sqrt(t/4));4*I%e!=0;)I++;return I*I*4/e},e.prototype.feedDataArrays=function(e,r){var t=this;e.forEach((function(e){var I=0,a=I=e.transparent?t._iIndexBackward-r.indices.length:t._iIndexForward,o=t.productMaps[e.pLabel];void 0===o&&((o=new C.ProductMap).productID=0,o.renderId=0,o.type=E.ProductType.IFCOPENINGELEMENT,o.bBox=new Float32Array(6),o.spans=[],o.states.push(n.State.HIDDEN),t.productMaps[e.pLabel]=o),t.normals.set(r.normals,2*I);var i=o.type===E.ProductType.IFCSPACE||o.type===E.ProductType.IFCOPENINGELEMENT?n.State.HIDDEN:255;r.indices.forEach((function(r){t.indices[I]=r+t._iVertex/3,t.products[I]=o.renderId,t.styleIndices[I]=e.style,t.transformations[I]=e.transform,t.states[2*I]=i,t.states[2*I+1]=255,I++}));var s=I;o.spans.push(new Int32Array([a,s])),e.transparent?t._iIndexBackward-=r.indices.length:t._iIndexForward+=r.indices.length;var T=(t._iIndexForward+t.indices.length-t._iIndexBackward)/t.indices.length*100;Object.getOwnPropertyNames(t.breaks).forEach((function(e){var r=+e;0===t.breaks[r].length&&T>r&&(t.breaks[r]=[t._iIndexForward,t._iIndexBackward])}))}),this),this.vertices.set(r.vertices,this._iVertex),this._iVertex+=r.vertices.length},e.prototype.readShape=function(e){for(var r=this._reader,t=r.readInt32(),I=new Array,a=0;a<t;a++){var n=r.readInt32(),o=(r.readInt16(),r.readInt32()),C=r.readInt32(),i=null;t>1&&(i=1===e?r.readFloat32Array(16):r.readFloat64Array(16),this.matrices.set(i,this._iMatrix),this._iMatrix+=16);var s=this._styleMap.GetStyle(C);null===s&&(s=this._styleMap.GetStyle(-1));var T=this.productMaps[n]?this.productMaps[n].type:E.ProductType.IFCPRODUCT;T!==E.ProductType.IFCSPACE&&T!==E.ProductType.IFCOPENINGELEMENT||(s=this._styleMap.GetStyle(-2)),I.push({pLabel:n,iLabel:o,style:s.index,transparent:s.transparent,transform:null!=i?this._iTransform++:-1})}return I},e.prototype.load=function(e,r,t,a){var n=this;void 0===a&&(a={}),this.progress=t||function(e){};var E=new I.BinaryReader,o=this;E.onloaded=function(){o.parse(E,a),o.onloaded&&o.onloaded(n)},E.onerror=function(e){o.onerror&&o.onerror(e)},E.load(e,r,t)},e}();r.ModelGeometry=i;var s=function(){function e(e){this.population=-1,this.centre=null,this.bbox=null,e&&(this.population=e.population,e.centre&&(this.centre=new Float32Array(e.centre)),e.bbox&&(this.bbox=new Float32Array(e.bbox)))}return e.clone=function(r){var t=new e;return t.population=r.population,r.centre&&(t.centre=new Float32Array(r.centre)),r.bbox&&(t.bbox=new Float32Array(r.bbox)),t},e.prototype.merge=function(r){if(-1===this.population&&null===this.centre&&null===this.bbox)return new e(r);var t=new e;if(t.population=this.population+r.population,this.bbox&&r.bbox){var I=Math.min(this.bbox[0],r.bbox[0]),a=Math.min(this.bbox[1],r.bbox[1]),n=Math.min(this.bbox[2],r.bbox[2]),E=Math.max(this.bbox[0]+this.bbox[3],r.bbox[0]+r.bbox[3]),o=Math.max(this.bbox[1]+this.bbox[4],r.bbox[1]+r.bbox[4]),C=Math.max(this.bbox[2]+this.bbox[5],r.bbox[2]+r.bbox[5]),i=E-I,s=o-a,T=C-n,F=(I+E)/2,A=(a+o)/2,R=(n+C)/2;t.bbox=new Float32Array([I,a,n,i,s,T]),t.centre=new Float32Array([F,A,R])}else this.bbox?(t.bbox=new Float32Array(this.bbox),t.centre=new Float32Array(this.centre)):(t.bbox=new Float32Array(r.bbox),t.centre=new Float32Array(r.centre));return t},e}();r.Region=s;var T=function(){function e(){this._internal={}}return e.prototype.Add=function(e){this._internal[e.id]=e},e.prototype.GetStyle=function(e){return this._internal[e]||null},e}()},321:(e,r,t)=>{Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.TriangulatedShape=void 0;var I=t(596),a=function(){function e(){var e=this;this.load=function(r){var t=new I.BinaryReader,a=e;t.onloaded=function(){a.parse(t),a.onloaded&&a.onloaded(e)},t.load(r,null,null)}}return e.prototype.parse=function(e){var r=this,t=(e.readByte(),e.readInt32()),I=e.readInt32();r.vertices=e.readFloat32Array(3*t),r.indices=new Uint32Array(3*I),r.normals=new Uint8Array(6*I);var a,n=0;a=t<=255?function(r){return e.readByteArray(r)}:t<=65535?function(r){return e.readUint16Array(r)}:function(r){return e.readInt32Array(r)};var E=e.readInt32();if(0!==t&&0!==I)for(var o=0;o<E;o++){var C=e.readInt32();if(0!=C){var i=C>0;if(C=Math.abs(C),i){var s=e.readByteArray(2),T=a(3*C);r.indices.set(T,n);for(var F=0;F<3*C;F++)r.normals[2*n]=s[0],r.normals[2*n+1]=s[1],n++}else for(F=0;F<C;F++)r.indices[n]=a(),r.normals.set(e.readByteArray(2),2*n),n++,r.indices[n]=a(),r.normals.set(e.readByteArray(2),2*n),n++,r.indices[n]=a(),r.normals.set(e.readByteArray(2),2*n),n++}}},e}();r.TriangulatedShape=a}},r={};function t(I){var a=r[I];if(void 0!==a)return a.exports;var n=r[I]={exports:{}};return e[I](n,n.exports,t),n.exports}var I={};for(var a in(()=>{var e=I;Object.defineProperty(e,\\\"__esModule\\\",{value:!0});var r=t(6),a=t(795);if(self&&self instanceof DedicatedWorkerGlobalScope){var n=self;n.onmessage=function(e){var t=e.data.model,I=e.data.headers,E=e.data.options,o=new a.ModelGeometry;o.onerror=function(e){var t={type:r.MessageType.FAILED,message:e,percent:0,phase:r.LoadingPhase.DOWNLOADING};n.postMessage(t),console.error(e),n.close()},o.onloaded=function(){try{var e={},t=[];for(var I in o)if(o.hasOwnProperty(I)){var a=o[I];\\\"function\\\"==typeof a||I.startsWith(\\\"_\\\")||(e[I]=a,ArrayBuffer.isView(a)?t.push(a.buffer):null!=(C=a).width&&null!=C.height&&null!=C.close&&t.push(a))}var E={type:r.MessageType.COMPLETED,message:\\\"Read Completed\\\",percent:100,result:e,phase:r.LoadingPhase.READING};n.postMessage(E,t),n.close()}catch(e){E={type:r.MessageType.FAILED,message:e,percent:0,phase:r.LoadingPhase.READING},n.postMessage(E),console.error(e),n.close()}var C},o.load(t,I,(function(e){n.postMessage(e)}),E)}}})(),I)this[a]=I[a];I.__esModule&&Object.defineProperty(this,\\\"__esModule\\\",{value:!0})})();\"","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(1306);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","EPSILON","ARRAY_TYPE","Float32Array","Array","RANDOM","Math","random","setMatrixArrayType","type","degree","PI","toRadian","equals","b","abs","max","create","out","clone","copy","identity","fromValues","m00","m01","m10","m11","set","transpose","a1","invert","a0","a2","a3","det","adjoint","determinant","multiply","b0","b1","b2","b3","rotate","rad","s","sin","c","cos","scale","v","v0","v1","fromRotation","fromScaling","str","frob","hypot","LDU","L","D","U","add","subtract","exactEquals","multiplyScalar","multiplyScalarAndAdd","y","arguments","length","sqrt","mul","sub","d","tx","ty","aa","ab","ac","ad","atx","aty","a4","a5","b4","b5","translate","fromTranslation","fromMat4","m02","m12","m20","m21","m22","a01","a02","a12","a00","a10","a11","a20","a21","a22","b01","b11","b21","b00","b02","b10","b12","b20","b22","x","fromMat2d","fromQuat","q","z","w","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","normalFromMat4","a03","a13","a23","a30","a31","a32","a33","b03","b04","b05","b06","b07","b08","b09","projection","width","height","a6","a7","a8","b6","b7","b8","m03","m13","m23","m30","m31","m32","m33","axis","t","len","rotateX","rotateY","rotateZ","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","xy","xz","yz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","o","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspectiveNO","fovy","aspect","f","tan","Infinity","perspective","perspectiveZO","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","orthoNO","lr","bt","ortho","orthoZO","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","target","a9","a14","a15","b9","b13","b14","b15","divide","ceil","floor","min","round","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","normalize","cross","lerp","hermite","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","r","zScale","transformMat4","m","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","p","angle","mag","cosine","acos","zero","vec","div","dist","sqrDist","sqrLen","forEach","stride","offset","count","fn","arg","l","dot","u","A","B","C","E","F","G","H","I","J","v2","v3","v4","s1","s2","ix","iy","iz","iw","setAxisAngle","getAxisAngle","out_axis","getAngle","dotproduct","calculateW","exp","et","ln","atan2","log","pow","slerp","omega","cosom","sinom","scale0","scale1","u1","u2","u3","sqrt1MinusU1","sqrtU1","invDot","conjugate","fromMat3","fRoot","fTrace","j","k","fromEuler","halfToRad","cx","cy","cz","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","rotationTo","sqlerp","setAxes","view","dq","w1","fromRotationTranslationValues","outer","getReal","getDual","setReal","setDual","ax1","ay1","az1","aw1","bx1","by1","bz1","ax2","ay2","az2","aw2","rotateByQuatAppend","rotateByQuatPrepend","rotateAroundAxis","axisLength","ax0","ay0","az0","aw0","bw1","bx0","by0","bz0","bw0","mt","sqlen","a_dot_b","transformMat2","transformMat2d","p0","p1","sinC","cosC","Bitmap","ClippingPlane","Coloring","Component","guid","this","ifc_guid","originating_system","authoring_tool_id","Components","new","replace","parseInt","toString","Guid","Line","OrthogonalCamera","PerspectiveCamera","Snapshot","ViewSetupHints","index","Viewpoint","_currentIndex","GetViewpoint","viewer","idMapper","toArray","prototype","slice","call","camera","CameraType","PERSPECTIVE","perspective_camera","camera_direction","getCameraDirection","camera_up_vector","getCameraHeading","camera_view_point","getCameraPositionWcs","field_of_view","cameraProperties","modelHeight","unitsInMeter","viewportHeight","resolution","orthogonal_camera","view_to_world_scale","base64image","getCurrentImageDataUrl","substring","snapshot","snapshot_type","snapshot_data","planes","getClip","AddClippingPlane","PlaneA","PlaneB","highlighted","getProductsWithState","State","HIGHLIGHTED","console","warn","id","model","components","coloring","selection","visibility","Visibility","push","planeEquation","clipping_planes","plane","direction","location","SetViewpoint","viewpoint","duration","toVec3","vec3","wcs","getCurrentWcs","SetClipping","camViewPoint","camDir","camUpDir","eyeWcs","dir","isPositiveNumber","orthCamHeight","region","getMergedRegion","optimum","bbox","population","getDistanceAndHeight","centre","moveDir","move","current","atan","ORTHOGONAL","h","mv","mat4","animations","viewTo","then","adjustments","adjust","clearHighlighting","parts","split","modelId","productId","map","Object","getOwnPropertyNames","mId","addState","renderingMode","RenderingMode","XRAY_ULTRA","show","ViewType","DEFAULT","undefined","zoomTo","unclip","sectionBox","setToInfinity","planeA","getClippingEquation","planeB","setClippingPlaneA","setClippingPlaneB","setToPlanes","normal","point","_resolution","e","document","createElement","style","position","body","appendChild","rect","getBoundingClientRect","removeChild","default_visibility","changeHandler","_fov","_type","onChange","value","Error","_near","_far","_height","getProjectionMatrix","CameraProperties","check","result","CheckResult","canvas","WebGLUtils","setupWebGL","ctx","err","errors","getExtension","warnings","vertTextUnits","getParameter","MAX_VERTEX_TEXTURE_IMAGE_UNITS","window","Blob","noErrors","noWarnings","Abilities","union","minA","minB","maxA","maxB","intersection","BBox","areDisjoint","getDiagonalSize","bBox","getSizeInView","viewDirection","upDirection","moveDirection","boxSize","boxPosition","back","xa","xb","ya","yb","za","zb","min1","min2","min3","max1","max2","max3","size","depth","frameRequest","buffer","CircularBuffer","watch","time","next","first","last","FpsWatch","inner","idx","LoadingPhase","MessageType","Message","msg","perPhase","phase","percent","ProductAnalyticalResult","ProductIdentity","states","ProductMap","productID","renderId","spans","state","find","removeState","indexOf","splice","getState","UNDEFINED","StatePriorities","getHighestPriority","getPriority","PICKING_ONLY","HIDDEN","XRAYVISIBLE","priorities","priority","sort","getVec3","VectorUtils","makeFailHTML","done","attribs","onError","container","parentNode","OTHER_PROBLEM","GET_A_WEBGL_BROWSER","innerHTML","addEventListener","event","statusMessage","create3DContext","opt_attribs","context","getContext","name","gl","withDepth","glVersion","isReady","_disposed","_glVersion","framebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","renderbuffer","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","texture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","pixelStorei","UNPACK_FLIP_Y_WEBGL","depthTexture","DEPTH_COMPONENT","UNSIGNED_SHORT","framebufferTexture2D","COLOR_ATTACHMENT0","DEPTH_ATTACHMENT","framebufferRenderbuffer","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","_depthReader","DepthReader","bind","getPixel","Uint8Array","readPixels","getDepth","depthReader","getDepths","points","getXYZArray","xc","yc","zc","getXYZ","getXYZRange","zcn","zcf","middle","getId","getIds","getImageDataArray","data","transData","Uint8ClampedArray","row","subarray","transIndex","get2DCanvas","imageData","createImageData","putImageData","getImageDataUrl","toDataURL","getImageDataBlob","callback","toBlob","delete","WebGL2RenderingContext","invalidateFramebuffer","deleteFramebuffer","deleteRenderbuffer","deleteTexture","Framebuffer","DrawMode","_gl","_model","progress","tag","_stopped","pickable","clippable","pinned","_changed","_empty","_drawProductIds","_clippingPlaneA","_clippingPlaneB","_clippingA","_clippingB","ModelHandle","_instancesNum","meter","indices","InitGlBuffersAndTextures","InitRegions","regions","InitGPU","getRegion","isolatedProducts","getProductMap","bb","reduce","prev","curr","Region","_region","shift","bboxOrigin","empty","Number","NaN","recomputeCompleteRegion","maps","productMaps","error","_vertexTexture","_matrixTexture","_styleTexture","_vertexTextureSize","_matrixTextureSize","_styleTextureSize","_normalBuffer","createBuffer","_indexBuffer","_productBuffer","_styleBuffer","_stateBuffer","_transformationBuffer","setActive","pointers","stopped","gl1","gl2","TEXTURE1","uniform1i","VertexSamplerUniform","TEXTURE2","MatrixSamplerUniform","TEXTURE3","StyleSamplerUniform","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","NormalAttrPointer","IndexlAttrPointer","FLOAT","ProductAttrPointer","StateAttrPointer","StyleAttrPointer","TransformationAttrPointer","uniform1f","VertexTextureSizeUniform","MatrixTextureSizeUniform","StyleTextureSizeUniform","MeterUniform","diff","uniform3fv","WcsUniform","ClippingAUniform","ClippingBUniform","transformPlane","uniform4fv","ClippingPlaneAUniform","ClippingPlaneBUniform","transform","normalLength","draw","mode","SOLID","transparentIndex","breaks","drawArrays","TRIANGLES","filter","span","TRANSPARENT","_numberOfIndices","depthMask","getProductId","productIdLookup","getProductMaps","ids","getProductsOfType","typeIds","Product","getAllSubTypes","unload","deleteBuffer","report","message","PROGRESS","LOADING","bufferData","normals","products","transformations","styleIndices","bufferTexture","vertices","matrices","styles","COMPLETED","pointer","STATIC_DRAW","numberOfComponents","image","fp","maxSize","MAX_TEXTURE_SIZE","dim","byteLength","UNPACK_PREMULTIPLY_ALPHA_WEBGL","WebGLRenderingContext","ALPHA","RGB","internalFormat","format","RED","R32F","RGB32F","RGBA32F","getFirstSpan","getStates","getStyle","args","checkStateArgs","getMaps","priorityState","setState","resetState","isolated","isolation","n","setStyle","styleId","resetStyles","UNSTYLED","getModelState","hasOwnProperty","restoreModelState","getProductAnalysis","results","indexCount","volume","numberOfTriangles","density","ModelPointers","program","getAttribLocation","getUniformLocation","enableVertexAttribArray","EasingType","_rotationOn","setTimeout","requestAnimationFrame","clear","Animations","viewQueue","zoomQueue","startRotation","Promise","mvMatrix","stopRotation","end","easing","SINUS2","resolve","reject","start","quat","startScale","startTranslation","startTime","endRotation","endScale","endTranslation","step","pop","Date","now","LINEAR","CIRCLE","getCircleEasing","SINUS","getSinEasing","rotation","heightDelta","addZoom","currentMv","currentHeight","zoomDirection","inv","cameraDirection","deltaHeight","limit","delta","period","request","lastMvChange","dirty","stop","latency","hasDepthSupport","mvMatrixAge","isRunning","activeHandles","fb","dw","dh","weights","clipPoints","weight","pMatrix","distances","trimmedMean","optimalHeight","optimalDistance","values","cutOff","previous","CameraAdjustment","initKeyboardEvents","navigationMode","getPanOrigin","getCameraPosition","multiplier","shiftKey","code","navigate","KeyboardNavigation","initMouseEvents","mouseDown","lastMouseX","lastMouseY","startX","startY","button","xyz","isPointerLocked","origin","handleLookAround","movementX","movementY","scrollOrigin","lastScrollPoint","scrollCounter","requestPointerLock","onclick","pointerLockElement","removeEventListener","timer","clientX","clientY","viewX","viewY","getEventData","lockedOrbitOrigin","getTargetBoundingBox","disableTextSelection","handleMouseDown","stopPropagation","preventDefault","scrollPoint","vec2","getInteractionOrigin","trans","sign","isNaN","deltaX","deltaY","handleMouseScroll","endX","endY","fire","getTime","enableTextSelection","handleMouseUp","hoverPickEnabled","setHoverPick","newX","newY","handleMouseMove","MouseNavigation","findView","elements","getTargetsBoundingBox","directions","boxHorizontalArea","boxVerticalAreaX","boxVerticalAreaY","dW","dH","checkPoints","lookUp","originalMv","originalHeight","originalAdaptive","adaptivePerformanceOn","mvs","ratings","getData","types","ex","PreflightCheck","initTouchNavigationEvents","lastTouchX_1","lastTouchY_1","lastTouchX_2","lastTouchY_2","cancelable","touches","getEventDataFromEvent","handleTouchStart","distanceBefore","middleBefore","distanceAfter","middleAfter","dX","dY","handleTouchMove","initTouchTapEvents","lastTouchX","lastTouchY","touchDown","lastTap","changedTouches","handleTouchEnd","TouchNavigation","PerformanceRating","fshader","ARROW","HORIZONTAL","VERTICAL","PLANE","arrowColour","horizontalColour","verticalColour","planeColour","currentInteraction","initialized","transformation","_hoverPickColour","controlsSize","bufferGeometry","updateTransformationFromPlane","applyCurrentPlane","init","initShader","useProgram","index_buffer","vertex_buffer","colours_buffer","id_buffer","coordinatesAttributePointer","coloursAttributePointer","idsAttributePointer","ELEMENT_ARRAY_BUFFER","pUniformPointer","mvUniformPointer","idCodingUniformPointer","idSelectedIdUniformPointer","hoverPickColourUniformPointer","initEvents","onBeforeDraw","onAfterDraw","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","onBeforeDrawId","onAfterDrawId","onAfterDrawModelId","uniformMatrix4fv","disable","CULL_FACE","DEPTH_TEST","drawElements","planeSize","planeVertices","computePlaneVertices","arrowVerticesA","computeArrowVertices","arrowVerticesB","arrowIndices","computeArrowIndices","planeIndices","computePlaneIndices","horizontalRingVertices","computeRingVertices","verticalRingVertices","ringIndices","computeRingIndices","Uint16Array","_","colours","flatMap","lastNavigation","originInPlaneSpace","plugins","snapToMainAxes","draggingOffset","getDragOffset","getRotatingAngle","vertical","modelViewRotation","projectedOrigin","planeOfRevert","getTangentPlaneEquation","getPrependicularPlaneEquation","topOrBottom","displacmentVector","displacedOrigin","displacment","signVector","speed","dragAxis","projectedNormal","tangent","getTangent","binormal","planePoint","getPlanePoint","isTransformationsHasSameOrientation","transform1","transform2","tolerance","regionCentre","transformed","acc","between","getPlaneEquation","yRoration","proj","roration","getPlaneNormal","getPlaneBinormal","getPlaneTangent","compile","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","fragmentShader","createShader","FRAGMENT_SHADER","vertexShader","VERTEX_SHADER","vshader","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","arrowRight","arrowLeft","concat","outerRadius","innerRadius","segments","pt","pt1","pt2","InteractiveClippingPlane","factor","zFactor","numberOfLines","colour","_initShader","colourUniformPointer","spacing","ONE_MINUS_DST_ALPHA","LINES","Grid","element","innerText","overlay","zIndex","overflow","over","backgroundColor","opacity","imageContainer","display","alignItems","justifyContent","loaderContainer","loader","className","parent","parentElement","nextElementSibling","insertBefore","hide","LoaderOverlay","cube_fshader","cube_vshader","CubeTextures","en","TOP","BOTTOM","LEFT","RIGHT","FRONT","BACK","TOP_LEFT_FRONT","TOP_RIGHT_FRONT","TOP_LEFT_BACK","TOP_RIGHT_BACK","BOTTOM_LEFT_FRONT","BOTTOM_RIGHT_FRONT","BOTTOM_LEFT_BACK","BOTTOM_RIGHT_BACK","TOP_LEFT","TOP_RIGHT","TOP_FRONT","TOP_BACK","BOTTOM_LEFT","BOTTOM_RIGHT","BOTTOM_FRONT","BOTTOM_BACK","FRONT_RIGHT","FRONT_LEFT","BACK_RIGHT","BACK_LEFT","_initialized","_modelId","ratio","minSize","highlighting","activeAlpha","passiveAlpha","trueNorth","txtCoords","_image","_shader","_alpha","_selection","_pMatrixUniformPointer","_rotationUniformPointer","_colourCodingUniformPointer","_alphaUniformPointer","_selectionUniformPointer","_textureUniformPointer","_highlightingUniformPointer","_vertexAttrPointer","_texCoordAttrPointer","_idAttrPointer","_vertexBuffer","_texCoordBuffer","_idBuffer","_texture","Image","LINEAR_MIPMAP_NEAREST","generateMipmap","src","isInRegion","_drag","_originalNavigation","on","MouseEvent","TouchEvent","idArg","heading","widthAndDistance","zoomDuration","onBeforePick","viewport","clearColor","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","minX","maxX","minY","maxY","viewerWidth","viewerHeight","minDim","minRatio","maxRatio","regionX","regionY","mat3","northRotation","uniformMatrix3fv","cfEnabled","NavigationCube","getByName","toUpperCase","toProcess","ProductInheritance","children","roots","ProductType","_buffer","_view","_position","_progress","_lastProgress","getSubReader","reader","BinaryReader","load","source","headers","XMLHttpRequest","open","onreadystatechange","readyState","status","fReader","FileReader","onloadend","DataView","onloaded","onprogress","evt","loaded","total","DOWNLOADING","readAsArrayBuffer","response","FAILED","onerror","responseType","keys","header","setRequestHeader","send","File","ArrayBuffer","seek","isEOF","readArray","unitSize","ctor","reportProgress","READING","readByte","readUint8","readByteArray","readUint8Array","getUint8","readInt16","getInt16","readInt16Array","Int16Array","readUInt16","getUint16","readUint16Array","readInt32","getInt32","readInt32Array","Int32Array","readUint32","getUint32","readUint32Array","Uint32Array","readFloat32","getFloat32","readFloat32Array","readFloat64","getFloat64","readFloat64Array","Float64Array","readChar","bytes","String","fromCharCode","readPoint","coords","readRgba","readPackedNormal","uv","readMatrix4x4","matrix","readMatrix4x4_64","readData","_iVertex","_iIndexForward","_iIndexBackward","_iTransform","_iMatrix","_maxVersionSupported","_styleMap","StyleMap","parse","binReader","options","_reader","br","version","numShapes","numVertices","numTriangles","numMatrices","numProducts","numStyles","numRegions","square","iStyle","R","Add","transparent","productLabel","prodType","IFCSPACE","IFCOPENINGELEMENT","geomCount","g","shapes","readShape","geomLength","gbr","geometry","TriangulatedShape","iLabel","orderGeometryBySize","labelA","pLabel","labelB","mapA","mapB","volA","feedDataArrays","iShape","arity","imgSide","shape","iIndex","begin","bp","breakPoint","repetition","shapeList","iProduct","prodLabel","instanceLabel","styleItem","GetStyle","IFCPRODUCT","ModelGeometry","merge","_internal","record","numOfTriangles","readIndex","numFaces","numTrianglesInFace","isPlanar","planarIndices","_onChange","_lastWcs","_lastBBox","_location","_rotationX","_rotationY","_rotationZ","_lengthX","_lengthY","_lengthZ","getMatrix","rotationX","rotationY","rotationZ","lengthX","lengthY","lengthZ","isFinite","MAX_SAFE_INTEGER","setToBox","box","setToBoundingBox","areOrthogonal","planeC","nA","nB","nC","pA","pB","pC","dA","getDparam","dB","dC","Ainv","X","addPointToResults","getCentroid","sizeX","getSize","sizeY","sizeZ","Xdir","Ydir","Zdir","angles","toEulerAngles","roll","pitch","yaw","opposite","isOpposite","sinr_cosp","cosr_cosp","sinp","siny_cosp","cosy_cosp","asin","sum","getBoundingBox","dx","dy","dz","local","loc","SectionBox","depth_fragment_shader","depth_vertex_shader","texUniform","vertAttrs","vertBuffer","tex","depths","deleteShader","deleteProgram","fragment_shader","fragment_shader_300","vertex_shader","vertex_shader_300","ColourCoding","errorHandler","changed","_navigationMode","_camera","_sectionBox","section","_background","_highlightingColour","_xrayColour","_mvMatrix","_pMatrix","_renderingMode","NORMAL","_mvMatrixTimestamp","_isRunning","_plugins","_handles","_shaderProgram","_gamma","_contrast","_brightness","_currentFps","_performance","HIGH","_adaptivePerformanceOn","_hoverPickEnabled","_events","_canvasListeners","_readerOptions","getElementById","preserveDrawingBuffer","_requestAnimationFrame","_fptExtension","_depthTextureExtension","offsetWidth","offsetHeight","_initShaders","_initAttributesAndUniforms","_disableContextMenu","_stateStyles","_stateStyleTexture","TEXTURE4","_stateStyleSamplerUniform","elementHeight","elementWidth","watchCanvasSize","_cameraAdjustment","_fpsWatch","setupFpsReporting","_watchPerformance","_width","info","addPlugin","plugin","removePlugin","defineStyle","colData","forHandleOrAll","HOVEROVER","some","getProductType","IFCSITE","handle","getHandle","getCurrentImageHtml","frame","getCurrentImageDataArray","getCurrentImageBlob","getProductsStates","restoreProductsStates","stateMap","sm","prodId","getProductBoundingBox","sizes","subjectRatio","viewRatio","minDistance","targets","isSet","debug","getMergedRegionWcs","noWcs","settings","key","loadAsync","progressProxy","blob","worker","Worker","URL","createObjectURL","onmessage","wexBimId","addHandle","wexbimId","href","postMessage","readerOptions","setNearAndFarFromCurrentModels","_mvMatrixUniformPointer","_lightUniformPointer","_colorCodingUniformPointer","_renderingModeUniformPointer","_highlightingColourUniformPointer","_hoverPickColourUniformPointer","_xrayColourUniformPointer","_gammaContrastBrightnessUniform","_sectionBoxUniform","_pointers","mvOrigin","degToRad","deg","mvZ","walk","condition","disablePlugins","background","updatePMatrix","light","getLightPosition","gamma","contrast","brightness","NONE","highlightingColour","hoverPickColour","xrayColour","XRAY","drawXRAY","performance","VERY_LOW","LOW","MEDIUM","verticalOffset","horizontalOffset","upDir","rightDir","horizontal","transparentPass","highlightedPass","getCameraDistanceFromRegion","viewDir","regionVec","regionDir","regionDist","nearVec","farVec","withAnimation","checkVisibility","distAndWidth","raw","getEventDataRaw","eventData","Viewer","noData","running","_eventFB","SCISSOR_TEST","scissor","PRODUCTS","locationRange","invPmat","nearPoint","farPoint","tempNear","tempFar","eventLocation","renderIds","isolate","productIds","getIsolated","tick","fps","isMoving","age","stopAll","isModelOn","isProductInModel","isModelLoaded","startAll","stopPicking","startPicking","isPickable","eventName","handler","events","domEvtName","listener","eName","off","callbacks","handlers","documentElement","clip","clippingPlaneA","clippingPlaneB","orderBy","getMeasure","isolateHeavyProducts","measure","toIsolate","product","modelGroups","group","idStr","getHTMLPositionOfProductCentroid","getHtmlCoordinatesOfVector","glPosition","glX","glY","setLockedOrbitOrigin","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","defineProperty","enumerable","get","obj","prop","Symbol","toStringTag"],"sourceRoot":""}